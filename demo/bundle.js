(()=>{var e={843:(e,t,n)=>{e.exports={ResizeSensor:n(87),ElementQueries:n(456)}},456:function(e,t,n){"use strict";var i,o,r;"undefined"!=typeof window&&window,o=[n(87)],void 0===(r="function"==typeof(i=function(e){var t=function(){var t,n={},i=[];function o(e){e||(e=document.documentElement);var t=window.getComputedStyle(e,null).fontSize;return parseFloat(t)||16}function r(e,t){var n=t.split(/\d/),i=n[n.length-1];switch(t=parseFloat(t),i){case"px":return t;case"em":return t*o(e);case"rem":return t*o();case"vw":return t*document.documentElement.clientWidth/100;case"vh":return t*document.documentElement.clientHeight/100;case"vmin":case"vmax":var r=document.documentElement.clientWidth/100,s=document.documentElement.clientHeight/100;return t*(0,Math["vmin"===i?"min":"max"])(r,s);default:return t}}function s(e,t){var i,o,s,a,u,l,d,c;this.element=e;var h=["min-width","min-height","max-width","max-height"];this.call=function(){for(i in s=function(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}(this.element),l={},n[t])n[t].hasOwnProperty(i)&&(o=n[t][i],a=r(this.element,o.value),u="width"===o.property?s.width:s.height,c=o.mode+"-"+o.property,d="","min"===o.mode&&u>=a&&(d+=o.value),"max"===o.mode&&u<=a&&(d+=o.value),l[c]||(l[c]=""),d&&-1===(" "+l[c]+" ").indexOf(" "+d+" ")&&(l[c]+=" "+d));for(var e in h)h.hasOwnProperty(e)&&(l[h[e]]?this.element.setAttribute(h[e],l[h[e]].substr(1)):this.element.removeAttribute(h[e]))}}function a(t,n){t.elementQueriesSetupInformation||(t.elementQueriesSetupInformation=new s(t,n)),t.elementQueriesSensor||(t.elementQueriesSensor=new e(t,(function(){t.elementQueriesSetupInformation.call()})))}function u(e,o,r,s){if(void 0===n[e]){n[e]=[];var a=i.length;t.innerHTML+="\n"+e+" {animation: 0.1s element-queries;}",t.innerHTML+="\n"+e+" > .resize-sensor {min-width: "+a+"px;}",i.push(e)}n[e].push({mode:o,property:r,value:s})}function l(e){var t;if(document.querySelectorAll&&(t=e?e.querySelectorAll.bind(e):document.querySelectorAll.bind(document)),t||"undefined"==typeof $$||(t=$$),t||"undefined"==typeof jQuery||(t=jQuery),!t)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return t}function d(t){var n=[],i=[],o=[],r=0,s=-1,a=[];for(var u in t.children)if(t.children.hasOwnProperty(u)&&t.children[u].tagName&&"img"===t.children[u].tagName.toLowerCase()){n.push(t.children[u]);var l=t.children[u].getAttribute("min-width")||t.children[u].getAttribute("data-min-width"),d=t.children[u].getAttribute("data-src")||t.children[u].getAttribute("url");o.push(d);var c={minWidth:l};i.push(c),l?t.children[u].style.display="none":(r=n.length-1,t.children[u].style.display="block")}function h(){var e,u=!1;for(e in n)n.hasOwnProperty(e)&&i[e].minWidth&&t.offsetWidth>i[e].minWidth&&(u=e);if(u||(u=r),s!==u)if(a[u])n[s].style.display="none",n[u].style.display="block",s=u;else{var l=new Image;l.onload=function(){n[u].src=o[u],n[s].style.display="none",n[u].style.display="block",a[u]=!0,s=u},l.src=o[u]}else n[u].src=o[u]}s=r,t.resizeSensorInstance=new e(t,h),h()}var c=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,h=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function m(e){var t,n,i,o;for(e=e.replace(/'/g,'"');null!==(t=c.exec(e));)for(n=t[1]+t[3],i=t[2];null!==(o=h.exec(i));)u(n,o[1],o[2],o[3])}function f(e){var t="";if(e)if("string"==typeof e)-1===(e=e.toLowerCase()).indexOf("min-width")&&-1===e.indexOf("max-width")||m(e);else for(var n=0,i=e.length;n<i;n++)1===e[n].type?-1!==(t=e[n].selectorText||e[n].cssText).indexOf("min-height")||-1!==t.indexOf("max-height")?m(t):-1===t.indexOf("min-width")&&-1===t.indexOf("max-width")||m(t):4===e[n].type?f(e[n].cssRules||e[n].rules):3===e[n].type&&e[n].styleSheet.hasOwnProperty("cssRules")&&f(e[n].styleSheet.cssRules)}var p=!1;this.init=function(){var n="animationstart";void 0!==document.documentElement.style.webkitAnimationName?n="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?n="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(n="oanimationstart"),document.body.addEventListener(n,(function(t){var n=t.target,o=n&&window.getComputedStyle(n,null),r=o&&o.getPropertyValue("animation-name");if(r&&-1!==r.indexOf("element-queries")){n.elementQueriesSensor=new e(n,(function(){n.elementQueriesSetupInformation&&n.elementQueriesSetupInformation.call()}));var s=window.getComputedStyle(n.resizeSensor,null).getPropertyValue("min-width");s=parseInt(s.replace("px","")),a(t.target,i[s])}})),p||((t=document.createElement("style")).type="text/css",t.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",t.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(t),p=!0);for(var o=0,r=document.styleSheets.length;o<r;o++)try{document.styleSheets[o].href&&0===document.styleSheets[o].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[o].href),f(document.styleSheets[o].cssRules||document.styleSheets[o].rules||document.styleSheets[o].cssText)}catch(e){}!function(){for(var e=l()("[data-responsive-image],[responsive-image]"),t=0,n=e.length;t<n;t++)d(e[t])}()},this.findElementQueriesElements=function(e){!function(e){var t=l(e);for(var i in n)if(n.hasOwnProperty(i))for(var o=t(i,e),r=0,s=o.length;r<s;r++)a(o[r],i)}(e)},this.update=function(){this.init()}};t.update=function(){t.instance.update()},t.detach=function(e){e.elementQueriesSetupInformation?(e.elementQueriesSensor.detach(),delete e.elementQueriesSetupInformation,delete e.elementQueriesSensor):e.resizeSensorInstance&&(e.resizeSensorInstance.detach(),delete e.resizeSensorInstance)},t.init=function(){t.instance||(t.instance=new t),t.instance.init()};return t.findElementQueriesElements=function(e){t.instance.findElementQueriesElements(e)},t.listen=function(){!function(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var t=setInterval((function(){/loaded|complete/i.test(document.readyState)&&(e(),clearInterval(t))}),10);else window.onload=e}(t.init)},t})?i.apply(t,o):i)||(e.exports=r)},87:function(e,t,n){"use strict";var i,o;"undefined"!=typeof window&&window,void 0===(o="function"==typeof(i=function(){if("undefined"==typeof window)return null;var e="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||function(t){return e.setTimeout(t,20)},n=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||function(t){e.clearTimeout(t)};function i(e,t){var n=Object.prototype.toString.call(e),i="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"[object Object]"===n||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements,o=0,r=e.length;if(i)for(;o<r;o++)t(e[o]);else t(e)}function o(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function r(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}var s=function(e,a){var u=0;function l(){var e,t,n=[];this.add=function(e){n.push(e)},this.call=function(i){for(e=0,t=n.length;e<t;e++)n[e].call(this,i)},this.remove=function(i){var o=[];for(e=0,t=n.length;e<t;e++)n[e]!==i&&o.push(n[e]);n=o},this.length=function(){return n.length}}function d(e,n){if(e)if(e.resizedAttached)e.resizedAttached.add(n);else{e.resizedAttached=new l,e.resizedAttached.add(n),e.resizeSensor=document.createElement("div"),e.resizeSensor.dir="ltr",e.resizeSensor.className="resize-sensor";var i={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},s={position:"absolute",left:"0px",top:"0px",transition:"0s"};r(e.resizeSensor,i);var a=document.createElement("div");a.className="resize-sensor-expand",r(a,i);var d=document.createElement("div");r(d,s),a.appendChild(d);var c=document.createElement("div");c.className="resize-sensor-shrink",r(c,i);var h=document.createElement("div");r(h,s),r(h,{width:"200%",height:"200%"}),c.appendChild(h),e.resizeSensor.appendChild(a),e.resizeSensor.appendChild(c),e.appendChild(e.resizeSensor);var m=window.getComputedStyle(e),f=m?m.getPropertyValue("position"):null;"absolute"!==f&&"relative"!==f&&"fixed"!==f&&"sticky"!==f&&(e.style.position="relative");var p=!1,v=0,y=o(e),g=0,w=0,x=!0;u=0;var S=function(){if(x){if(0===e.offsetWidth&&0===e.offsetHeight)return void(u||(u=t((function(){u=0,S()}))));x=!1}var n,i;n=e.offsetWidth,i=e.offsetHeight,d.style.width=n+10+"px",d.style.height=i+10+"px",a.scrollLeft=n+10,a.scrollTop=i+10,c.scrollLeft=n+10,c.scrollTop=i+10};e.resizeSensor.resetSensor=S;var E=function(){v=0,p&&(g=y.width,w=y.height,e.resizedAttached&&e.resizedAttached.call(y))},b=function(){y=o(e),(p=y.width!==g||y.height!==w)&&!v&&(v=t(E)),S()},z=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)};z(a,"scroll",b),z(c,"scroll",b),u=t((function(){u=0,S()}))}}i(e,(function(e){d(e,a)})),this.detach=function(t){u||(n(u),u=0),s.detach(e,t)},this.reset=function(){e.resizeSensor.resetSensor()}};if(s.reset=function(e){i(e,(function(e){e.resizeSensor.resetSensor()}))},s.detach=function(e,t){i(e,(function(e){e&&(e.resizedAttached&&"function"==typeof t&&(e.resizedAttached.remove(t),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached))}))},"undefined"!=typeof MutationObserver){var a=new MutationObserver((function(e){for(var t in e)if(e.hasOwnProperty(t))for(var n=e[t].addedNodes,i=0;i<n.length;i++)n[i].resizeSensor&&s.reset(n[i])}));document.addEventListener("DOMContentLoaded",(function(e){a.observe(document.body,{childList:!0,subtree:!0})}))}return s})?i.call(t,n,t,e):i)||(e.exports=o)}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}(()=>{"use strict";var e=function(){function e(){}return e.prototype.findBestColumn=function(e,t,n,i,o){var r=i.length,s=i.reduce((function(t,n,i,o){if(i+e>r)return t.push(-1),t;for(var s=-1,a=i;a<e+i;a++)s=Math.max(s,o[a]);return t.push(s),t}),[]).reduce((function(e,t,n){return e?t<e.yUnits-o&&-1!==t?{xColumns:n,yUnits:t}:e:{xColumns:n,yUnits:t}}),null);return s.element=t,s},e}(),t=function(){function t(t,n,i,o){if(void 0===i&&(i=12),void 0===o&&(o=0),this.columns=12,this.threshold=40,this.columnBottoms=[],t.renderer){var r=t;this.renderer=r.renderer,this.containerWidth=r.containerWidth,this.columns=r.columns,this.threshold=r.threshold,this.packer=r.packer||new e}else this.renderer=t,this.containerWidth=n,this.columns=i,this.threshold=o,this.packer=new e;for(;this.columnBottoms.length<this.columns;)this.columnBottoms.push(0);this.renderer.setColumns(i)}return t.prototype.findBestColumn=function(e,t,n){return this.packer.findBestColumn(e,t,n,this.columnBottoms,this.threshold)},t.prototype.fit=function(e){var t=this,n=[],i=0;return e.forEach((function(e,o){var r=t.renderer.getElementWidth(e),s=t.renderer.getElementHeight(e),a=Math.round(r/t.containerWidth*t.columns);a>t.columns&&(a=t.columns);for(var u=t.findBestColumn(a,e,o),l=u.xColumns,d=l+a,c=l;c<d;c++)t.columnBottoms[c]=u.yUnits+s;n.push(u),i=Math.max(i,s+u.yUnits)})),{coords:n,totalHeight:i}},t.prototype.layout=function(e){var t=this,n=this.fit(e);return n.coords.forEach((function(e){t.renderer.setPosition(e.element,e.xColumns,e.yUnits)})),n.totalHeight},t}(),i=function(){function e(){}return e.prototype.setColumns=function(e){this.columns=e},e.prototype.getElementWidth=function(e){return e.offsetWidth},e.prototype.getElementHeight=function(e){return e.offsetHeight},e.prototype.setPosition=function(e,t,n){e.style.left=t/this.columns*100+"%",e.style.top=n+"px"},e}(),o=function(){function e(){}return e.prototype.findBestColumn=function(e,t,n,i,o){var r=e*n%i.length;return{xColumns:r,yUnits:i[r],element:t}},e}(),r=n(843),s=!1;function a(){const n=document.querySelector(".mason-container"),r=n.offsetWidth,a=[].slice.call(n.querySelectorAll("div.mason-brick")),u={containerWidth:r,renderer:new i,threshold:40,columns:12,packer:s?new o:new e},l=new t(u).layout(a);n.style.minHeight=l+"px"}function u(){var e=document.getElementById("expandableExample");e.style.height="auto",e.removeEventListener("transitionend",u)}a(),new r.ResizeSensor(document.querySelector(".mason-container").querySelectorAll("div.mason-brick"),(function(){a()})),document.getElementById("expandableExample").querySelector("button").addEventListener("click",(function(){!function(){const e=document.getElementById("expandableExample");if("400px"!==e.style.height){const t=window.getComputedStyle(e,null).height;e.setAttribute("data-auto-height",t),e.style.height=t,setTimeout((function(){e.style.height="400px"}))}else{const t=e.getAttribute("data-auto-height");e.style.height=t,e.addEventListener("transitionend",u)}}()})),document.getElementById("useSimple").addEventListener("change",(function(e){s=e.target.checked,a()}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYXNvbi1qcy8uL25vZGVfbW9kdWxlcy9jc3MtZWxlbWVudC1xdWVyaWVzL2luZGV4LmpzIiwid2VicGFjazovL21hc29uLWpzLy4vbm9kZV9tb2R1bGVzL2Nzcy1lbGVtZW50LXF1ZXJpZXMvc3JjL0VsZW1lbnRRdWVyaWVzLmpzIiwid2VicGFjazovL21hc29uLWpzLy4vbm9kZV9tb2R1bGVzL2Nzcy1lbGVtZW50LXF1ZXJpZXMvc3JjL1Jlc2l6ZVNlbnNvci5qcyIsIndlYnBhY2s6Ly9tYXNvbi1qcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9tYXNvbi1qcy8uL2xpYi9tYXNvbi1kZWZhdWx0LXBhY2tlci5qcyIsIndlYnBhY2s6Ly9tYXNvbi1qcy8uL2xpYi9tYXNvbi5qcyIsIndlYnBhY2s6Ly9tYXNvbi1qcy8uL2xpYi9tYXNvbi1kb20tcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vbWFzb24tanMvLi9saWIvbWFzb24tc2ltcGxlLXBhY2tlci5qcyIsIndlYnBhY2s6Ly9tYXNvbi1qcy8uL2RlbW8vbWFpbi5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiUmVzaXplU2Vuc29yIiwiRWxlbWVudFF1ZXJpZXMiLCJ3aW5kb3ciLCJjc3NTdHlsZUVsZW1lbnQiLCJhbGxRdWVyaWVzIiwiaWRUb1NlbGVjdG9yTWFwcGluZyIsImdldEVtU2l6ZSIsImVsZW1lbnQiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImZvbnRTaXplIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInBhcnNlRmxvYXQiLCJjb252ZXJ0VG9QeCIsInZhbHVlIiwibnVtYmVycyIsInNwbGl0IiwidW5pdHMiLCJsZW5ndGgiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsInZ3IiwidmgiLCJjaG9vc2VyIiwiTWF0aCIsIlNldHVwSW5mb3JtYXRpb24iLCJpZCIsImtleSIsIm9wdGlvbiIsImVsZW1lbnRTaXplIiwiYWN0dWFsVmFsdWUiLCJhdHRyVmFsdWVzIiwiYXR0clZhbHVlIiwiYXR0ck5hbWUiLCJ0aGlzIiwiYXR0cmlidXRlcyIsImNhbGwiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aWR0aCIsIm9mZnNldFdpZHRoIiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwicmVjdCIsInJvdW5kIiwiZ2V0RWxlbWVudFNpemUiLCJoYXNPd25Qcm9wZXJ0eSIsInByb3BlcnR5IiwibW9kZSIsImluZGV4T2YiLCJrIiwic2V0QXR0cmlidXRlIiwic3Vic3RyIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0dXBFbGVtZW50IiwiZWxlbWVudFF1ZXJpZXNTZXR1cEluZm9ybWF0aW9uIiwiZWxlbWVudFF1ZXJpZXNTZW5zb3IiLCJxdWV1ZVF1ZXJ5Iiwic2VsZWN0b3IiLCJpbm5lckhUTUwiLCJwdXNoIiwiZ2V0UXVlcnkiLCJjb250YWluZXIiLCJxdWVyeSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJiaW5kIiwiJCQiLCJqUXVlcnkiLCJhdHRhY2hSZXNwb25zaXZlSW1hZ2UiLCJjaGlsZHJlbiIsInJ1bGVzIiwic291cmNlcyIsImRlZmF1bHRJbWFnZUlkIiwibGFzdEFjdGl2ZUltYWdlIiwibG9hZGVkSW1hZ2VzIiwiaSIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsIm1pbldpZHRoIiwiZ2V0QXR0cmlidXRlIiwic3JjIiwicnVsZSIsInN0eWxlIiwiZGlzcGxheSIsImNoZWNrIiwiaW1hZ2VUb0Rpc3BsYXkiLCJpbWFnZSIsIkltYWdlIiwib25sb2FkIiwicmVzaXplU2Vuc29ySW5zdGFuY2UiLCJyZWdleCIsImF0dHJSZWdleCIsImV4dHJhY3RRdWVyeSIsImNzcyIsIm1hdGNoIiwic21hdGNoIiwiYXR0cnMiLCJhdHRyTWF0Y2giLCJyZXBsYWNlIiwiZXhlYyIsInJlYWRSdWxlcyIsImoiLCJ0eXBlIiwic2VsZWN0b3JUZXh0IiwiY3NzVGV4dCIsImNzc1J1bGVzIiwic3R5bGVTaGVldCIsImRlZmF1bHRDc3NJbmplY3RlZCIsImluaXQiLCJhbmltYXRpb25TdGFydCIsImJvZHkiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsInN0eWxlcyIsImFuaW1hdGlvbk5hbWUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwicmVzaXplU2Vuc29yIiwicGFyc2VJbnQiLCJjcmVhdGVFbGVtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhcHBlbmRDaGlsZCIsInN0eWxlU2hlZXRzIiwiaHJlZiIsImNvbnNvbGUiLCJ3YXJuIiwiZWxlbWVudHMiLCJmaW5kUmVzcG9uc2l2ZUltYWdlcyIsImZpbmRFbGVtZW50UXVlcmllc0VsZW1lbnRzIiwidXBkYXRlIiwiaW5zdGFuY2UiLCJkZXRhY2giLCJsaXN0ZW4iLCJjYWxsYmFjayIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJET01Mb2FkVGltZXIiLCJzZXRJbnRlcnZhbCIsInJlYWR5U3RhdGUiLCJjbGVhckludGVydmFsIiwiZG9tTG9hZGVkIiwiZ2xvYmFsV2luZG93Iiwic2VsZiIsIkZ1bmN0aW9uIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwid2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZm4iLCJzZXRUaW1lb3V0IiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJtb3pDYW5jZWxBbmltYXRpb25GcmFtZSIsIndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lIiwidGltZXIiLCJjbGVhclRpbWVvdXQiLCJmb3JFYWNoRWxlbWVudCIsImVsZW1lbnRzVHlwZSIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiaXNDb2xsZWN0aW9uVHlwZWQiLCJFbGVtZW50cyIsInNldFN0eWxlIiwia2V5cyIsImZvckVhY2giLCJsYXN0QW5pbWF0aW9uRnJhbWVGb3JJbnZpc2libGVDaGVjayIsIkV2ZW50UXVldWUiLCJxIiwiYWRkIiwiZXYiLCJzaXplSW5mbyIsInJlbW92ZSIsIm5ld1F1ZXVlIiwiYXR0YWNoUmVzaXplRXZlbnQiLCJyZXNpemVkIiwicmVzaXplZEF0dGFjaGVkIiwiZGlyIiwiY2xhc3NOYW1lIiwicG9pbnRlckV2ZW50cyIsInBvc2l0aW9uIiwibGVmdCIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwib3ZlcmZsb3ciLCJ6SW5kZXgiLCJ2aXNpYmlsaXR5IiwibWF4V2lkdGgiLCJzdHlsZUNoaWxkIiwidHJhbnNpdGlvbiIsImV4cGFuZCIsImV4cGFuZENoaWxkIiwic2hyaW5rIiwic2hyaW5rQ2hpbGQiLCJjb21wdXRlZFN0eWxlIiwiZGlydHkiLCJyYWZJZCIsInNpemUiLCJsYXN0V2lkdGgiLCJsYXN0SGVpZ2h0IiwiaW5pdGlhbEhpZGRlbkNoZWNrIiwicmVzZXQiLCJzY3JvbGxMZWZ0Iiwic2Nyb2xsVG9wIiwicmVzZXRTZW5zb3IiLCJvblJlc2l6ZWQiLCJvblNjcm9sbCIsImFkZEV2ZW50IiwiZWwiLCJuYW1lIiwiY2IiLCJhdHRhY2hFdmVudCIsImVsZW0iLCJjb250YWlucyIsInJlbW92ZUNoaWxkIiwiTXV0YXRpb25PYnNlcnZlciIsIm9ic2VydmVyIiwibXV0YXRpb25zIiwiaXRlbXMiLCJhZGRlZE5vZGVzIiwiZXZlbnQiLCJvYnNlcnZlIiwiY2hpbGRMaXN0Iiwic3VidHJlZSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJNYXNvbkRlZmF1bHRQYWNrZXIiLCJmaW5kQmVzdENvbHVtbiIsInJlcXVpcmVkQ29sdW1ucyIsImVsZW1lbnRJbmRleCIsImNvbHVtbkJvdHRvbXMiLCJ0aHJlc2hvbGQiLCJjb2x1bW5zIiwiYmVzdEZpdCIsInJlZHVjZSIsImFjY3VtdWxhdG9yIiwiY29sdW1uIiwiaWR4IiwiYWxsIiwieVBvcyIsIm1heCIsImJlc3QiLCJjdXJyIiwieVVuaXRzIiwieENvbHVtbnMiLCJNYXNvbiIsInJlbmRlcmVyT3JPcHRpb25zIiwiY29udGFpbmVyV2lkdGgiLCJvcHRzIiwicmVuZGVyZXIiLCJwYWNrZXIiLCJzZXRDb2x1bW5zIiwiZml0IiwiX3RoaXMiLCJjb29yZHNMaXN0IiwidG90YWxIZWlnaHQiLCJlbGVtZW50V2lkdGgiLCJnZXRFbGVtZW50V2lkdGgiLCJlbGVtZW50SGVpZ2h0IiwiZ2V0RWxlbWVudEhlaWdodCIsImNvbHMiLCJzdGFydENvbCIsImVuZENvbCIsImNvb3JkcyIsImxheW91dCIsImxheW91dFJlc3VsdCIsImNvb3JkIiwic2V0UG9zaXRpb24iLCJNYXNvbkRvbVJlbmRlcmVyIiwibGVmdEluQ29scyIsInRvcEluVW5pdHMiLCJNYXNvblNpbXBsZVBhY2tlciIsIm5leHRDb2x1bW4iLCJ1c2VTaW1wbGVQYWNrZXIiLCJwYWNrIiwiZGFzaGJvYXJkIiwicXVlcnlTZWxlY3RvciIsInNsaWNlIiwiY29udGFpbmVySGVpZ2h0IiwibWluSGVpZ2h0IiwicmVzZXRIZWlnaHQiLCJmaXJzdFRpbGUiLCJnZXRFbGVtZW50QnlJZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhdXRvSGVpZ2h0IiwidGFyZ2V0SGVpZ2h0Iiwic2hvd01vcmUiLCJldnQiLCJjaGVja2VkIl0sIm1hcHBpbmdzIjoiMkJBQUFBLEVBQU9DLFFBQVUsQ0FDYkMsYUFBYyxFQUFRLElBQ3RCQyxlQUFnQixFQUFRLE8saUNDRjVCLFVBZ0JvQixvQkFBWEMsUUFBeUJBLE9BUDFCLEVBQU8sQ0FBQyxZQUE2QiwwQkFBUCxFQU9XLFNBQVVGLEdBT3ZELElBQUlDLEVBQWlCLFdBRWpCLElBQUlFLEVBR0FDLEVBQWEsR0FHYkMsRUFBc0IsR0FPMUIsU0FBU0MsRUFBVUMsR0FDVkEsSUFDREEsRUFBVUMsU0FBU0MsaUJBRXZCLElBQUlDLEVBQVdSLE9BQU9TLGlCQUFpQkosRUFBUyxNQUFNRyxTQUN0RCxPQUFPRSxXQUFXRixJQUFhLEdBK0JuQyxTQUFTRyxFQUFZTixFQUFTTyxHQUMxQixJQUFJQyxFQUFVRCxFQUFNRSxNQUFNLE1BQ3RCQyxFQUFRRixF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QixnQkFBaUJILEdBckIvQ04sSUFPQSxJQUFJLEVBQUFyUixhQUFhUSxTQUFTK1EsY0FBYyxvQkFBb0J4TixpQkFBaUIsb0JBQW9CLFdBQzdGc04sT0FHSjdRLFNBQVNxUixlQUFlLHFCQUFxQk4sY0FBYyxVQUFVekssaUJBQWlCLFNBQVMsWUFhbkcsV0FDRSxNQUFNOEssRUFBWXBSLFNBQVNxUixlQUFlLHFCQUV4QyxHQUErQixVQUEzQkQsRUFBVTNNLE1BQU16QyxPQUFvQixDQUN0QyxNQUFNdVAsRUFBYTdSLE9BQU9TLGlCQUFpQmlSLEVBQVcsTUFBTXBQLE9BQzFEb1AsRUFBVTFPLGFBQWEsbUJBQW9CNk8sR0FDM0NILEVBQVUzTSxNQUFNekMsT0FBU3VQLEVBQ3pCM0ksWUFBVyxXQUNQd0ksRUFBVTNNLE1BQU16QyxPQUFTLGVBRTFCLENBQ0wsTUFBTXdQLEVBQWVKLEVBQVU5TSxhQUFhLG9CQUMxQzhNLEVBQVUzTSxNQUFNekMsT0FBU3dQLEVBQ3pCSixFQUFVOUssaUJBQWlCLGdCQUFpQjZLLElBekI3Q00sTUFHSHpSLFNBQVNxUixlQUFlLGFBQWEvSyxpQkFBaUIsVUEwQjFELFNBQXNCb0wsR0FDbEJkLEVBQWtCYyxFQUFJbEwsT0FBT21MLFFBQzdCZCxRIiwiZmlsZSI6Ii4uL2RlbW8vYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgUmVzaXplU2Vuc29yOiByZXF1aXJlKCcuL3NyYy9SZXNpemVTZW5zb3InKSxcbiAgICBFbGVtZW50UXVlcmllczogcmVxdWlyZSgnLi9zcmMvRWxlbWVudFF1ZXJpZXMnKVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDb3B5cmlnaHQgTWFyYyBKLiBTY2htaWR0LiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBhdCB0aGUgdG9wLWxldmVsXG4gKiBkaXJlY3Rvcnkgb2YgdGhpcyBkaXN0cmlidXRpb24gYW5kIGF0XG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWFyY2ovY3NzLWVsZW1lbnQtcXVlcmllcy9ibG9iL21hc3Rlci9MSUNFTlNFLlxuICovXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKFsnLi9SZXNpemVTZW5zb3IuanMnXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnLi9SZXNpemVTZW5zb3IuanMnKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcm9vdC5FbGVtZW50UXVlcmllcyA9IGZhY3Rvcnkocm9vdC5SZXNpemVTZW5zb3IpO1xuICAgICAgICByb290LkVsZW1lbnRRdWVyaWVzLmxpc3RlbigpO1xuICAgIH1cbn0odHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiAoUmVzaXplU2Vuc29yKSB7XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICB2YXIgRWxlbWVudFF1ZXJpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vPHN0eWxlPiBlbGVtZW50IHdpdGggb3VyIGR5bmFtaWNhbGx5IGNyZWF0ZWQgc3R5bGVzXG4gICAgICAgIHZhciBjc3NTdHlsZUVsZW1lbnQ7XG5cbiAgICAgICAgLy9hbGwgcnVsZXMgZm91bmQgZm9yIGVsZW1lbnQgcXVlcmllc1xuICAgICAgICB2YXIgYWxsUXVlcmllcyA9IHt9O1xuXG4gICAgICAgIC8vYXNzb2NpYXRpb24gbWFwIHRvIGlkZW50aWZ5IHdoaWNoIHNlbGVjdG9yIGJlbG9uZ3MgdG8gYSBlbGVtZW50IGZyb20gdGhlIGFuaW1hdGlvbnN0YXJ0IGV2ZW50LlxuICAgICAgICB2YXIgaWRUb1NlbGVjdG9yTWFwcGluZyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gZWxlbWVudFxuICAgICAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0RW1TaXplKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZm9udFNpemUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LCBudWxsKS5mb250U2l6ZTtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KGZvbnRTaXplKSB8fCAxNjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgZWxlbWVudCBzaXplXG4gICAgICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH0ge3dpZHRoLCBoZWlnaHR9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRFbGVtZW50U2l6ZShlbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGVsZW1lbnQub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogZWxlbWVudC5vZmZzZXRIZWlnaHRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IE1hdGgucm91bmQocmVjdC53aWR0aCksXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLnJvdW5kKHJlY3QuaGVpZ2h0KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBjb3B5cmlnaHQgaHR0cHM6Ly9naXRodWIuY29tL01yMGdyb2cvZWxlbWVudC1xdWVyeS9ibG9iL21hc3Rlci9MSUNFTlNFXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgICAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNvbnZlcnRUb1B4KGVsZW1lbnQsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgbnVtYmVycyA9IHZhbHVlLnNwbGl0KC9cXGQvKTtcbiAgICAgICAgICAgIHZhciB1bml0cyA9IG51bWJlcnNbbnVtYmVycy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgICAgICAgICBzd2l0Y2ggKHVuaXRzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcInB4XCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFwiZW1cIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlICogZ2V0RW1TaXplKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJyZW1cIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlICogZ2V0RW1TaXplKCk7XG4gICAgICAgICAgICAgICAgLy8gVmlld3BvcnQgdW5pdHMhXG4gICAgICAgICAgICAgICAgLy8gQWNjb3JkaW5nIHRvIGh0dHA6Ly9xdWlya3Ntb2RlLm9yZy9tb2JpbGUvdGFibGVWaWV3cG9ydC5odG1sXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoL0hlaWdodCBnZXRzIHVzIHRoZSBtb3N0IHJlbGlhYmxlIGluZm9cbiAgICAgICAgICAgICAgICBjYXNlIFwidndcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlICogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIC8gMTAwO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ2aFwiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgKiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IC8gMTAwO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ2bWluXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcInZtYXhcIjpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZ3ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIC8gMTAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IC8gMTAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hvb3NlciA9IE1hdGhbdW5pdHMgPT09IFwidm1pblwiID8gXCJtaW5cIiA6IFwibWF4XCJdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgKiBjaG9vc2VyKHZ3LCB2aCk7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgIC8vIGZvciBub3csIG5vdCBzdXBwb3J0aW5nIHBoeXNpY2FsIHVuaXRzIChzaW5jZSB0aGV5IGFyZSBqdXN0IGEgc2V0IG51bWJlciBvZiBweClcbiAgICAgICAgICAgICAgICAvLyBvciBleC9jaCAoZ2V0dGluZyBhY2N1cmF0ZSBtZWFzdXJlbWVudHMgaXMgaGFyZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIFNldHVwSW5mb3JtYXRpb24oZWxlbWVudCwgaWQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIga2V5LCBvcHRpb24sIGVsZW1lbnRTaXplLCB2YWx1ZSwgYWN0dWFsVmFsdWUsIGF0dHJWYWx1ZXMsIGF0dHJWYWx1ZSwgYXR0ck5hbWU7XG5cbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVzID0gWydtaW4td2lkdGgnLCAnbWluLWhlaWdodCcsICdtYXgtd2lkdGgnLCAnbWF4LWhlaWdodCddO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEV4dHJhY3RzIHRoZSBjb21wdXRlZCB3aWR0aC9oZWlnaHQgYW5kIHNldHMgdG8gbWluL21heC0gYXR0cmlidXRlLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0aGlzLmNhbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gZXh0cmFjdCBjdXJyZW50IGRpbWVuc2lvbnNcbiAgICAgICAgICAgICAgICBlbGVtZW50U2l6ZSA9IGdldEVsZW1lbnRTaXplKHRoaXMuZWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICBhdHRyVmFsdWVzID0ge307XG5cbiAgICAgICAgICAgICAgICBmb3IgKGtleSBpbiBhbGxRdWVyaWVzW2lkXSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFsbFF1ZXJpZXNbaWRdLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbiA9IGFsbFF1ZXJpZXNbaWRdW2tleV07XG5cbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjb252ZXJ0VG9QeCh0aGlzLmVsZW1lbnQsIG9wdGlvbi52YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgYWN0dWFsVmFsdWUgPSBvcHRpb24ucHJvcGVydHkgPT09ICd3aWR0aCcgPyBlbGVtZW50U2l6ZS53aWR0aCA6IGVsZW1lbnRTaXplLmhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgYXR0ck5hbWUgPSBvcHRpb24ubW9kZSArICctJyArIG9wdGlvbi5wcm9wZXJ0eTtcbiAgICAgICAgICAgICAgICAgICAgYXR0clZhbHVlID0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbi5tb2RlID09PSAnbWluJyAmJiBhY3R1YWxWYWx1ZSA+PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0clZhbHVlICs9IG9wdGlvbi52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb24ubW9kZSA9PT0gJ21heCcgJiYgYWN0dWFsVmFsdWUgPD0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJWYWx1ZSArPSBvcHRpb24udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWF0dHJWYWx1ZXNbYXR0ck5hbWVdKSBhdHRyVmFsdWVzW2F0dHJOYW1lXSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXR0clZhbHVlICYmIC0xID09PSAoJyAnICsgYXR0clZhbHVlc1thdHRyTmFtZV0gKyAnICcpLmluZGV4T2YoJyAnICsgYXR0clZhbHVlICsgJyAnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0clZhbHVlc1thdHRyTmFtZV0gKz0gJyAnICsgYXR0clZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShrKSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJWYWx1ZXNbYXR0cmlidXRlc1trXV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlc1trXSwgYXR0clZhbHVlc1thdHRyaWJ1dGVzW2tdXS5zdWJzdHIoMSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVzW2tdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gICAgICBpZFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc2V0dXBFbGVtZW50KGVsZW1lbnQsIGlkKSB7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQuZWxlbWVudFF1ZXJpZXNTZXR1cEluZm9ybWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5lbGVtZW50UXVlcmllc1NldHVwSW5mb3JtYXRpb24gPSBuZXcgU2V0dXBJbmZvcm1hdGlvbihlbGVtZW50LCBpZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghZWxlbWVudC5lbGVtZW50UXVlcmllc1NlbnNvcikge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuZWxlbWVudFF1ZXJpZXNTZW5zb3IgPSBuZXcgUmVzaXplU2Vuc29yKGVsZW1lbnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5lbGVtZW50UXVlcmllc1NldHVwSW5mb3JtYXRpb24uY2FsbCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0b3JlcyBydWxlcyB0byB0aGUgc2VsZWN0b3IgdGhhdCBzaG91bGQgYmUgYXBwbGllZCBvbmNlIHJlc2l6ZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3RvclxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbW9kZSBtaW58bWF4XG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSB3aWR0aHxoZWlnaHRcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBxdWV1ZVF1ZXJ5KHNlbGVjdG9yLCBtb2RlLCBwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YoYWxsUXVlcmllc1tzZWxlY3Rvcl0pID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGFsbFF1ZXJpZXNbc2VsZWN0b3JdID0gW107XG4gICAgICAgICAgICAgICAgLy8gYWRkIGFuaW1hdGlvbiB0byB0cmlnZ2VyIGFuaW1hdGlvbnN0YXJ0IGV2ZW50LCBzbyB3ZSBrbm93IGV4YWN0bHkgd2hlbiBhIGVsZW1lbnQgYXBwZWFycyBpbiB0aGUgRE9NXG5cbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBpZFRvU2VsZWN0b3JNYXBwaW5nLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBjc3NTdHlsZUVsZW1lbnQuaW5uZXJIVE1MICs9ICdcXG4nICsgc2VsZWN0b3IgKyAnIHthbmltYXRpb246IDAuMXMgZWxlbWVudC1xdWVyaWVzO30nO1xuICAgICAgICAgICAgICAgIGNzc1N0eWxlRWxlbWVudC5pbm5lckhUTUwgKz0gJ1xcbicgKyBzZWxlY3RvciArICcgPiAucmVzaXplLXNlbnNvciB7bWluLXdpZHRoOiAnK2lkKydweDt9JztcbiAgICAgICAgICAgICAgICBpZFRvU2VsZWN0b3JNYXBwaW5nLnB1c2goc2VsZWN0b3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhbGxRdWVyaWVzW3NlbGVjdG9yXS5wdXNoKHtcbiAgICAgICAgICAgICAgICBtb2RlOiBtb2RlLFxuICAgICAgICAgICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0UXVlcnkoY29udGFpbmVyKSB7XG4gICAgICAgICAgICB2YXIgcXVlcnk7XG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCkgcXVlcnkgPSAoY29udGFpbmVyKSA/IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsLmJpbmQoY29udGFpbmVyKSA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwuYmluZChkb2N1bWVudCk7XG4gICAgICAgICAgICBpZiAoIXF1ZXJ5ICYmICd1bmRlZmluZWQnICE9PSB0eXBlb2YgJCQpIHF1ZXJ5ID0gJCQ7XG4gICAgICAgICAgICBpZiAoIXF1ZXJ5ICYmICd1bmRlZmluZWQnICE9PSB0eXBlb2YgalF1ZXJ5KSBxdWVyeSA9IGpRdWVyeTtcblxuICAgICAgICAgICAgaWYgKCFxdWVyeSkge1xuICAgICAgICAgICAgICAgIHRocm93ICdObyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsLCBqUXVlcnkgb3IgTW9vdG9vbHNcXCdzICQkIGZvdW5kLic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBxdWVyeTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBhbmltYXRpb25TdGFydCBkaWRuJ3QgY2F0Y2ggYSBuZXcgZWxlbWVudCBpbiB0aGUgRE9NLCB3ZSBjYW4gbWFudWFsbHkgc2VhcmNoIGZvciBpdFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZmluZEVsZW1lbnRRdWVyaWVzRWxlbWVudHMoY29udGFpbmVyKSB7XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBnZXRRdWVyeShjb250YWluZXIpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBzZWxlY3RvciBpbiBhbGxRdWVyaWVzKSBpZiAoYWxsUXVlcmllcy5oYXNPd25Qcm9wZXJ0eShzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICAvLyBmaW5kIGFsbCBlbGVtZW50cyBiYXNlZCBvbiB0aGUgZXh0cmFjdCBxdWVyeSBzZWxlY3RvciBmcm9tIHRoZSBlbGVtZW50IHF1ZXJ5IHJ1bGVcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBxdWVyeShzZWxlY3RvciwgY29udGFpbmVyKTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldHVwRWxlbWVudChlbGVtZW50c1tpXSwgc2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBhdHRhY2hSZXNwb25zaXZlSW1hZ2UoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gW107XG4gICAgICAgICAgICB2YXIgcnVsZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBzb3VyY2VzID0gW107XG4gICAgICAgICAgICB2YXIgZGVmYXVsdEltYWdlSWQgPSAwO1xuICAgICAgICAgICAgdmFyIGxhc3RBY3RpdmVJbWFnZSA9IC0xO1xuICAgICAgICAgICAgdmFyIGxvYWRlZEltYWdlcyA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpIGluIGVsZW1lbnQuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnQuY2hpbGRyZW4uaGFzT3duUHJvcGVydHkoaSkpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuY2hpbGRyZW5baV0udGFnTmFtZSAmJiBlbGVtZW50LmNoaWxkcmVuW2ldLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2ltZycpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChlbGVtZW50LmNoaWxkcmVuW2ldKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbWluV2lkdGggPSBlbGVtZW50LmNoaWxkcmVuW2ldLmdldEF0dHJpYnV0ZSgnbWluLXdpZHRoJykgfHwgZWxlbWVudC5jaGlsZHJlbltpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWluLXdpZHRoJyk7XG4gICAgICAgICAgICAgICAgICAgIC8vdmFyIG1pbkhlaWdodCA9IGVsZW1lbnQuY2hpbGRyZW5baV0uZ2V0QXR0cmlidXRlKCdtaW4taGVpZ2h0JykgfHwgZWxlbWVudC5jaGlsZHJlbltpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWluLWhlaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3JjID0gZWxlbWVudC5jaGlsZHJlbltpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3JjJykgfHwgZWxlbWVudC5jaGlsZHJlbltpXS5nZXRBdHRyaWJ1dGUoJ3VybCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZXMucHVzaChzcmMpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBydWxlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWluV2lkdGg6IG1pbldpZHRoXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgcnVsZXMucHVzaChydWxlKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1pbldpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0SW1hZ2VJZCA9IGNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNoaWxkcmVuW2ldLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jaGlsZHJlbltpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsYXN0QWN0aXZlSW1hZ2UgPSBkZWZhdWx0SW1hZ2VJZDtcblxuICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2soKSB7XG4gICAgICAgICAgICAgICAgdmFyIGltYWdlVG9EaXNwbGF5ID0gZmFsc2UsIGk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGkgaW4gY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShpKSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGVzW2ldLm1pbldpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5vZmZzZXRXaWR0aCA+IHJ1bGVzW2ldLm1pbldpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VUb0Rpc3BsYXkgPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFpbWFnZVRvRGlzcGxheSkge1xuICAgICAgICAgICAgICAgICAgICAvL25vIHJ1bGUgbWF0Y2hlZCwgc2hvdyBkZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgIGltYWdlVG9EaXNwbGF5ID0gZGVmYXVsdEltYWdlSWQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGxhc3RBY3RpdmVJbWFnZSAhPT0gaW1hZ2VUb0Rpc3BsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9pbWFnZSBjaGFuZ2VcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWxvYWRlZEltYWdlc1tpbWFnZVRvRGlzcGxheV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaW1hZ2UgaGFzIG5vdCBiZWVuIGxvYWRlZCB5ZXQsIHdlIG5lZWQgdG8gbG9hZCB0aGUgaW1hZ2UgZmlyc3QgaW4gbWVtb3J5IHRvIHByZXZlbnQgZmxhc2ggb2ZcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vbm8gY29udGVudFxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbltpbWFnZVRvRGlzcGxheV0uc3JjID0gc291cmNlc1tpbWFnZVRvRGlzcGxheV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbltsYXN0QWN0aXZlSW1hZ2VdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5baW1hZ2VUb0Rpc3BsYXldLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkSW1hZ2VzW2ltYWdlVG9EaXNwbGF5XSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0QWN0aXZlSW1hZ2UgPSBpbWFnZVRvRGlzcGxheTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlLnNyYyA9IHNvdXJjZXNbaW1hZ2VUb0Rpc3BsYXldO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5bbGFzdEFjdGl2ZUltYWdlXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5baW1hZ2VUb0Rpc3BsYXldLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEFjdGl2ZUltYWdlID0gaW1hZ2VUb0Rpc3BsYXk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL21ha2Ugc3VyZSBmb3IgaW5pdGlhbCBjaGVjayBjYWxsIHRoZSAuc3JjIGlzIHNldCBjb3JyZWN0bHlcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5baW1hZ2VUb0Rpc3BsYXldLnNyYyA9IHNvdXJjZXNbaW1hZ2VUb0Rpc3BsYXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWxlbWVudC5yZXNpemVTZW5zb3JJbnN0YW5jZSA9IG5ldyBSZXNpemVTZW5zb3IoZWxlbWVudCwgY2hlY2spO1xuICAgICAgICAgICAgY2hlY2soKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGZpbmRSZXNwb25zaXZlSW1hZ2VzKCkge1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gZ2V0UXVlcnkoKTtcblxuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gcXVlcnkoJ1tkYXRhLXJlc3BvbnNpdmUtaW1hZ2VdLFtyZXNwb25zaXZlLWltYWdlXScpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgICAgICBhdHRhY2hSZXNwb25zaXZlSW1hZ2UoZWxlbWVudHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlZ2V4ID0gLyw/W1xcc1xcdF0qKFteLFxcbl0qPykoKD86XFxbW1xcc1xcdF0qPyg/Om1pbnxtYXgpLSg/OndpZHRofGhlaWdodClbXFxzXFx0XSo/W34kXFxeXT89W1xcc1xcdF0qP1wiW15cIl0qP1wiW1xcc1xcdF0qP10pKykoW14sXFxuXFxzXFx7XSopL21naTtcbiAgICAgICAgdmFyIGF0dHJSZWdleCA9IC9cXFtbXFxzXFx0XSo/KG1pbnxtYXgpLSh3aWR0aHxoZWlnaHQpW1xcc1xcdF0qP1t+JFxcXl0/PVtcXHNcXHRdKj9cIihbXlwiXSo/KVwiW1xcc1xcdF0qP10vbWdpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gY3NzXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBleHRyYWN0UXVlcnkoY3NzKSB7XG4gICAgICAgICAgICB2YXIgbWF0Y2gsIHNtYXRjaCwgYXR0cnMsIGF0dHJNYXRjaDtcblxuICAgICAgICAgICAgY3NzID0gY3NzLnJlcGxhY2UoLycvZywgJ1wiJyk7XG4gICAgICAgICAgICB3aGlsZSAobnVsbCAhPT0gKG1hdGNoID0gcmVnZXguZXhlYyhjc3MpKSkge1xuICAgICAgICAgICAgICAgIHNtYXRjaCA9IG1hdGNoWzFdICsgbWF0Y2hbM107XG4gICAgICAgICAgICAgICAgYXR0cnMgPSBtYXRjaFsyXTtcblxuICAgICAgICAgICAgICAgIHdoaWxlIChudWxsICE9PSAoYXR0ck1hdGNoID0gYXR0clJlZ2V4LmV4ZWMoYXR0cnMpKSkge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZVF1ZXJ5KHNtYXRjaCwgYXR0ck1hdGNoWzFdLCBhdHRyTWF0Y2hbMl0sIGF0dHJNYXRjaFszXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7Q3NzUnVsZVtdfFN0cmluZ30gcnVsZXNcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHJlYWRSdWxlcyhydWxlcykge1xuICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gJyc7XG5cbiAgICAgICAgICAgIGlmICghcnVsZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIHJ1bGVzKSB7XG4gICAgICAgICAgICAgICAgcnVsZXMgPSBydWxlcy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIGlmICgtMSAhPT0gcnVsZXMuaW5kZXhPZignbWluLXdpZHRoJykgfHwgLTEgIT09IHJ1bGVzLmluZGV4T2YoJ21heC13aWR0aCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3RRdWVyeShydWxlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IHJ1bGVzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gcnVsZXNbaV0udHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3IgPSBydWxlc1tpXS5zZWxlY3RvclRleHQgfHwgcnVsZXNbaV0uY3NzVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgtMSAhPT0gc2VsZWN0b3IuaW5kZXhPZignbWluLWhlaWdodCcpIHx8IC0xICE9PSBzZWxlY3Rvci5pbmRleE9mKCdtYXgtaGVpZ2h0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0UXVlcnkoc2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgtMSAhPT0gc2VsZWN0b3IuaW5kZXhPZignbWluLXdpZHRoJykgfHwgLTEgIT09IHNlbGVjdG9yLmluZGV4T2YoJ21heC13aWR0aCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdFF1ZXJ5KHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICg0ID09PSBydWxlc1tpXS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkUnVsZXMocnVsZXNbaV0uY3NzUnVsZXMgfHwgcnVsZXNbaV0ucnVsZXMpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKDMgPT09IHJ1bGVzW2ldLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJ1bGVzW2ldLnN0eWxlU2hlZXQuaGFzT3duUHJvcGVydHkoXCJjc3NSdWxlc1wiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRSdWxlcyhydWxlc1tpXS5zdHlsZVNoZWV0LmNzc1J1bGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZWZhdWx0Q3NzSW5qZWN0ZWQgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2VhcmNoZXMgYWxsIGNzcyBydWxlcyBhbmQgc2V0dXBzIHRoZSBldmVudCBsaXN0ZW5lciB0byBhbGwgZWxlbWVudHMgd2l0aCBlbGVtZW50IHF1ZXJ5IHJ1bGVzLi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhbmltYXRpb25TdGFydCA9ICdhbmltYXRpb25zdGFydCc7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZVsnd2Via2l0QW5pbWF0aW9uTmFtZSddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvblN0YXJ0ID0gJ3dlYmtpdEFuaW1hdGlvblN0YXJ0JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZVsnTW96QW5pbWF0aW9uTmFtZSddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvblN0YXJ0ID0gJ21vemFuaW1hdGlvbnN0YXJ0JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZVsnT0FuaW1hdGlvbk5hbWUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25TdGFydCA9ICdvYW5pbWF0aW9uc3RhcnQnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoYW5pbWF0aW9uU3RhcnQsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgICAgICB2YXIgc3R5bGVzID0gZWxlbWVudCAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LCBudWxsKTtcbiAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uTmFtZSA9IHN0eWxlcyAmJiBzdHlsZXMuZ2V0UHJvcGVydHlWYWx1ZSgnYW5pbWF0aW9uLW5hbWUnKTtcbiAgICAgICAgICAgICAgICB2YXIgcmVxdWlyZXNTZXR1cCA9IGFuaW1hdGlvbk5hbWUgJiYgKC0xICE9PSBhbmltYXRpb25OYW1lLmluZGV4T2YoJ2VsZW1lbnQtcXVlcmllcycpKTtcblxuICAgICAgICAgICAgICAgIGlmIChyZXF1aXJlc1NldHVwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZWxlbWVudFF1ZXJpZXNTZW5zb3IgPSBuZXcgUmVzaXplU2Vuc29yKGVsZW1lbnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmVsZW1lbnRRdWVyaWVzU2V0dXBJbmZvcm1hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZWxlbWVudFF1ZXJpZXNTZXR1cEluZm9ybWF0aW9uLmNhbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbnNvclN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQucmVzaXplU2Vuc29yLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gc2Vuc29yU3R5bGVzLmdldFByb3BlcnR5VmFsdWUoJ21pbi13aWR0aCcpO1xuICAgICAgICAgICAgICAgICAgICBpZCA9IHBhcnNlSW50KGlkLnJlcGxhY2UoJ3B4JywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0dXBFbGVtZW50KGUudGFyZ2V0LCBpZFRvU2VsZWN0b3JNYXBwaW5nW2lkXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghZGVmYXVsdENzc0luamVjdGVkKSB7XG4gICAgICAgICAgICAgICAgY3NzU3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICBjc3NTdHlsZUVsZW1lbnQudHlwZSA9ICd0ZXh0L2Nzcyc7XG4gICAgICAgICAgICAgICAgY3NzU3R5bGVFbGVtZW50LmlubmVySFRNTCA9ICdbcmVzcG9uc2l2ZS1pbWFnZV0gPiBpbWcsIFtkYXRhLXJlc3BvbnNpdmUtaW1hZ2VdIHtvdmVyZmxvdzogaGlkZGVuOyBwYWRkaW5nOiAwOyB9IFtyZXNwb25zaXZlLWltYWdlXSA+IGltZywgW2RhdGEtcmVzcG9uc2l2ZS1pbWFnZV0gPiBpbWcge3dpZHRoOiAxMDAlO30nO1xuXG4gICAgICAgICAgICAgICAgLy9zYWZhcmkgd2FudHMgYXQgbGVhc3Qgb25lIHJ1bGUgaW4ga2V5ZnJhbWVzIHRvIHN0YXJ0IHdvcmtpbmdcbiAgICAgICAgICAgICAgICBjc3NTdHlsZUVsZW1lbnQuaW5uZXJIVE1MICs9ICdcXG5Aa2V5ZnJhbWVzIGVsZW1lbnQtcXVlcmllcyB7IDAlIHsgdmlzaWJpbGl0eTogaW5oZXJpdDsgfSB9JztcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLmFwcGVuZENoaWxkKGNzc1N0eWxlRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgZGVmYXVsdENzc0luamVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBkb2N1bWVudC5zdHlsZVNoZWV0cy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuc3R5bGVTaGVldHNbaV0uaHJlZiAmJiAwID09PSBkb2N1bWVudC5zdHlsZVNoZWV0c1tpXS5ocmVmLmluZGV4T2YoJ2ZpbGU6Ly8nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiQ3NzRWxlbWVudFF1ZXJpZXM6IHVuYWJsZSB0byBwYXJzZSBsb2NhbCBjc3MgZmlsZXMsIFwiICsgZG9jdW1lbnQuc3R5bGVTaGVldHNbaV0uaHJlZik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZWFkUnVsZXMoZG9jdW1lbnQuc3R5bGVTaGVldHNbaV0uY3NzUnVsZXMgfHwgZG9jdW1lbnQuc3R5bGVTaGVldHNbaV0ucnVsZXMgfHwgZG9jdW1lbnQuc3R5bGVTaGVldHNbaV0uY3NzVGV4dCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmluZFJlc3BvbnNpdmVJbWFnZXMoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogR28gdGhyb3VnaCBhbGwgY29sbGVjdGVkIHJ1bGVzIChyZWFkUnVsZXMoKSkgYW5kIGF0dGFjaCB0aGUgcmVzaXplLWxpc3RlbmVyLlxuICAgICAgICAgKiBOb3QgbmVjZXNzYXJ5IHRvIGNhbGwgaXQgbWFudWFsbHksIHNpbmNlIHdlIGRldGVjdCBhdXRvbWF0aWNhbGx5IHdoZW4gbmV3IGVsZW1lbnRzXG4gICAgICAgICAqIGFyZSBhdmFpbGFibGUgaW4gdGhlIERPTS4gSG93ZXZlciwgc29tZXRpbWVzIGhhbmR5IGZvciBkaXJ0eSBET00gbW9kaWZpY2F0aW9ucy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIG9ubHkgZWxlbWVudHMgb2YgdGhlIGNvbnRhaW5lciBhcmUgY29uc2lkZXJlZCAoZG9jdW1lbnQuYm9keSBpZiBub3Qgc2V0KVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5maW5kRWxlbWVudFF1ZXJpZXNFbGVtZW50cyA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcbiAgICAgICAgICAgIGZpbmRFbGVtZW50UXVlcmllc0VsZW1lbnRzKGNvbnRhaW5lcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgRWxlbWVudFF1ZXJpZXMudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBFbGVtZW50UXVlcmllcy5pbnN0YW5jZS51cGRhdGUoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgc2Vuc29yIGFuZCBlbGVtZW50cXVlcnkgaW5mb3JtYXRpb24gZnJvbSB0aGUgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAgICAgKi9cbiAgICBFbGVtZW50UXVlcmllcy5kZXRhY2ggPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBpZiAoZWxlbWVudC5lbGVtZW50UXVlcmllc1NldHVwSW5mb3JtYXRpb24pIHtcbiAgICAgICAgICAgIC8vZWxlbWVudCBxdWVyaWVzXG4gICAgICAgICAgICBlbGVtZW50LmVsZW1lbnRRdWVyaWVzU2Vuc29yLmRldGFjaCgpO1xuICAgICAgICAgICAgZGVsZXRlIGVsZW1lbnQuZWxlbWVudFF1ZXJpZXNTZXR1cEluZm9ybWF0aW9uO1xuICAgICAgICAgICAgZGVsZXRlIGVsZW1lbnQuZWxlbWVudFF1ZXJpZXNTZW5zb3I7XG5cbiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50LnJlc2l6ZVNlbnNvckluc3RhbmNlKSB7XG4gICAgICAgICAgICAvL3Jlc3BvbnNpdmUgaW1hZ2VcblxuICAgICAgICAgICAgZWxlbWVudC5yZXNpemVTZW5zb3JJbnN0YW5jZS5kZXRhY2goKTtcbiAgICAgICAgICAgIGRlbGV0ZSBlbGVtZW50LnJlc2l6ZVNlbnNvckluc3RhbmNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIEVsZW1lbnRRdWVyaWVzLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghRWxlbWVudFF1ZXJpZXMuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIEVsZW1lbnRRdWVyaWVzLmluc3RhbmNlID0gbmV3IEVsZW1lbnRRdWVyaWVzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBFbGVtZW50UXVlcmllcy5pbnN0YW5jZS5pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBkb21Mb2FkZWQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgLyogTW96aWxsYSwgQ2hyb21lLCBPcGVyYSAqL1xuICAgICAgICBpZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGNhbGxiYWNrLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyogU2FmYXJpLCBpQ2FiLCBLb25xdWVyb3IgKi9cbiAgICAgICAgZWxzZSBpZiAoL0tIVE1MfFdlYktpdHxpQ2FiL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xuICAgICAgICAgICAgdmFyIERPTUxvYWRUaW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoL2xvYWRlZHxjb21wbGV0ZS9pLnRlc3QoZG9jdW1lbnQucmVhZHlTdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChET01Mb2FkVGltZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEwKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBPdGhlciB3ZWIgYnJvd3NlcnMgKi9cbiAgICAgICAgZWxzZSB3aW5kb3cub25sb2FkID0gY2FsbGJhY2s7XG4gICAgfTtcblxuICAgIEVsZW1lbnRRdWVyaWVzLmZpbmRFbGVtZW50UXVlcmllc0VsZW1lbnRzID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xuICAgICAgICBFbGVtZW50UXVlcmllcy5pbnN0YW5jZS5maW5kRWxlbWVudFF1ZXJpZXNFbGVtZW50cyhjb250YWluZXIpO1xuICAgIH07XG5cbiAgICBFbGVtZW50UXVlcmllcy5saXN0ZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRvbUxvYWRlZChFbGVtZW50UXVlcmllcy5pbml0KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEVsZW1lbnRRdWVyaWVzO1xuXG59KSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ29weXJpZ2h0IE1hcmMgSi4gU2NobWlkdC4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgYXQgdGhlIHRvcC1sZXZlbFxuICogZGlyZWN0b3J5IG9mIHRoaXMgZGlzdHJpYnV0aW9uIGFuZCBhdFxuICogaHR0cHM6Ly9naXRodWIuY29tL21hcmNqL2Nzcy1lbGVtZW50LXF1ZXJpZXMvYmxvYi9tYXN0ZXIvTElDRU5TRS5cbiAqL1xuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShmYWN0b3J5KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJvb3QuUmVzaXplU2Vuc29yID0gZmFjdG9yeSgpO1xuICAgIH1cbn0odHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAvLyBNYWtlIHN1cmUgaXQgZG9lcyBub3QgdGhyb3cgaW4gYSBTU1IgKFNlcnZlciBTaWRlIFJlbmRlcmluZykgc2l0dWF0aW9uXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9TZW1hbnRpYy1PcmcvU2VtYW50aWMtVUkvaXNzdWVzLzM4NTVcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWFyY2ovY3NzLWVsZW1lbnQtcXVlcmllcy9pc3N1ZXMvMjU3XG4gICAgdmFyIGdsb2JhbFdpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lk1hdGggPT0gTWF0aFxuICAgICAgICA/IHdpbmRvd1xuICAgICAgICA6IHR5cGVvZiBzZWxmICE9ICd1bmRlZmluZWQnICYmIHNlbGYuTWF0aCA9PSBNYXRoXG4gICAgICAgICAgICA/IHNlbGZcbiAgICAgICAgICAgIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbiAgICAvLyBPbmx5IHVzZWQgZm9yIHRoZSBkaXJ0eSBjaGVja2luZywgc28gdGhlIGV2ZW50IGNhbGxiYWNrIGNvdW50IGlzIGxpbWl0ZWQgdG8gbWF4IDEgY2FsbCBwZXIgZnBzIHBlciBzZW5zb3IuXG4gICAgLy8gSW4gY29tYmluYXRpb24gd2l0aCB0aGUgZXZlbnQgYmFzZWQgcmVzaXplIHNlbnNvciB0aGlzIHNhdmVzIGNwdSB0aW1lLCBiZWNhdXNlIHRoZSBzZW5zb3IgaXMgdG9vIGZhc3QgYW5kXG4gICAgLy8gd291bGQgZ2VuZXJhdGUgdG9vIG1hbnkgdW5uZWNlc3NhcnkgZXZlbnRzLlxuICAgIHZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBnbG9iYWxXaW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgIGdsb2JhbFdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgICAgZ2xvYmFsV2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICAgICAgICBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgIHJldHVybiBnbG9iYWxXaW5kb3cuc2V0VGltZW91dChmbiwgMjApO1xuICAgICAgICB9O1xuXG4gICAgdmFyIGNhbmNlbEFuaW1hdGlvbkZyYW1lID0gZ2xvYmFsV2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgIGdsb2JhbFdpbmRvdy5tb3pDYW5jZWxBbmltYXRpb25GcmFtZSB8fFxuICAgICAgICBnbG9iYWxXaW5kb3cud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgICAgZnVuY3Rpb24gKHRpbWVyKSB7XG4gICAgICAgICAgICBnbG9iYWxXaW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgfTtcblxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGUgb3ZlciBlYWNoIG9mIHRoZSBwcm92aWRlZCBlbGVtZW50KHMpLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxIVE1MRWxlbWVudFtdfSBlbGVtZW50c1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259ICAgICAgICAgICAgICAgICAgY2FsbGJhY2tcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmb3JFYWNoRWxlbWVudChlbGVtZW50cywgY2FsbGJhY2spe1xuICAgICAgICB2YXIgZWxlbWVudHNUeXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGVsZW1lbnRzKTtcbiAgICAgICAgdmFyIGlzQ29sbGVjdGlvblR5cGVkID0gKCdbb2JqZWN0IEFycmF5XScgPT09IGVsZW1lbnRzVHlwZVxuICAgICAgICAgICAgfHwgKCdbb2JqZWN0IE5vZGVMaXN0XScgPT09IGVsZW1lbnRzVHlwZSlcbiAgICAgICAgICAgIHx8ICgnW29iamVjdCBIVE1MQ29sbGVjdGlvbl0nID09PSBlbGVtZW50c1R5cGUpXG4gICAgICAgICAgICB8fCAoJ1tvYmplY3QgT2JqZWN0XScgPT09IGVsZW1lbnRzVHlwZSlcbiAgICAgICAgICAgIHx8ICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIGpRdWVyeSAmJiBlbGVtZW50cyBpbnN0YW5jZW9mIGpRdWVyeSkgLy9qcXVlcnlcbiAgICAgICAgICAgIHx8ICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIEVsZW1lbnRzICYmIGVsZW1lbnRzIGluc3RhbmNlb2YgRWxlbWVudHMpIC8vbW9vdG9vbHNcbiAgICAgICAgKTtcbiAgICAgICAgdmFyIGkgPSAwLCBqID0gZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICBpZiAoaXNDb2xsZWN0aW9uVHlwZWQpIHtcbiAgICAgICAgICAgIGZvciAoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZWxlbWVudHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2soZWxlbWVudHMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBHZXQgZWxlbWVudCBzaXplXG4gICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gICAgKiBAcmV0dXJucyB7T2JqZWN0fSB7d2lkdGgsIGhlaWdodH1cbiAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRTaXplKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCFlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogZWxlbWVudC5vZmZzZXRXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGVsZW1lbnQub2Zmc2V0SGVpZ2h0XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB3aWR0aDogTWF0aC5yb3VuZChyZWN0LndpZHRoKSxcbiAgICAgICAgICAgIGhlaWdodDogTWF0aC5yb3VuZChyZWN0LmhlaWdodClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGx5IENTUyBzdHlsZXMgdG8gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3R5bGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzZXRTdHlsZShlbGVtZW50LCBzdHlsZSkge1xuICAgICAgICBPYmplY3Qua2V5cyhzdHlsZSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGVba2V5XSA9IHN0eWxlW2tleV07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsYXNzIGZvciBkaW1lbnNpb24gY2hhbmdlIGRldGVjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudHxFbGVtZW50W118RWxlbWVudHN8alF1ZXJ5fSBlbGVtZW50XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIHZhciBSZXNpemVTZW5zb3IgPSBmdW5jdGlvbihlbGVtZW50LCBjYWxsYmFjaykge1xuICAgICAgICAvL0lzIHVzZWQgd2hlbiBjaGVja2luZyBpbiByZXNldCgpIG9ubHkgZm9yIGludmlzaWJsZSBlbGVtZW50c1xuICAgICAgICB2YXIgbGFzdEFuaW1hdGlvbkZyYW1lRm9ySW52aXNpYmxlQ2hlY2sgPSAwO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIEV2ZW50UXVldWUoKSB7XG4gICAgICAgICAgICB2YXIgcSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5hZGQgPSBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgICAgIHEucHVzaChldik7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgaSwgajtcbiAgICAgICAgICAgIHRoaXMuY2FsbCA9IGZ1bmN0aW9uKHNpemVJbmZvKSB7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMCwgaiA9IHEubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHFbaV0uY2FsbCh0aGlzLCBzaXplSW5mbyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5yZW1vdmUgPSBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgICAgIHZhciBuZXdRdWV1ZSA9IFtdO1xuICAgICAgICAgICAgICAgIGZvcihpID0gMCwgaiA9IHEubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKHFbaV0gIT09IGV2KSBuZXdRdWV1ZS5wdXNoKHFbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBxID0gbmV3UXVldWU7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmxlbmd0aCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBxLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259ICAgIHJlc2l6ZWRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGF0dGFjaFJlc2l6ZUV2ZW50KGVsZW1lbnQsIHJlc2l6ZWQpIHtcbiAgICAgICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQucmVzaXplZEF0dGFjaGVkKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5yZXNpemVkQXR0YWNoZWQuYWRkKHJlc2l6ZWQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWxlbWVudC5yZXNpemVkQXR0YWNoZWQgPSBuZXcgRXZlbnRRdWV1ZSgpO1xuICAgICAgICAgICAgZWxlbWVudC5yZXNpemVkQXR0YWNoZWQuYWRkKHJlc2l6ZWQpO1xuXG4gICAgICAgICAgICBlbGVtZW50LnJlc2l6ZVNlbnNvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgZWxlbWVudC5yZXNpemVTZW5zb3IuZGlyID0gJ2x0cic7XG4gICAgICAgICAgICBlbGVtZW50LnJlc2l6ZVNlbnNvci5jbGFzc05hbWUgPSAncmVzaXplLXNlbnNvcic7XG5cbiAgICAgICAgICAgIHZhciBzdHlsZSA9IHtcbiAgICAgICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgICAgbGVmdDogJzBweCcsXG4gICAgICAgICAgICAgICAgdG9wOiAnMHB4JyxcbiAgICAgICAgICAgICAgICByaWdodDogJzBweCcsXG4gICAgICAgICAgICAgICAgYm90dG9tOiAnMHB4JyxcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgekluZGV4OiAnLTEnLFxuICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6ICdoaWRkZW4nLFxuICAgICAgICAgICAgICAgIG1heFdpZHRoOiAnMTAwJSdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgc3R5bGVDaGlsZCA9IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICBsZWZ0OiAnMHB4JyxcbiAgICAgICAgICAgICAgICB0b3A6ICcwcHgnLFxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246ICcwcycsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBzZXRTdHlsZShlbGVtZW50LnJlc2l6ZVNlbnNvciwgc3R5bGUpO1xuXG4gICAgICAgICAgICB2YXIgZXhwYW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBleHBhbmQuY2xhc3NOYW1lID0gJ3Jlc2l6ZS1zZW5zb3ItZXhwYW5kJztcbiAgICAgICAgICAgIHNldFN0eWxlKGV4cGFuZCwgc3R5bGUpO1xuXG4gICAgICAgICAgICB2YXIgZXhwYW5kQ2hpbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHNldFN0eWxlKGV4cGFuZENoaWxkLCBzdHlsZUNoaWxkKTtcbiAgICAgICAgICAgIGV4cGFuZC5hcHBlbmRDaGlsZChleHBhbmRDaGlsZCk7XG5cbiAgICAgICAgICAgIHZhciBzaHJpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHNocmluay5jbGFzc05hbWUgPSAncmVzaXplLXNlbnNvci1zaHJpbmsnO1xuICAgICAgICAgICAgc2V0U3R5bGUoc2hyaW5rLCBzdHlsZSk7XG5cbiAgICAgICAgICAgIHZhciBzaHJpbmtDaGlsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgc2V0U3R5bGUoc2hyaW5rQ2hpbGQsIHN0eWxlQ2hpbGQpO1xuICAgICAgICAgICAgc2V0U3R5bGUoc2hyaW5rQ2hpbGQsIHsgd2lkdGg6ICcyMDAlJywgaGVpZ2h0OiAnMjAwJScgfSk7XG4gICAgICAgICAgICBzaHJpbmsuYXBwZW5kQ2hpbGQoc2hyaW5rQ2hpbGQpO1xuXG4gICAgICAgICAgICBlbGVtZW50LnJlc2l6ZVNlbnNvci5hcHBlbmRDaGlsZChleHBhbmQpO1xuICAgICAgICAgICAgZWxlbWVudC5yZXNpemVTZW5zb3IuYXBwZW5kQ2hpbGQoc2hyaW5rKTtcbiAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlbWVudC5yZXNpemVTZW5zb3IpO1xuXG4gICAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gY29tcHV0ZWRTdHlsZSA/IGNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgncG9zaXRpb24nKSA6IG51bGw7XG4gICAgICAgICAgICBpZiAoJ2Fic29sdXRlJyAhPT0gcG9zaXRpb24gJiYgJ3JlbGF0aXZlJyAhPT0gcG9zaXRpb24gJiYgJ2ZpeGVkJyAhPT0gcG9zaXRpb24gJiYgJ3N0aWNreScgIT09IHBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBkaXJ0eSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvL2xhc3QgcmVxdWVzdCBhbmltYXRpb24gZnJhbWUgaWQgdXNlZCBpbiBvbnNjcm9sbCBldmVudFxuICAgICAgICAgICAgdmFyIHJhZklkID0gMDtcbiAgICAgICAgICAgIHZhciBzaXplID0gZ2V0RWxlbWVudFNpemUoZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgbGFzdFdpZHRoID0gMDtcbiAgICAgICAgICAgIHZhciBsYXN0SGVpZ2h0ID0gMDtcbiAgICAgICAgICAgIHZhciBpbml0aWFsSGlkZGVuQ2hlY2sgPSB0cnVlO1xuICAgICAgICAgICAgbGFzdEFuaW1hdGlvbkZyYW1lRm9ySW52aXNpYmxlQ2hlY2sgPSAwO1xuXG4gICAgICAgICAgICB2YXIgcmVzZXRFeHBhbmRTaHJpbmsgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG5cbiAgICAgICAgICAgICAgICBleHBhbmRDaGlsZC5zdHlsZS53aWR0aCA9ICh3aWR0aCArIDEwKSArICdweCc7XG4gICAgICAgICAgICAgICAgZXhwYW5kQ2hpbGQuc3R5bGUuaGVpZ2h0ID0gKGhlaWdodCArIDEwKSArICdweCc7XG5cbiAgICAgICAgICAgICAgICBleHBhbmQuc2Nyb2xsTGVmdCA9IHdpZHRoICsgMTA7XG4gICAgICAgICAgICAgICAgZXhwYW5kLnNjcm9sbFRvcCA9IGhlaWdodCArIDEwO1xuXG4gICAgICAgICAgICAgICAgc2hyaW5rLnNjcm9sbExlZnQgPSB3aWR0aCArIDEwO1xuICAgICAgICAgICAgICAgIHNocmluay5zY3JvbGxUb3AgPSBoZWlnaHQgKyAxMDtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciByZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGVsZW1lbnQgaXMgaGlkZGVuXG4gICAgICAgICAgICAgICAgaWYgKGluaXRpYWxIaWRkZW5DaGVjaykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW52aXNpYmxlID0gZWxlbWVudC5vZmZzZXRXaWR0aCA9PT0gMCAmJiBlbGVtZW50Lm9mZnNldEhlaWdodCA9PT0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaW4gbmV4dCBmcmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsYXN0QW5pbWF0aW9uRnJhbWVGb3JJbnZpc2libGVDaGVjayl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEFuaW1hdGlvbkZyYW1lRm9ySW52aXNpYmxlQ2hlY2sgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEFuaW1hdGlvbkZyYW1lRm9ySW52aXNpYmxlQ2hlY2sgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTdG9wIGNoZWNraW5nXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsSGlkZGVuQ2hlY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJlc2V0RXhwYW5kU2hyaW5rKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZWxlbWVudC5yZXNpemVTZW5zb3IucmVzZXRTZW5zb3IgPSByZXNldDtcblxuICAgICAgICAgICAgdmFyIG9uUmVzaXplZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJhZklkID0gMDtcblxuICAgICAgICAgICAgICAgIGlmICghZGlydHkpIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGxhc3RXaWR0aCA9IHNpemUud2lkdGg7XG4gICAgICAgICAgICAgICAgbGFzdEhlaWdodCA9IHNpemUuaGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQucmVzaXplZEF0dGFjaGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVzaXplZEF0dGFjaGVkLmNhbGwoc2l6ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIG9uU2Nyb2xsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IGdldEVsZW1lbnRTaXplKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGRpcnR5ID0gc2l6ZS53aWR0aCAhPT0gbGFzdFdpZHRoIHx8IHNpemUuaGVpZ2h0ICE9PSBsYXN0SGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgaWYgKGRpcnR5ICYmICFyYWZJZCkge1xuICAgICAgICAgICAgICAgICAgICByYWZJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShvblJlc2l6ZWQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgYWRkRXZlbnQgPSBmdW5jdGlvbihlbCwgbmFtZSwgY2IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWwuYXR0YWNoRXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuYXR0YWNoRXZlbnQoJ29uJyArIG5hbWUsIGNiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGNiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBhZGRFdmVudChleHBhbmQsICdzY3JvbGwnLCBvblNjcm9sbCk7XG4gICAgICAgICAgICBhZGRFdmVudChzaHJpbmssICdzY3JvbGwnLCBvblNjcm9sbCk7XG5cbiAgICAgICAgICAgIC8vIEZpeCBmb3IgY3VzdG9tIEVsZW1lbnRzIGFuZCBpbnZpc2libGUgZWxlbWVudHNcbiAgICAgICAgICAgIGxhc3RBbmltYXRpb25GcmFtZUZvckludmlzaWJsZUNoZWNrID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgbGFzdEFuaW1hdGlvbkZyYW1lRm9ySW52aXNpYmxlQ2hlY2sgPSAwO1xuICAgICAgICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvckVhY2hFbGVtZW50KGVsZW1lbnQsIGZ1bmN0aW9uKGVsZW0pe1xuICAgICAgICAgICAgYXR0YWNoUmVzaXplRXZlbnQoZWxlbSwgY2FsbGJhY2spO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmRldGFjaCA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICAvLyBjbGVhbiB1cCB0aGUgdW5maW5pc2hlZCBhbmltYXRpb24gZnJhbWUgdG8gcHJldmVudCBhIHBvdGVudGlhbCBlbmRsZXNzIHJlcXVlc3RBbmltYXRpb25GcmFtZSBvZiByZXNldFxuICAgICAgICAgICAgaWYgKCFsYXN0QW5pbWF0aW9uRnJhbWVGb3JJbnZpc2libGVDaGVjaykge1xuICAgICAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGxhc3RBbmltYXRpb25GcmFtZUZvckludmlzaWJsZUNoZWNrKTtcbiAgICAgICAgICAgICAgICBsYXN0QW5pbWF0aW9uRnJhbWVGb3JJbnZpc2libGVDaGVjayA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBSZXNpemVTZW5zb3IuZGV0YWNoKGVsZW1lbnQsIGV2KTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBlbGVtZW50LnJlc2l6ZVNlbnNvci5yZXNldFNlbnNvcigpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBSZXNpemVTZW5zb3IucmVzZXQgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIGZvckVhY2hFbGVtZW50KGVsZW1lbnQsIGZ1bmN0aW9uKGVsZW0pe1xuICAgICAgICAgICAgZWxlbS5yZXNpemVTZW5zb3IucmVzZXRTZW5zb3IoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIFJlc2l6ZVNlbnNvci5kZXRhY2ggPSBmdW5jdGlvbihlbGVtZW50LCBldikge1xuICAgICAgICBmb3JFYWNoRWxlbWVudChlbGVtZW50LCBmdW5jdGlvbihlbGVtKXtcbiAgICAgICAgICAgIGlmICghZWxlbSkgcmV0dXJuO1xuICAgICAgICAgICAgaWYoZWxlbS5yZXNpemVkQXR0YWNoZWQgJiYgdHlwZW9mIGV2ID09PSBcImZ1bmN0aW9uXCIpe1xuICAgICAgICAgICAgICAgIGVsZW0ucmVzaXplZEF0dGFjaGVkLnJlbW92ZShldik7XG4gICAgICAgICAgICAgICAgaWYoZWxlbS5yZXNpemVkQXR0YWNoZWQubGVuZ3RoKCkpIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbGVtLnJlc2l6ZVNlbnNvcikge1xuICAgICAgICAgICAgICAgIGlmIChlbGVtLmNvbnRhaW5zKGVsZW0ucmVzaXplU2Vuc29yKSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLnJlbW92ZUNoaWxkKGVsZW0ucmVzaXplU2Vuc29yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVsZXRlIGVsZW0ucmVzaXplU2Vuc29yO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBlbGVtLnJlc2l6ZWRBdHRhY2hlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGlmICh0eXBlb2YgTXV0YXRpb25PYnNlcnZlciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAobXV0YXRpb25zKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpIGluIG11dGF0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmIChtdXRhdGlvbnMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gbXV0YXRpb25zW2ldLmFkZGVkTm9kZXM7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaXRlbXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtc1tqXS5yZXNpemVTZW5zb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZXNpemVTZW5zb3IucmVzZXQoaXRlbXNbal0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwge1xuICAgICAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzdWJ0cmVlOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBSZXNpemVTZW5zb3I7XG5cbn0pKTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvKipcbiAqIERlZmF1bHQgcGFja2VyIHVzZWQgdG8gcG9zaXRpb24gZWFjaCBicmljayBhcyBjbG9zZSB0byB0aGUgdG9wIGFzIHBvc3NpYmxlXG4gKi9cbnZhciBNYXNvbkRlZmF1bHRQYWNrZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWFzb25EZWZhdWx0UGFja2VyKCkge1xuICAgIH1cbiAgICBNYXNvbkRlZmF1bHRQYWNrZXIucHJvdG90eXBlLmZpbmRCZXN0Q29sdW1uID0gZnVuY3Rpb24gKHJlcXVpcmVkQ29sdW1ucywgZWxlbWVudCwgZWxlbWVudEluZGV4LCBjb2x1bW5Cb3R0b21zLCB0aHJlc2hvbGQpIHtcbiAgICAgICAgLy8gd2UgbmVlZCB0byBsb29rIGF0IGFsbCB0aGUgY29sdW1ucyBhbmQgZmluZCB0aGUgd2hpY2ggb25lc1xuICAgICAgICAvLyB0aGlzIHdvdWxkIHNob3VsZCBzcGFuIGJhc2VkIG9uIHByZXNlbnRpbmcgaXQgYXMgY2xvc2UgdG8gdGhlXG4gICAgICAgIC8vIHRvcCBhcyBwb3NzaWJsZS5cbiAgICAgICAgdmFyIGNvbHVtbnMgPSBjb2x1bW5Cb3R0b21zLmxlbmd0aDtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGNvbHVtbkJvdHRvbXMucmVkdWNlKGZ1bmN0aW9uIChhY2N1bXVsYXRvciwgY29sdW1uLCBpZHgsIGFsbCkge1xuICAgICAgICAgICAgLy8gc3RhcnRpbmcgYXQgY29sdW1uIFgsIGlmIHdlIHB1dCBpdCBoZXJlLCB3aGF0IHdvdWxkIGJlXG4gICAgICAgICAgICAvLyBpdHMgc3RhcnRpbmcgcG9pbnRcbiAgICAgICAgICAgIGlmIChpZHggKyByZXF1aXJlZENvbHVtbnMgPiBjb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0b3IucHVzaCgtMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBoZWlnaHQgYXQgd2hpY2ggaXQgd291bGQgaGF2ZSB0byBiZSBwb3NpdGlvbmVkXG4gICAgICAgICAgICAgICAgLy8gaW4gb3JkZXIgdG8gbm90IG92ZXJsYXAgc29tZXRoaW5nXG4gICAgICAgICAgICAgICAgdmFyIHlQb3MgPSAtMTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gaWR4OyBpIDwgcmVxdWlyZWRDb2x1bW5zICsgaWR4OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgeVBvcyA9IE1hdGgubWF4KHlQb3MsIGFsbFtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFjY3VtdWxhdG9yLnB1c2goeVBvcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBbXSk7XG4gICAgICAgIC8vIG5vdyB0aGUgd2UgaGF2ZSB0aGUgeSBjb29yZCB0aGF0IGl0IHdvdWxkIG5lZWQgdG8gYmUgYXQgZm9yIGVhY2ggc3RhcnRpbmcgY29sdW1uXG4gICAgICAgIC8vIHdlIGp1c3QgbmVlZCB0byBmaWd1cmUgb3V0IHdoaWNoIG9uZSBpcyBsb3dlc3QgKHdoaWxlIHRha2luZyBpbnRvIGFjY291bnQgdGhlIHRocmVzaG9sZClcbiAgICAgICAgLy8gYW5kIHdlJ3JlIGRvbmVcbiAgICAgICAgdmFyIGJlc3RGaXQgPSByZXN1bHQucmVkdWNlKGZ1bmN0aW9uIChiZXN0LCBjdXJyLCBpZHgpIHtcbiAgICAgICAgICAgIGlmICghYmVzdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHhDb2x1bW5zOiBpZHgsIHlVbml0czogY3VyciB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnIgPCAoYmVzdC55VW5pdHMgLSB0aHJlc2hvbGQpICYmIGN1cnIgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHhDb2x1bW5zOiBpZHgsIHlVbml0czogY3VyciB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJlc3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBudWxsKTtcbiAgICAgICAgYmVzdEZpdC5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgcmV0dXJuIGJlc3RGaXQ7XG4gICAgfTtcbiAgICByZXR1cm4gTWFzb25EZWZhdWx0UGFja2VyO1xufSgpKTtcbmV4cG9ydCB7IE1hc29uRGVmYXVsdFBhY2tlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFzb24tZGVmYXVsdC1wYWNrZXIuanMubWFwIiwiaW1wb3J0IHsgTWFzb25EZWZhdWx0UGFja2VyIH0gZnJvbSBcIi4vbWFzb24tZGVmYXVsdC1wYWNrZXJcIjtcbnZhciBNYXNvbk9wdGlvbnMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWFzb25PcHRpb25zKCkge1xuICAgICAgICB0aGlzLmNvbHVtbnMgPSAxMjtcbiAgICAgICAgdGhpcy50aHJlc2hvbGQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gTWFzb25PcHRpb25zO1xufSgpKTtcbmV4cG9ydCB7IE1hc29uT3B0aW9ucyB9O1xudmFyIE1hc29uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1hc29uKHJlbmRlcmVyT3JPcHRpb25zLCBjb250YWluZXJXaWR0aCwgY29sdW1ucywgdGhyZXNob2xkKSB7XG4gICAgICAgIGlmIChjb2x1bW5zID09PSB2b2lkIDApIHsgY29sdW1ucyA9IDEyOyB9XG4gICAgICAgIGlmICh0aHJlc2hvbGQgPT09IHZvaWQgMCkgeyB0aHJlc2hvbGQgPSAwOyB9XG4gICAgICAgIHRoaXMuY29sdW1ucyA9IDEyO1xuICAgICAgICAvLyBUaGlzIGlzIHRoZSB3aWdnbGUgcm9vbSBNYXNvbiBoYXMgd2hlbiBjaG9vc2luZyBhIGNvbHVtbiBmb3IgYSBicmlja1xuICAgICAgICAvLyBXaGVuIHN0YXJ0aW5nIG9uIHRoZSBsZWZ0LCBNYXNvbiB3aWxsIG9ubHkgY29uc2lkZXIgYSBjb2x1bW4gY2hvb3NlIGFzIGEgYmV0dGVyIGZpdFxuICAgICAgICAvLyBpZiBpdCBpcyBiZXR0ZXIgYnkgdGhpcyBhbW91bnQgb3IgbW9yZS4gVGhpcyBwcmV2ZW50cyBicmlja3MgZnJvbSBiZWluZyBwbGFjZWQgdG8gdGhlXG4gICAgICAgIHRoaXMudGhyZXNob2xkID0gNDA7XG4gICAgICAgIHRoaXMuY29sdW1uQm90dG9tcyA9IFtdO1xuICAgICAgICBpZiAocmVuZGVyZXJPck9wdGlvbnNbXCJyZW5kZXJlclwiXSkge1xuICAgICAgICAgICAgdmFyIG9wdHMgPSByZW5kZXJlck9yT3B0aW9ucztcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSBvcHRzLnJlbmRlcmVyO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJXaWR0aCA9IG9wdHMuY29udGFpbmVyV2lkdGg7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSBvcHRzLmNvbHVtbnM7XG4gICAgICAgICAgICB0aGlzLnRocmVzaG9sZCA9IG9wdHMudGhyZXNob2xkO1xuICAgICAgICAgICAgdGhpcy5wYWNrZXIgPSBvcHRzLnBhY2tlciB8fCBuZXcgTWFzb25EZWZhdWx0UGFja2VyKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXJPck9wdGlvbnM7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lcldpZHRoID0gY29udGFpbmVyV2lkdGg7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSBjb2x1bW5zO1xuICAgICAgICAgICAgdGhpcy50aHJlc2hvbGQgPSB0aHJlc2hvbGQ7XG4gICAgICAgICAgICB0aGlzLnBhY2tlciA9IG5ldyBNYXNvbkRlZmF1bHRQYWNrZXIoKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodGhpcy5jb2x1bW5Cb3R0b21zLmxlbmd0aCA8IHRoaXMuY29sdW1ucykge1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5Cb3R0b21zLnB1c2goMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRDb2x1bW5zKGNvbHVtbnMpO1xuICAgIH1cbiAgICBNYXNvbi5wcm90b3R5cGUuZmluZEJlc3RDb2x1bW4gPSBmdW5jdGlvbiAocmVxdWlyZWRDb2x1bW5zLCBlbGVtZW50LCBlbGVtZW50SW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFja2VyLmZpbmRCZXN0Q29sdW1uKHJlcXVpcmVkQ29sdW1ucywgZWxlbWVudCwgZWxlbWVudEluZGV4LCB0aGlzLmNvbHVtbkJvdHRvbXMsIHRoaXMudGhyZXNob2xkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRha2VzIGEgbGlzdCBvZiBlbGVtZW50cyBhbmQgcmV0dXJucyB0aGUgbmV3IGNvb3JkcyBmb3IgZWFjaCBvbmUuIFRoaXMgZG9lcyBub3QgcmVwb3NpdGlvbiBhbnl0aGluZy5cbiAgICAgKiBZb3UgbWlnaHQgdXNlIHRoaXMgaWYgeW91IHdhbnQgdG8gaGFuZGxlIGhvdyBhbmQgd2hlbiB0aGluZ3MgZ2V0IHJlcG9zaXRpb25lZC5cbiAgICAgKlxuICAgICAqIFNlZSBsYXlvdXQoKSBpZiB5b3Ugd2FudCBldmVyeXRoaW5nIHBvc2l0aW9uIGF1dG9tYXRpY2FsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxlbWVudHNcbiAgICAgKiBAcmV0dXJucyB7Y29vcmRzOiBNYXNvbkNvb3JkW10sIHRvdGFsSGVpZ2h0OiBudW1iZXJ9XG4gICAgICovXG4gICAgTWFzb24ucHJvdG90eXBlLmZpdCA9IGZ1bmN0aW9uIChlbGVtZW50cykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY29vcmRzTGlzdCA9IFtdO1xuICAgICAgICB2YXIgdG90YWxIZWlnaHQgPSAwO1xuICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpZHgpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50V2lkdGggPSBfdGhpcy5yZW5kZXJlci5nZXRFbGVtZW50V2lkdGgoZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudEhlaWdodCA9IF90aGlzLnJlbmRlcmVyLmdldEVsZW1lbnRIZWlnaHQoZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgY29scyA9IE1hdGgucm91bmQoZWxlbWVudFdpZHRoIC8gX3RoaXMuY29udGFpbmVyV2lkdGggKiBfdGhpcy5jb2x1bW5zKTtcbiAgICAgICAgICAgIC8vIGNhbid0IGJlIGJpZ2dlciB0aGFuICdhbGwnIGNvbHVtbnNcbiAgICAgICAgICAgIGlmIChjb2xzID4gX3RoaXMuY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGNvbHMgPSBfdGhpcy5jb2x1bW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGJlc3RGaXQgPSBfdGhpcy5maW5kQmVzdENvbHVtbihjb2xzLCBlbGVtZW50LCBpZHgpO1xuICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBjb2x1bW4gYm90dG9tcyBmb3IgYWxsIHRoZSBjb2x1bW5zIHRoaXMgdGlsZSBjcm9zc2VzIHdoZW4gcG9zaXRpb25lZCBhdCB0aGUgYmVzdFxuICAgICAgICAgICAgLy8gbG9jYXRpb25cbiAgICAgICAgICAgIHZhciBzdGFydENvbCA9IGJlc3RGaXQueENvbHVtbnM7XG4gICAgICAgICAgICB2YXIgZW5kQ29sID0gc3RhcnRDb2wgKyBjb2xzO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0Q29sOyBpIDwgZW5kQ29sOyBpKyspIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jb2x1bW5Cb3R0b21zW2ldID0gYmVzdEZpdC55VW5pdHMgKyBlbGVtZW50SGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdGhpcyBpcyBhIHR1cGxlIHdoZXJlIHggaXMgdGhlIGNvbHVtbiBpbmRleCBhbmQgeVBvcyBpcyB0aGUgcGl4ZWwgY29vcmQgdG8gcG9zaXRpb24gYXQuXG4gICAgICAgICAgICBjb29yZHNMaXN0LnB1c2goYmVzdEZpdCk7XG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIHRvdGFsIGhlaWdodFxuICAgICAgICAgICAgdG90YWxIZWlnaHQgPSBNYXRoLm1heCh0b3RhbEhlaWdodCwgZWxlbWVudEhlaWdodCArIGJlc3RGaXQueVVuaXRzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIHJldHVybiB0aGUgbGlzdCBvZiBjb29yZGluYXRlcyBmb3IgZWFjaCB0aWxlXG4gICAgICAgIHJldHVybiB7IGNvb3JkczogY29vcmRzTGlzdCwgdG90YWxIZWlnaHQ6IHRvdGFsSGVpZ2h0IH07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGlzIHdpbGwgdGFrZSB0aGUgbGlzdCBvZiBlbGVtZW50cywgZmluZCB0aGVpciBuZXcgbG9jYXRpb25zIGFuZCB0aGVuIHVzZSB0aGUgTWFzb25SZW5kZXJlclxuICAgICAqIHRvIHJlcG9zaXRpb24gYWxsIHRoZSBicmlja3MgaW50byB0aGVpciBuZXcgaG9tZS5cbiAgICAgKiBAcGFyYW0gZWxlbWVudHNcbiAgICAgKiBAcmV0dXJucyB0aGUgaGVpZ2h0IHRoYXQgdGhlIGNvbnRhaW5lciBtdXN0IG5vdyBiZSB0byBob2xkIHRoZSBpdGVtcy5cbiAgICAgKi9cbiAgICBNYXNvbi5wcm90b3R5cGUubGF5b3V0ID0gZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBsYXlvdXRSZXN1bHQgPSB0aGlzLmZpdChlbGVtZW50cyk7XG4gICAgICAgIGxheW91dFJlc3VsdC5jb29yZHMuZm9yRWFjaChmdW5jdGlvbiAoY29vcmQpIHtcbiAgICAgICAgICAgIC8vIGFwcGx5IHRoZSBjYWxjdWxhdGVkIHBvc2l0aW9uIGZvciBlYWNoIGJyaWNrIGhvd2V2ZXIgeW91IHdhbnQuIEluIHRoaXMgY2FzZVxuICAgICAgICAgICAgLy8gd2UgYXJlIGp1c3Qgc2V0dGluZyB0aGUgQ1NTIHBvc2l0aW9uLiBBbmltYXRpb24gd2lsbCBiZSBwcm92aWRlZCB2aWEgQ1NTXG4gICAgICAgICAgICBfdGhpcy5yZW5kZXJlci5zZXRQb3NpdGlvbihjb29yZC5lbGVtZW50LCBjb29yZC54Q29sdW1ucywgY29vcmQueVVuaXRzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBsYXlvdXRSZXN1bHQudG90YWxIZWlnaHQ7XG4gICAgfTtcbiAgICByZXR1cm4gTWFzb247XG59KCkpO1xuZXhwb3J0IHsgTWFzb24gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hc29uLmpzLm1hcCIsIi8qKlxuICogQ3JlYXRlZCBieSBtY2tlb3dyIG9uIDIvMy8xNy5cbiAqL1xudmFyIE1hc29uRG9tUmVuZGVyZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWFzb25Eb21SZW5kZXJlcigpIHtcbiAgICB9XG4gICAgTWFzb25Eb21SZW5kZXJlci5wcm90b3R5cGUuc2V0Q29sdW1ucyA9IGZ1bmN0aW9uIChjb2x1bW5zKSB7XG4gICAgICAgIHRoaXMuY29sdW1ucyA9IGNvbHVtbnM7XG4gICAgfTtcbiAgICBNYXNvbkRvbVJlbmRlcmVyLnByb3RvdHlwZS5nZXRFbGVtZW50V2lkdGggPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gZWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICB9O1xuICAgIE1hc29uRG9tUmVuZGVyZXIucHJvdG90eXBlLmdldEVsZW1lbnRIZWlnaHQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgfTtcbiAgICBNYXNvbkRvbVJlbmRlcmVyLnByb3RvdHlwZS5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChlbGVtZW50LCBsZWZ0SW5Db2xzLCB0b3BJblVuaXRzKSB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9ICgobGVmdEluQ29scyAvIHRoaXMuY29sdW1ucykgKiAxMDApICsgJyUnO1xuICAgICAgICBlbGVtZW50LnN0eWxlLnRvcCA9IHRvcEluVW5pdHMgKyAncHgnO1xuICAgIH07XG4gICAgcmV0dXJuIE1hc29uRG9tUmVuZGVyZXI7XG59KCkpO1xuZXhwb3J0IHsgTWFzb25Eb21SZW5kZXJlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFzb24tZG9tLXJlbmRlcmVyLmpzLm1hcCIsIi8qKlxuICogU2ltcGxlIHBhY2tlciB0aGF0IHBvc2l0aW9ucyBlYWNoIGJyaWNrIGluIHRoZSBuZXh0IGNvbHVtbi4gVGhpcyB3aWxsXG4gKiBmYWlsIHNwZWN0YWN1bGFybHkgd2l0aCBjb2x1bW5zIG9mIGRpZmZlcmVudCB3aWR0aHMuXG4gKi9cbnZhciBNYXNvblNpbXBsZVBhY2tlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNYXNvblNpbXBsZVBhY2tlcigpIHtcbiAgICB9XG4gICAgTWFzb25TaW1wbGVQYWNrZXIucHJvdG90eXBlLmZpbmRCZXN0Q29sdW1uID0gZnVuY3Rpb24gKHJlcXVpcmVkQ29sdW1ucywgZWxlbWVudCwgZWxlbWVudEluZGV4LCBjb2x1bW5Cb3R0b21zLCB0aHJlc2hvbGQpIHtcbiAgICAgICAgLy8gVGhpcyBwYWNrZXIgc2ltcGx5IGZpZ3VyZXMgb3V0IHdoaWNoIGNvbHVtbiBpdCBzaG91bGRcbiAgICAgICAgLy8gZ28gaW4gYmFzZWQgb24gdGhlIGVsZW1lbnQgaW5kZXggYW5kIGFzc3VtZXMgdGhhdCBhbGxcbiAgICAgICAgLy8gZWxlbWVudHMgYXJlIHJlcXVpcmUgdGhlIHNhbWUgbnVtYmVyIG9mIGNvbHVtbnNcbiAgICAgICAgdmFyIGNvbHVtbnMgPSBjb2x1bW5Cb3R0b21zLmxlbmd0aDtcbiAgICAgICAgdmFyIG5leHRDb2x1bW4gPSAocmVxdWlyZWRDb2x1bW5zICogZWxlbWVudEluZGV4KSAlIGNvbHVtbnM7XG4gICAgICAgIHJldHVybiB7IHhDb2x1bW5zOiBuZXh0Q29sdW1uLCB5VW5pdHM6IGNvbHVtbkJvdHRvbXNbbmV4dENvbHVtbl0sIGVsZW1lbnQ6IGVsZW1lbnQgfTtcbiAgICB9O1xuICAgIHJldHVybiBNYXNvblNpbXBsZVBhY2tlcjtcbn0oKSk7XG5leHBvcnQgeyBNYXNvblNpbXBsZVBhY2tlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFzb24tc2ltcGxlLXBhY2tlci5qcy5tYXAiLCIvKipcbiAqIENyZWF0ZWQgYnkgbWNrZW93ciBvbiAyLzIvMTcuXG4gKi9cbmltcG9ydCB7TWFzb24sIE1hc29uRG9tUmVuZGVyZXIsIE1hc29uU2ltcGxlUGFja2VyLCBNYXNvbkRlZmF1bHRQYWNrZXJ9IGZyb20gJy4uL2xpYic7XG5pbXBvcnQge1Jlc2l6ZVNlbnNvcn0gZnJvbSAnY3NzLWVsZW1lbnQtcXVlcmllcyc7XG5cbnZhciB1c2VTaW1wbGVQYWNrZXIgPSBmYWxzZTtcbmZ1bmN0aW9uIHBhY2soKSB7XG5cbiAgICAgICAgLy8gZmluZCBvdXIgY29udGFpbmVyXG4gICAgICAgIGNvbnN0IGRhc2hib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYXNvbi1jb250YWluZXInKTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyV2lkdGggPSBkYXNoYm9hcmQub2Zmc2V0V2lkdGg7XG4gICAgICAgIC8vIGZpbmQgYWxsIHRoZSBicmlja3MgaW4gaXRcbiAgICAgICAgLy8gbm90IGFsbCBicm93c2VycyBhcmUgYWJsZSB0byB0cmVhdCB0aGUgcmVzdWx0cyBmcm9tIHF1ZXJ5U2VsZWN0b3JBbGwgd2l0aCBhcnJheSBtZXRob2RzIGxpa2UgZm9yRWFjaCgpXG4gICAgICAgIC8vIHNvIHRoaXMgd2lsbCBtYWtlIHRoZW4gYW4gYXJyYXlcbiAgICAgICAgY29uc3QgaXRlbXMgPSBbXS5zbGljZS5jYWxsKGRhc2hib2FyZC5xdWVyeVNlbGVjdG9yQWxsKCdkaXYubWFzb24tYnJpY2snKSk7XG5cbiAgICAgICAgLy8gY3JlYXRlIGEgTWFzb24gYW5kIHVzZSBpdCB0byBmaXQgdGhlIGJyaWNrcyBpbnRvIGEgY29udGFpbmVyXG4gICAgICAgIC8vIHRoZSBzaXplIG9mIHRoZSAnZGFzaGJvYXJkJ1xuICAgICAgICAvLyBzaW5jZSB3ZSBhcmUgZGVhbGluZyB3aXRoIGRvbSBub2Rlcywgd2UgbmVlZCB0aGUgTWFzb25Eb21SZW5kZXJlclxuICAgICAgICBjb25zdCByZW5kZXJlciA9IG5ldyBNYXNvbkRvbVJlbmRlcmVyKCk7XG5cbiAgICAgICAgY29uc3Qgb3B0cyA9IHsgLy8gTWFzb25PcHRpb25zIG9iamVjdCBoZXJlXG4gICAgICAgICAgICBjb250YWluZXJXaWR0aDogY29udGFpbmVyV2lkdGgsXG4gICAgICAgICAgICByZW5kZXJlcjogcmVuZGVyZXIsXG4gICAgICAgICAgICAvLyB0aGlzIHRocmVzaG9sZCBzaWduaWZpZXMgdGhhdCBldmVuIGlmIGEgY29sdW1uIHRvIHRoZSByaWdodFxuICAgICAgICAgICAgLy8gd291bGQgcG9zdGlvbiB0aGUgdGlsZSBjbG9zZXIgdG8gdGhlIHRvcCwgaXQgd2lsbCBwcmVmZXJcbiAgICAgICAgICAgIC8vIGEgY29sdW1uIHRvIHRoZSBsZWZ0IGlmIHRoZSBkaWZmZXJlbmNlIGlzIGxlc3MgdGhhbiB0aGlzXG4gICAgICAgICAgICAvLyBtYW55IHBpeGVscy4gTWFrZSB0aGlzIDAgYW5kIGNoZWNrIHRoZSBkZW1vIGFuZCB5b3Ugd2lsbFxuICAgICAgICAgICAgLy8gc2VlIHRoZSBkaWZmZXJlbmNlIGluIHBvc2l0aW9uIG9mIGJyaWNrcyA1IGFuZCA2IGFmdGVyIHRoZVxuICAgICAgICAgICAgLy8gc2hvdyBtb3JlIGJ1dHRvbiBpcyBjbGlja2VkIGluIGJyaWNrIDFcbiAgICAgICAgICAgIHRocmVzaG9sZDogNDAsXG4gICAgICAgICAgICBjb2x1bW5zOiAxMixcbiAgICAgICAgICAgIC8vIGltcGxlbWVudCB5b3VyIG93biBwYWNraW5nIGxvZ2ljXG4gICAgICAgICAgICAvLyBmb3JtIGV4YW1wbGUsIGltcG9ydCBNYXNvblNpbXBsZVBhY2tlciBhbmQgdHJ5IHRoYXRcbiAgICAgICAgICAgIHBhY2tlcjogdXNlU2ltcGxlUGFja2VyID8gbmV3IE1hc29uU2ltcGxlUGFja2VyKCkgOiBuZXcgTWFzb25EZWZhdWx0UGFja2VyKClcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBjb250YWluZXJIZWlnaHQgPSBuZXcgTWFzb24ob3B0cykubGF5b3V0KGl0ZW1zKTtcbiAgICAgICAgZGFzaGJvYXJkLnN0eWxlLm1pbkhlaWdodCA9IGNvbnRhaW5lckhlaWdodCArICdweCc7XG5cbn1cblxuZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgLy8gaW5pdGlhbGl6ZSB0aGUgbGF5b3V0XG4gICAgcGFjaygpO1xuXG4gICAgLy8gaW4gb3VyIGNhc2UsIHdlIHdhbnQgdG8gcmUgbGF5b3V0IHRoZSBicmlja3Mgd2hlbiBhbnkgb2YgdGhlaXIgc2l6ZXMgY2hhbmdlLlxuICAgIC8vIGlmIHRoZSBicmlja3Mgc2l6ZXMgY2FuIG9ubHkgY2hhbmdlIHdoZW4gdGhlIHdpbmRvdyBpcyByZXNpemVkLCB5b3UgY291bGQgdXNlIHRoZVxuICAgIC8vIHdpbmRvdyByZXNpemUgZXZlbnQuIEhvd2V2ZXIsIGlmIHRoZSBicmlja3MgY2FuIHJlc2l6ZSB0aGVtc2VsdmVzLCB5b3Ugd291bGQgd2FudCB0byBkbyBzb21ldGhpbmdcbiAgICAvLyBsaWtlIHRoaXNcbiAgICAvLyBSZXNpemVTZW5zb3IgaXMgZnJvbSBjc3MtZWxlbWVudC1xdWVyaWVzICh3aGljaCBpcyBsaXN0ZWQgYXMgYW4gb3B0aW9uYWwgZGVwZW5kZW5jeSk7XG4gICAgbmV3IFJlc2l6ZVNlbnNvcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFzb24tY29udGFpbmVyJykucXVlcnlTZWxlY3RvckFsbCgnZGl2Lm1hc29uLWJyaWNrJyksIGZ1bmN0aW9uKCkge1xuICAgICAgICBwYWNrKCk7XG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kYWJsZUV4YW1wbGUnKS5xdWVyeVNlbGVjdG9yKCdidXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgIHNob3dNb3JlKCk7XG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlU2ltcGxlJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdG9nZ2xlUGFja2VyKTtcbn1cblxuZnVuY3Rpb24gcmVzZXRIZWlnaHQoKSB7XG4gICAgdmFyIGZpcnN0VGlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBhbmRhYmxlRXhhbXBsZScpO1xuICAgIGZpcnN0VGlsZS5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgZmlyc3RUaWxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCByZXNldEhlaWdodCk7XG59XG5cbmZ1bmN0aW9uIHNob3dNb3JlKCkge1xuICBjb25zdCBmaXJzdFRpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kYWJsZUV4YW1wbGUnKTtcblxuICAgIGlmIChmaXJzdFRpbGUuc3R5bGUuaGVpZ2h0ICE9PSAnNDAwcHgnKSB7XG4gICAgICBjb25zdCBhdXRvSGVpZ2h0ID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZmlyc3RUaWxlLCBudWxsKS5oZWlnaHQ7XG4gICAgICAgIGZpcnN0VGlsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtYXV0by1oZWlnaHQnLCBhdXRvSGVpZ2h0KTtcbiAgICAgICAgZmlyc3RUaWxlLnN0eWxlLmhlaWdodCA9IGF1dG9IZWlnaHQ7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBmaXJzdFRpbGUuc3R5bGUuaGVpZ2h0ID0gJzQwMHB4JztcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRhcmdldEhlaWdodCA9IGZpcnN0VGlsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXV0by1oZWlnaHQnKTtcbiAgICAgICAgZmlyc3RUaWxlLnN0eWxlLmhlaWdodCA9IHRhcmdldEhlaWdodDtcbiAgICAgICAgZmlyc3RUaWxlLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCByZXNldEhlaWdodCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB0b2dnbGVQYWNrZXIoZXZ0KSB7XG4gICAgdXNlU2ltcGxlUGFja2VyID0gZXZ0LnRhcmdldC5jaGVja2VkO1xuICAgIHBhY2soKTtcbn1cblxuc3RhcnQoKTsiXSwic291cmNlUm9vdCI6IiJ9