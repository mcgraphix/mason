(()=>{var e={843:(e,t,n)=>{e.exports={ResizeSensor:n(87),ElementQueries:n(456)}},456:function(e,t,n){"use strict";var i,o,r;"undefined"!=typeof window&&window,o=[n(87)],void 0===(r="function"==typeof(i=function(e){var t=function(){var t,n={},i=[];function o(e){e||(e=document.documentElement);var t=window.getComputedStyle(e,null).fontSize;return parseFloat(t)||16}function r(e,t){var n=t.split(/\d/),i=n[n.length-1];switch(t=parseFloat(t),i){case"px":default:return t;case"em":return t*o(e);case"rem":return t*o();case"vw":return t*document.documentElement.clientWidth/100;case"vh":return t*document.documentElement.clientHeight/100;case"vmin":case"vmax":var r=document.documentElement.clientWidth/100,s=document.documentElement.clientHeight/100;return t*(0,Math["vmin"===i?"min":"max"])(r,s)}}function s(e,t){var i,o,s,a,u,l,d,c;this.element=e;var h=["min-width","min-height","max-width","max-height"];this.call=function(){for(i in s=function(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}(this.element),l={},n[t])n[t].hasOwnProperty(i)&&(o=n[t][i],a=r(this.element,o.value),u="width"===o.property?s.width:s.height,c=o.mode+"-"+o.property,d="","min"===o.mode&&u>=a&&(d+=o.value),"max"===o.mode&&u<=a&&(d+=o.value),l[c]||(l[c]=""),d&&-1===(" "+l[c]+" ").indexOf(" "+d+" ")&&(l[c]+=" "+d));for(var e in h)h.hasOwnProperty(e)&&(l[h[e]]?this.element.setAttribute(h[e],l[h[e]].substr(1)):this.element.removeAttribute(h[e]))}}function a(t,n){t.elementQueriesSetupInformation||(t.elementQueriesSetupInformation=new s(t,n)),t.elementQueriesSensor||(t.elementQueriesSensor=new e(t,(function(){t.elementQueriesSetupInformation.call()})))}function u(e,o,r,s){if(void 0===n[e]){n[e]=[];var a=i.length;t.innerHTML+="\n"+e+" {animation: 0.1s element-queries;}",t.innerHTML+="\n"+e+" > .resize-sensor {min-width: "+a+"px;}",i.push(e)}n[e].push({mode:o,property:r,value:s})}function l(e){var t;if(document.querySelectorAll&&(t=e?e.querySelectorAll.bind(e):document.querySelectorAll.bind(document)),t||"undefined"==typeof $$||(t=$$),t||"undefined"==typeof jQuery||(t=jQuery),!t)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return t}function d(t){var n=[],i=[],o=[],r=0,s=-1,a=[];for(var u in t.children)if(t.children.hasOwnProperty(u)&&t.children[u].tagName&&"img"===t.children[u].tagName.toLowerCase()){n.push(t.children[u]);var l=t.children[u].getAttribute("min-width")||t.children[u].getAttribute("data-min-width"),d=t.children[u].getAttribute("data-src")||t.children[u].getAttribute("url");o.push(d);var c={minWidth:l};i.push(c),l?t.children[u].style.display="none":(r=n.length-1,t.children[u].style.display="block")}function h(){var e,u=!1;for(e in n)n.hasOwnProperty(e)&&i[e].minWidth&&t.offsetWidth>i[e].minWidth&&(u=e);if(u||(u=r),s!==u)if(a[u])n[s].style.display="none",n[u].style.display="block",s=u;else{var l=new Image;l.onload=function(){n[u].src=o[u],n[s].style.display="none",n[u].style.display="block",a[u]=!0,s=u},l.src=o[u]}else n[u].src=o[u]}s=r,t.resizeSensorInstance=new e(t,h),h()}var c=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,h=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function m(e){var t,n,i,o;for(e=e.replace(/'/g,'"');null!==(t=c.exec(e));)for(n=t[1]+t[3],i=t[2];null!==(o=h.exec(i));)u(n,o[1],o[2],o[3])}function f(e){var t="";if(e)if("string"==typeof e)-1===(e=e.toLowerCase()).indexOf("min-width")&&-1===e.indexOf("max-width")||m(e);else for(var n=0,i=e.length;n<i;n++)1===e[n].type?-1!==(t=e[n].selectorText||e[n].cssText).indexOf("min-height")||-1!==t.indexOf("max-height")?m(t):-1===t.indexOf("min-width")&&-1===t.indexOf("max-width")||m(t):4===e[n].type?f(e[n].cssRules||e[n].rules):3===e[n].type&&e[n].styleSheet.hasOwnProperty("cssRules")&&f(e[n].styleSheet.cssRules)}var p=!1;this.init=function(){var n="animationstart";void 0!==document.documentElement.style.webkitAnimationName?n="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?n="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(n="oanimationstart"),document.body.addEventListener(n,(function(t){var n=t.target,o=n&&window.getComputedStyle(n,null),r=o&&o.getPropertyValue("animation-name");if(r&&-1!==r.indexOf("element-queries")){n.elementQueriesSensor=new e(n,(function(){n.elementQueriesSetupInformation&&n.elementQueriesSetupInformation.call()}));var s=window.getComputedStyle(n.resizeSensor,null).getPropertyValue("min-width");s=parseInt(s.replace("px","")),a(t.target,i[s])}})),p||((t=document.createElement("style")).type="text/css",t.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",t.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(t),p=!0);for(var o=0,r=document.styleSheets.length;o<r;o++)try{document.styleSheets[o].href&&0===document.styleSheets[o].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[o].href),f(document.styleSheets[o].cssRules||document.styleSheets[o].rules||document.styleSheets[o].cssText)}catch(e){}!function(){for(var e=l()("[data-responsive-image],[responsive-image]"),t=0,n=e.length;t<n;t++)d(e[t])}()},this.findElementQueriesElements=function(e){!function(e){var t=l(e);for(var i in n)if(n.hasOwnProperty(i))for(var o=t(i,e),r=0,s=o.length;r<s;r++)a(o[r],i)}(e)},this.update=function(){this.init()}};t.update=function(){t.instance.update()},t.detach=function(e){e.elementQueriesSetupInformation?(e.elementQueriesSensor.detach(),delete e.elementQueriesSetupInformation,delete e.elementQueriesSensor):e.resizeSensorInstance&&(e.resizeSensorInstance.detach(),delete e.resizeSensorInstance)},t.init=function(){t.instance||(t.instance=new t),t.instance.init()};return t.findElementQueriesElements=function(e){t.instance.findElementQueriesElements(e)},t.listen=function(){!function(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var t=setInterval((function(){/loaded|complete/i.test(document.readyState)&&(e(),clearInterval(t))}),10);else window.onload=e}(t.init)},t})?i.apply(t,o):i)||(e.exports=r)},87:function(e,t,n){"use strict";var i,o;"undefined"!=typeof window&&window,void 0===(o="function"==typeof(i=function(){if("undefined"==typeof window)return null;var e="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||function(t){return e.setTimeout(t,20)},n=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||function(t){e.clearTimeout(t)};function i(e,t){var n=Object.prototype.toString.call(e),i="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"[object Object]"===n||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements,o=0,r=e.length;if(i)for(;o<r;o++)t(e[o]);else t(e)}function o(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function r(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}var s=function(e,a){var u=0;function l(){var e,t,n=[];this.add=function(e){n.push(e)},this.call=function(i){for(e=0,t=n.length;e<t;e++)n[e].call(this,i)},this.remove=function(i){var o=[];for(e=0,t=n.length;e<t;e++)n[e]!==i&&o.push(n[e]);n=o},this.length=function(){return n.length}}function d(e,n){if(e)if(e.resizedAttached)e.resizedAttached.add(n);else{e.resizedAttached=new l,e.resizedAttached.add(n),e.resizeSensor=document.createElement("div"),e.resizeSensor.dir="ltr",e.resizeSensor.className="resize-sensor";var i={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},s={position:"absolute",left:"0px",top:"0px",transition:"0s"};r(e.resizeSensor,i);var a=document.createElement("div");a.className="resize-sensor-expand",r(a,i);var d=document.createElement("div");r(d,s),a.appendChild(d);var c=document.createElement("div");c.className="resize-sensor-shrink",r(c,i);var h=document.createElement("div");r(h,s),r(h,{width:"200%",height:"200%"}),c.appendChild(h),e.resizeSensor.appendChild(a),e.resizeSensor.appendChild(c),e.appendChild(e.resizeSensor);var m=window.getComputedStyle(e),f=m?m.getPropertyValue("position"):null;"absolute"!==f&&"relative"!==f&&"fixed"!==f&&"sticky"!==f&&(e.style.position="relative");var p=!1,v=0,y=o(e),g=0,w=0,S=!0;u=0;var x=function(){if(S){if(0===e.offsetWidth&&0===e.offsetHeight)return void(u||(u=t((function(){u=0,x()}))));S=!1}var n,i;n=e.offsetWidth,i=e.offsetHeight,d.style.width=n+10+"px",d.style.height=i+10+"px",a.scrollLeft=n+10,a.scrollTop=i+10,c.scrollLeft=n+10,c.scrollTop=i+10};e.resizeSensor.resetSensor=x;var E=function(){v=0,p&&(g=y.width,w=y.height,e.resizedAttached&&e.resizedAttached.call(y))},b=function(){y=o(e),(p=y.width!==g||y.height!==w)&&!v&&(v=t(E)),x()},z=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)};z(a,"scroll",b),z(c,"scroll",b),u=t((function(){u=0,x()}))}}i(e,(function(e){d(e,a)})),this.detach=function(t){u||(n(u),u=0),s.detach(e,t)},this.reset=function(){e.resizeSensor.resetSensor()}};if(s.reset=function(e){i(e,(function(e){e.resizeSensor.resetSensor()}))},s.detach=function(e,t){i(e,(function(e){e&&(e.resizedAttached&&"function"==typeof t&&(e.resizedAttached.remove(t),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached))}))},"undefined"!=typeof MutationObserver){var a=new MutationObserver((function(e){for(var t in e)if(e.hasOwnProperty(t))for(var n=e[t].addedNodes,i=0;i<n.length;i++)n[i].resizeSensor&&s.reset(n[i])}));document.addEventListener("DOMContentLoaded",(function(e){a.observe(document.body,{childList:!0,subtree:!0})}))}return s})?i.call(t,n,t,e):i)||(e.exports=o)}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}(()=>{"use strict";var e=function(){function e(){}return e.prototype.findBestColumn=function(e,t,n,i,o){var r=i.length,s=i.reduce((function(t,n,i,o){if(i+e>r)return t.push(-1),t;for(var s=-1,a=i;a<e+i;a++)s=Math.max(s,o[a]);return t.push(s),t}),[]).reduce((function(e,t,n){return e?t<e.yUnits-o&&-1!==t?{xColumns:n,yUnits:t}:e:{xColumns:n,yUnits:t}}),null);return s.element=t,s},e}(),t=function(){function t(t,n,i,o){if(void 0===i&&(i=12),void 0===o&&(o=0),this.columns=12,this.threshold=40,this.columnBottoms=[],t.renderer){var r=t;this.renderer=r.renderer,this.containerWidth=r.containerWidth,this.columns=r.columns,this.threshold=r.threshold,this.packer=r.packer||new e}else this.renderer=t,this.containerWidth=n,this.columns=i,this.threshold=o,this.packer=new e;for(;this.columnBottoms.length<this.columns;)this.columnBottoms.push(0);this.renderer.setColumns(i)}return t.prototype.findBestColumn=function(e,t,n){return this.packer.findBestColumn(e,t,n,this.columnBottoms,this.threshold)},t.prototype.fit=function(e){var t=this,n=[],i=0;return e.forEach((function(e,o){var r=t.renderer.getElementWidth(e),s=t.renderer.getElementHeight(e),a=Math.round(r/t.containerWidth*t.columns);a>t.columns&&(a=t.columns);for(var u=t.findBestColumn(a,e,o),l=u.xColumns,d=l+a,c=l;c<d;c++)t.columnBottoms[c]=u.yUnits+s;n.push(u),i=Math.max(i,s+u.yUnits)})),{coords:n,totalHeight:i}},t.prototype.layout=function(e){var t=this,n=this.fit(e);return n.coords.forEach((function(e){t.renderer.setPosition(e.element,e.xColumns,e.yUnits)})),n.totalHeight},t}(),i=function(){function e(){}return e.prototype.setColumns=function(e){this.columns=e},e.prototype.getElementWidth=function(e){return e.offsetWidth},e.prototype.getElementHeight=function(e){return e.offsetHeight},e.prototype.setPosition=function(e,t,n){e.style.insetInlineStart=t/this.columns*100+"%",e.style.top=n+"px"},e}(),o=function(){function e(){}return e.prototype.findBestColumn=function(e,t,n,i,o){var r=e*n%i.length;return{xColumns:r,yUnits:i[r],element:t}},e}(),r=n(843),s=!1;function a(){const n=document.querySelector(".mason-container"),r=n.offsetWidth,a=[].slice.call(n.querySelectorAll("div.mason-brick")),u={containerWidth:r,renderer:new i,threshold:40,columns:12,packer:s?new o:new e},l=new t(u).layout(a);n.style.minHeight=l+"px"}function u(){var e=document.getElementById("expandableExample");e.style.height="auto",e.removeEventListener("transitionend",u)}a(),new r.ResizeSensor(document.querySelector(".mason-container").querySelectorAll("div.mason-brick"),(function(){a()})),document.getElementById("expandableExample").querySelector("button").addEventListener("click",(function(){!function(){const e=document.getElementById("expandableExample");if("400px"!==e.style.height){const t=window.getComputedStyle(e,null).height;e.setAttribute("data-auto-height",t),e.style.height=t,setTimeout((function(){e.style.height="400px"}))}else{const t=e.getAttribute("data-auto-height");e.style.height=t,e.addEventListener("transitionend",u)}}()})),document.getElementById("useSimple").addEventListener("change",(function(e){s=e.target.checked,a()}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dEJJTixJQU9BLElBQUksRUFBQXRSLGFBQWFRLFNBQVNnUixjQUFjLG9CQUFvQnpOLGlCQUFpQixvQkFBb0IsV0FDN0Z1TixHQUNKLElBRUE5USxTQUFTc1IsZUFBZSxxQkFBcUJOLGNBQWMsVUFBVTFLLGlCQUFpQixTQUFTLFlBYW5HLFdBQ0UsTUFBTStLLEVBQVlyUixTQUFTc1IsZUFBZSxxQkFFeEMsR0FBK0IsVUFBM0JELEVBQVU1TSxNQUFNekMsT0FBb0IsQ0FDdEMsTUFBTXdQLEVBQWE5UixPQUFPUyxpQkFBaUJrUixFQUFXLE1BQU1yUCxPQUMxRHFQLEVBQVUzTyxhQUFhLG1CQUFvQjhPLEdBQzNDSCxFQUFVNU0sTUFBTXpDLE9BQVN3UCxFQUN6QjVJLFlBQVcsV0FDUHlJLEVBQVU1TSxNQUFNekMsT0FBUyxPQUM3QixHQUNKLEtBQU8sQ0FDTCxNQUFNeVAsRUFBZUosRUFBVS9NLGFBQWEsb0JBQzFDK00sRUFBVTVNLE1BQU16QyxPQUFTeVAsRUFDekJKLEVBQVUvSyxpQkFBaUIsZ0JBQWlCOEssRUFDaEQsQ0FDSixDQTNCT00sRUFDSCxJQUVBMVIsU0FBU3NSLGVBQWUsYUFBYWhMLGlCQUFpQixVQTBCMUQsU0FBc0JxTCxHQUNsQmQsRUFBa0JjLEVBQUluTCxPQUFPb0wsUUFDN0JkLEdBQ0osRyIsInNvdXJjZXMiOlsid2VicGFjazovL21hc29uLWpzLy4vbm9kZV9tb2R1bGVzL2Nzcy1lbGVtZW50LXF1ZXJpZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWFzb24tanMvLi9ub2RlX21vZHVsZXMvY3NzLWVsZW1lbnQtcXVlcmllcy9zcmMvRWxlbWVudFF1ZXJpZXMuanMiLCJ3ZWJwYWNrOi8vbWFzb24tanMvLi9ub2RlX21vZHVsZXMvY3NzLWVsZW1lbnQtcXVlcmllcy9zcmMvUmVzaXplU2Vuc29yLmpzIiwid2VicGFjazovL21hc29uLWpzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21hc29uLWpzLy4vbGliL21hc29uLWRlZmF1bHQtcGFja2VyLmpzIiwid2VicGFjazovL21hc29uLWpzLy4vbGliL21hc29uLmpzIiwid2VicGFjazovL21hc29uLWpzLy4vbGliL21hc29uLWRvbS1yZW5kZXJlci5qcyIsIndlYnBhY2s6Ly9tYXNvbi1qcy8uL2xpYi9tYXNvbi1zaW1wbGUtcGFja2VyLmpzIiwid2VicGFjazovL21hc29uLWpzLy4vZGVtby9tYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0ge1xuICAgIFJlc2l6ZVNlbnNvcjogcmVxdWlyZSgnLi9zcmMvUmVzaXplU2Vuc29yJyksXG4gICAgRWxlbWVudFF1ZXJpZXM6IHJlcXVpcmUoJy4vc3JjL0VsZW1lbnRRdWVyaWVzJylcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ29weXJpZ2h0IE1hcmMgSi4gU2NobWlkdC4gU2VlIHRoZSBMSUNFTlNFIGZpbGUgYXQgdGhlIHRvcC1sZXZlbFxuICogZGlyZWN0b3J5IG9mIHRoaXMgZGlzdHJpYnV0aW9uIGFuZCBhdFxuICogaHR0cHM6Ly9naXRodWIuY29tL21hcmNqL2Nzcy1lbGVtZW50LXF1ZXJpZXMvYmxvYi9tYXN0ZXIvTElDRU5TRS5cbiAqL1xuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShbJy4vUmVzaXplU2Vuc29yLmpzJ10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJy4vUmVzaXplU2Vuc29yLmpzJykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJvb3QuRWxlbWVudFF1ZXJpZXMgPSBmYWN0b3J5KHJvb3QuUmVzaXplU2Vuc29yKTtcbiAgICAgICAgcm9vdC5FbGVtZW50UXVlcmllcy5saXN0ZW4oKTtcbiAgICB9XG59KHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24gKFJlc2l6ZVNlbnNvcikge1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgdmFyIEVsZW1lbnRRdWVyaWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLzxzdHlsZT4gZWxlbWVudCB3aXRoIG91ciBkeW5hbWljYWxseSBjcmVhdGVkIHN0eWxlc1xuICAgICAgICB2YXIgY3NzU3R5bGVFbGVtZW50O1xuXG4gICAgICAgIC8vYWxsIHJ1bGVzIGZvdW5kIGZvciBlbGVtZW50IHF1ZXJpZXNcbiAgICAgICAgdmFyIGFsbFF1ZXJpZXMgPSB7fTtcblxuICAgICAgICAvL2Fzc29jaWF0aW9uIG1hcCB0byBpZGVudGlmeSB3aGljaCBzZWxlY3RvciBiZWxvbmdzIHRvIGEgZWxlbWVudCBmcm9tIHRoZSBhbmltYXRpb25zdGFydCBldmVudC5cbiAgICAgICAgdmFyIGlkVG9TZWxlY3Rvck1hcHBpbmcgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGVsZW1lbnRcbiAgICAgICAgICogQHJldHVybnMge051bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldEVtU2l6ZShlbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZvbnRTaXplID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCwgbnVsbCkuZm9udFNpemU7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChmb250U2l6ZSkgfHwgMTY7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IGVsZW1lbnQgc2l6ZVxuICAgICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IHt3aWR0aCwgaGVpZ2h0fVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0RWxlbWVudFNpemUoZWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKCFlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBlbGVtZW50Lm9mZnNldFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGVsZW1lbnQub2Zmc2V0SGVpZ2h0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBNYXRoLnJvdW5kKHJlY3Qud2lkdGgpLFxuICAgICAgICAgICAgICAgIGhlaWdodDogTWF0aC5yb3VuZChyZWN0LmhlaWdodClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAY29weXJpZ2h0IGh0dHBzOi8vZ2l0aHViLmNvbS9NcjBncm9nL2VsZW1lbnQtcXVlcnkvYmxvYi9tYXN0ZXIvTElDRU5TRVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICAgICAgICogQHJldHVybnMgeyp9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjb252ZXJ0VG9QeChlbGVtZW50LCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIG51bWJlcnMgPSB2YWx1ZS5zcGxpdCgvXFxkLyk7XG4gICAgICAgICAgICB2YXIgdW5pdHMgPSBudW1iZXJzW251bWJlcnMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpO1xuICAgICAgICAgICAgc3dpdGNoICh1bml0cykge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJweFwiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgY2FzZSBcImVtXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSAqIGdldEVtU2l6ZShlbGVtZW50KTtcbiAgICAgICAgICAgICAgICBjYXNlIFwicmVtXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSAqIGdldEVtU2l6ZSgpO1xuICAgICAgICAgICAgICAgIC8vIFZpZXdwb3J0IHVuaXRzIVxuICAgICAgICAgICAgICAgIC8vIEFjY29yZGluZyB0byBodHRwOi8vcXVpcmtzbW9kZS5vcmcvbW9iaWxlL3RhYmxlVmlld3BvcnQuaHRtbFxuICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aC9IZWlnaHQgZ2V0cyB1cyB0aGUgbW9zdCByZWxpYWJsZSBpbmZvXG4gICAgICAgICAgICAgICAgY2FzZSBcInZ3XCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSAqIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCAvIDEwMDtcbiAgICAgICAgICAgICAgICBjYXNlIFwidmhcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlICogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCAvIDEwMDtcbiAgICAgICAgICAgICAgICBjYXNlIFwidm1pblwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJ2bWF4XCI6XG4gICAgICAgICAgICAgICAgICAgIHZhciB2dyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCAvIDEwMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCAvIDEwMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNob29zZXIgPSBNYXRoW3VuaXRzID09PSBcInZtaW5cIiA/IFwibWluXCIgOiBcIm1heFwiXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlICogY2hvb3Nlcih2dywgdmgpO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICAvLyBmb3Igbm93LCBub3Qgc3VwcG9ydGluZyBwaHlzaWNhbCB1bml0cyAoc2luY2UgdGhleSBhcmUganVzdCBhIHNldCBudW1iZXIgb2YgcHgpXG4gICAgICAgICAgICAgICAgLy8gb3IgZXgvY2ggKGdldHRpbmcgYWNjdXJhdGUgbWVhc3VyZW1lbnRzIGlzIGhhcmQpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBTZXR1cEluZm9ybWF0aW9uKGVsZW1lbnQsIGlkKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICAgICAgdmFyIGtleSwgb3B0aW9uLCBlbGVtZW50U2l6ZSwgdmFsdWUsIGFjdHVhbFZhbHVlLCBhdHRyVmFsdWVzLCBhdHRyVmFsdWUsIGF0dHJOYW1lO1xuXG4gICAgICAgICAgICB2YXIgYXR0cmlidXRlcyA9IFsnbWluLXdpZHRoJywgJ21pbi1oZWlnaHQnLCAnbWF4LXdpZHRoJywgJ21heC1oZWlnaHQnXTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFeHRyYWN0cyB0aGUgY29tcHV0ZWQgd2lkdGgvaGVpZ2h0IGFuZCBzZXRzIHRvIG1pbi9tYXgtIGF0dHJpYnV0ZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5jYWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIGV4dHJhY3QgY3VycmVudCBkaW1lbnNpb25zXG4gICAgICAgICAgICAgICAgZWxlbWVudFNpemUgPSBnZXRFbGVtZW50U2l6ZSh0aGlzLmVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgYXR0clZhbHVlcyA9IHt9O1xuXG4gICAgICAgICAgICAgICAgZm9yIChrZXkgaW4gYWxsUXVlcmllc1tpZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhbGxRdWVyaWVzW2lkXS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvcHRpb24gPSBhbGxRdWVyaWVzW2lkXVtrZXldO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY29udmVydFRvUHgodGhpcy5lbGVtZW50LCBvcHRpb24udmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGFjdHVhbFZhbHVlID0gb3B0aW9uLnByb3BlcnR5ID09PSAnd2lkdGgnID8gZWxlbWVudFNpemUud2lkdGggOiBlbGVtZW50U2l6ZS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJOYW1lID0gb3B0aW9uLm1vZGUgKyAnLScgKyBvcHRpb24ucHJvcGVydHk7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJWYWx1ZSA9ICcnO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb24ubW9kZSA9PT0gJ21pbicgJiYgYWN0dWFsVmFsdWUgPj0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJWYWx1ZSArPSBvcHRpb24udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uLm1vZGUgPT09ICdtYXgnICYmIGFjdHVhbFZhbHVlIDw9IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyVmFsdWUgKz0gb3B0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhdHRyVmFsdWVzW2F0dHJOYW1lXSkgYXR0clZhbHVlc1thdHRyTmFtZV0gPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJWYWx1ZSAmJiAtMSA9PT0gKCcgJyArIGF0dHJWYWx1ZXNbYXR0ck5hbWVdICsgJyAnKS5pbmRleE9mKCcgJyArIGF0dHJWYWx1ZSArICcgJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJWYWx1ZXNbYXR0ck5hbWVdICs9ICcgJyArIGF0dHJWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoaykpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHRyVmFsdWVzW2F0dHJpYnV0ZXNba11dKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZXNba10sIGF0dHJWYWx1ZXNbYXR0cmlidXRlc1trXV0uc3Vic3RyKDEpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlc1trXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9ICAgICAgaWRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNldHVwRWxlbWVudChlbGVtZW50LCBpZCkge1xuICAgICAgICAgICAgaWYgKCFlbGVtZW50LmVsZW1lbnRRdWVyaWVzU2V0dXBJbmZvcm1hdGlvbikge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuZWxlbWVudFF1ZXJpZXNTZXR1cEluZm9ybWF0aW9uID0gbmV3IFNldHVwSW5mb3JtYXRpb24oZWxlbWVudCwgaWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQuZWxlbWVudFF1ZXJpZXNTZW5zb3IpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmVsZW1lbnRRdWVyaWVzU2Vuc29yID0gbmV3IFJlc2l6ZVNlbnNvcihlbGVtZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZWxlbWVudFF1ZXJpZXNTZXR1cEluZm9ybWF0aW9uLmNhbGwoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9yZXMgcnVsZXMgdG8gdGhlIHNlbGVjdG9yIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgb25jZSByZXNpemVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3JcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG1vZGUgbWlufG1heFxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgd2lkdGh8aGVpZ2h0XG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gcXVldWVRdWVyeShzZWxlY3RvciwgbW9kZSwgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mKGFsbFF1ZXJpZXNbc2VsZWN0b3JdKSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBhbGxRdWVyaWVzW3NlbGVjdG9yXSA9IFtdO1xuICAgICAgICAgICAgICAgIC8vIGFkZCBhbmltYXRpb24gdG8gdHJpZ2dlciBhbmltYXRpb25zdGFydCBldmVudCwgc28gd2Uga25vdyBleGFjdGx5IHdoZW4gYSBlbGVtZW50IGFwcGVhcnMgaW4gdGhlIERPTVxuXG4gICAgICAgICAgICAgICAgdmFyIGlkID0gaWRUb1NlbGVjdG9yTWFwcGluZy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgY3NzU3R5bGVFbGVtZW50LmlubmVySFRNTCArPSAnXFxuJyArIHNlbGVjdG9yICsgJyB7YW5pbWF0aW9uOiAwLjFzIGVsZW1lbnQtcXVlcmllczt9JztcbiAgICAgICAgICAgICAgICBjc3NTdHlsZUVsZW1lbnQuaW5uZXJIVE1MICs9ICdcXG4nICsgc2VsZWN0b3IgKyAnID4gLnJlc2l6ZS1zZW5zb3Ige21pbi13aWR0aDogJytpZCsncHg7fSc7XG4gICAgICAgICAgICAgICAgaWRUb1NlbGVjdG9yTWFwcGluZy5wdXNoKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYWxsUXVlcmllc1tzZWxlY3Rvcl0ucHVzaCh7XG4gICAgICAgICAgICAgICAgbW9kZTogbW9kZSxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eTogcHJvcGVydHksXG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFF1ZXJ5KGNvbnRhaW5lcikge1xuICAgICAgICAgICAgdmFyIHF1ZXJ5O1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwpIHF1ZXJ5ID0gKGNvbnRhaW5lcikgPyBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbC5iaW5kKGNvbnRhaW5lcikgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsLmJpbmQoZG9jdW1lbnQpO1xuICAgICAgICAgICAgaWYgKCFxdWVyeSAmJiAndW5kZWZpbmVkJyAhPT0gdHlwZW9mICQkKSBxdWVyeSA9ICQkO1xuICAgICAgICAgICAgaWYgKCFxdWVyeSAmJiAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIGpRdWVyeSkgcXVlcnkgPSBqUXVlcnk7XG5cbiAgICAgICAgICAgIGlmICghcXVlcnkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnTm8gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCwgalF1ZXJ5IG9yIE1vb3Rvb2xzXFwncyAkJCBmb3VuZC4nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcXVlcnk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgYW5pbWF0aW9uU3RhcnQgZGlkbid0IGNhdGNoIGEgbmV3IGVsZW1lbnQgaW4gdGhlIERPTSwgd2UgY2FuIG1hbnVhbGx5IHNlYXJjaCBmb3IgaXRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGZpbmRFbGVtZW50UXVlcmllc0VsZW1lbnRzKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gZ2V0UXVlcnkoY29udGFpbmVyKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgc2VsZWN0b3IgaW4gYWxsUXVlcmllcykgaWYgKGFsbFF1ZXJpZXMuaGFzT3duUHJvcGVydHkoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgICAgLy8gZmluZCBhbGwgZWxlbWVudHMgYmFzZWQgb24gdGhlIGV4dHJhY3QgcXVlcnkgc2VsZWN0b3IgZnJvbSB0aGUgZWxlbWVudCBxdWVyeSBydWxlXG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gcXVlcnkoc2VsZWN0b3IsIGNvbnRhaW5lcik7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBzZXR1cEVsZW1lbnQoZWxlbWVudHNbaV0sIHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gYXR0YWNoUmVzcG9uc2l2ZUltYWdlKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IFtdO1xuICAgICAgICAgICAgdmFyIHJ1bGVzID0gW107XG4gICAgICAgICAgICB2YXIgc291cmNlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRJbWFnZUlkID0gMDtcbiAgICAgICAgICAgIHZhciBsYXN0QWN0aXZlSW1hZ2UgPSAtMTtcbiAgICAgICAgICAgIHZhciBsb2FkZWRJbWFnZXMgPSBbXTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBlbGVtZW50LmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50LmNoaWxkcmVuLmhhc093blByb3BlcnR5KGkpKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmNoaWxkcmVuW2ldLnRhZ05hbWUgJiYgZWxlbWVudC5jaGlsZHJlbltpXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbWcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goZWxlbWVudC5jaGlsZHJlbltpXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pbldpZHRoID0gZWxlbWVudC5jaGlsZHJlbltpXS5nZXRBdHRyaWJ1dGUoJ21pbi13aWR0aCcpIHx8IGVsZW1lbnQuY2hpbGRyZW5baV0uZ2V0QXR0cmlidXRlKCdkYXRhLW1pbi13aWR0aCcpO1xuICAgICAgICAgICAgICAgICAgICAvL3ZhciBtaW5IZWlnaHQgPSBlbGVtZW50LmNoaWxkcmVuW2ldLmdldEF0dHJpYnV0ZSgnbWluLWhlaWdodCcpIHx8IGVsZW1lbnQuY2hpbGRyZW5baV0uZ2V0QXR0cmlidXRlKCdkYXRhLW1pbi1oZWlnaHQnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNyYyA9IGVsZW1lbnQuY2hpbGRyZW5baV0uZ2V0QXR0cmlidXRlKCdkYXRhLXNyYycpIHx8IGVsZW1lbnQuY2hpbGRyZW5baV0uZ2V0QXR0cmlidXRlKCd1cmwnKTtcblxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VzLnB1c2goc3JjKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgcnVsZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbldpZHRoOiBtaW5XaWR0aFxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzLnB1c2gocnVsZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtaW5XaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdEltYWdlSWQgPSBjaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jaGlsZHJlbltpXS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2hpbGRyZW5baV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGFzdEFjdGl2ZUltYWdlID0gZGVmYXVsdEltYWdlSWQ7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrKCkge1xuICAgICAgICAgICAgICAgIHZhciBpbWFnZVRvRGlzcGxheSA9IGZhbHNlLCBpO1xuXG4gICAgICAgICAgICAgICAgZm9yIChpIGluIGNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hpbGRyZW4uaGFzT3duUHJvcGVydHkoaSkpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChydWxlc1tpXS5taW5XaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQub2Zmc2V0V2lkdGggPiBydWxlc1tpXS5taW5XaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlVG9EaXNwbGF5ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghaW1hZ2VUb0Rpc3BsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9ubyBydWxlIG1hdGNoZWQsIHNob3cgZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICBpbWFnZVRvRGlzcGxheSA9IGRlZmF1bHRJbWFnZUlkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChsYXN0QWN0aXZlSW1hZ2UgIT09IGltYWdlVG9EaXNwbGF5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vaW1hZ2UgY2hhbmdlXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsb2FkZWRJbWFnZXNbaW1hZ2VUb0Rpc3BsYXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2ltYWdlIGhhcyBub3QgYmVlbiBsb2FkZWQgeWV0LCB3ZSBuZWVkIHRvIGxvYWQgdGhlIGltYWdlIGZpcnN0IGluIG1lbW9yeSB0byBwcmV2ZW50IGZsYXNoIG9mXG4gICAgICAgICAgICAgICAgICAgICAgICAvL25vIGNvbnRlbnRcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5baW1hZ2VUb0Rpc3BsYXldLnNyYyA9IHNvdXJjZXNbaW1hZ2VUb0Rpc3BsYXldO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5bbGFzdEFjdGl2ZUltYWdlXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuW2ltYWdlVG9EaXNwbGF5XS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlZEltYWdlc1tpbWFnZVRvRGlzcGxheV0gPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEFjdGl2ZUltYWdlID0gaW1hZ2VUb0Rpc3BsYXk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5zcmMgPSBzb3VyY2VzW2ltYWdlVG9EaXNwbGF5XTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuW2xhc3RBY3RpdmVJbWFnZV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuW2ltYWdlVG9EaXNwbGF5XS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RBY3RpdmVJbWFnZSA9IGltYWdlVG9EaXNwbGF5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy9tYWtlIHN1cmUgZm9yIGluaXRpYWwgY2hlY2sgY2FsbCB0aGUgLnNyYyBpcyBzZXQgY29ycmVjdGx5XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuW2ltYWdlVG9EaXNwbGF5XS5zcmMgPSBzb3VyY2VzW2ltYWdlVG9EaXNwbGF5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsZW1lbnQucmVzaXplU2Vuc29ySW5zdGFuY2UgPSBuZXcgUmVzaXplU2Vuc29yKGVsZW1lbnQsIGNoZWNrKTtcbiAgICAgICAgICAgIGNoZWNrKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBmaW5kUmVzcG9uc2l2ZUltYWdlcygpIHtcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IGdldFF1ZXJ5KCk7XG5cbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IHF1ZXJ5KCdbZGF0YS1yZXNwb25zaXZlLWltYWdlXSxbcmVzcG9uc2l2ZS1pbWFnZV0nKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICAgICAgYXR0YWNoUmVzcG9uc2l2ZUltYWdlKGVsZW1lbnRzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZWdleCA9IC8sP1tcXHNcXHRdKihbXixcXG5dKj8pKCg/OlxcW1tcXHNcXHRdKj8oPzptaW58bWF4KS0oPzp3aWR0aHxoZWlnaHQpW1xcc1xcdF0qP1t+JFxcXl0/PVtcXHNcXHRdKj9cIlteXCJdKj9cIltcXHNcXHRdKj9dKSspKFteLFxcblxcc1xce10qKS9tZ2k7XG4gICAgICAgIHZhciBhdHRyUmVnZXggPSAvXFxbW1xcc1xcdF0qPyhtaW58bWF4KS0od2lkdGh8aGVpZ2h0KVtcXHNcXHRdKj9bfiRcXF5dPz1bXFxzXFx0XSo/XCIoW15cIl0qPylcIltcXHNcXHRdKj9dL21naTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGNzc1xuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZXh0cmFjdFF1ZXJ5KGNzcykge1xuICAgICAgICAgICAgdmFyIG1hdGNoLCBzbWF0Y2gsIGF0dHJzLCBhdHRyTWF0Y2g7XG5cbiAgICAgICAgICAgIGNzcyA9IGNzcy5yZXBsYWNlKC8nL2csICdcIicpO1xuICAgICAgICAgICAgd2hpbGUgKG51bGwgIT09IChtYXRjaCA9IHJlZ2V4LmV4ZWMoY3NzKSkpIHtcbiAgICAgICAgICAgICAgICBzbWF0Y2ggPSBtYXRjaFsxXSArIG1hdGNoWzNdO1xuICAgICAgICAgICAgICAgIGF0dHJzID0gbWF0Y2hbMl07XG5cbiAgICAgICAgICAgICAgICB3aGlsZSAobnVsbCAhPT0gKGF0dHJNYXRjaCA9IGF0dHJSZWdleC5leGVjKGF0dHJzKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWVRdWVyeShzbWF0Y2gsIGF0dHJNYXRjaFsxXSwgYXR0ck1hdGNoWzJdLCBhdHRyTWF0Y2hbM10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge0Nzc1J1bGVbXXxTdHJpbmd9IHJ1bGVzXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiByZWFkUnVsZXMocnVsZXMpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RvciA9ICcnO1xuXG4gICAgICAgICAgICBpZiAoIXJ1bGVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoJ3N0cmluZycgPT09IHR5cGVvZiBydWxlcykge1xuICAgICAgICAgICAgICAgIHJ1bGVzID0gcnVsZXMudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoLTEgIT09IHJ1bGVzLmluZGV4T2YoJ21pbi13aWR0aCcpIHx8IC0xICE9PSBydWxlcy5pbmRleE9mKCdtYXgtd2lkdGgnKSkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYWN0UXVlcnkocnVsZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBydWxlcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT09IHJ1bGVzW2ldLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gcnVsZXNbaV0uc2VsZWN0b3JUZXh0IHx8IHJ1bGVzW2ldLmNzc1RleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoLTEgIT09IHNlbGVjdG9yLmluZGV4T2YoJ21pbi1oZWlnaHQnKSB8fCAtMSAhPT0gc2VsZWN0b3IuaW5kZXhPZignbWF4LWhlaWdodCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdFF1ZXJ5KHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoLTEgIT09IHNlbGVjdG9yLmluZGV4T2YoJ21pbi13aWR0aCcpIHx8IC0xICE9PSBzZWxlY3Rvci5pbmRleE9mKCdtYXgtd2lkdGgnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RRdWVyeShzZWxlY3Rvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoNCA9PT0gcnVsZXNbaV0udHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZFJ1bGVzKHJ1bGVzW2ldLmNzc1J1bGVzIHx8IHJ1bGVzW2ldLnJ1bGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgzID09PSBydWxlc1tpXS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihydWxlc1tpXS5zdHlsZVNoZWV0Lmhhc093blByb3BlcnR5KFwiY3NzUnVsZXNcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkUnVsZXMocnVsZXNbaV0uc3R5bGVTaGVldC5jc3NSdWxlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGVmYXVsdENzc0luamVjdGVkID0gZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNlYXJjaGVzIGFsbCBjc3MgcnVsZXMgYW5kIHNldHVwcyB0aGUgZXZlbnQgbGlzdGVuZXIgdG8gYWxsIGVsZW1lbnRzIHdpdGggZWxlbWVudCBxdWVyeSBydWxlcy4uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uU3RhcnQgPSAnYW5pbWF0aW9uc3RhcnQnO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGVbJ3dlYmtpdEFuaW1hdGlvbk5hbWUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25TdGFydCA9ICd3ZWJraXRBbmltYXRpb25TdGFydCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGVbJ01vekFuaW1hdGlvbk5hbWUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25TdGFydCA9ICdtb3phbmltYXRpb25zdGFydCc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGVbJ09BbmltYXRpb25OYW1lJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uU3RhcnQgPSAnb2FuaW1hdGlvbnN0YXJ0JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKGFuaW1hdGlvblN0YXJ0LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgdmFyIHN0eWxlcyA9IGVsZW1lbnQgJiYgd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvbk5hbWUgPSBzdHlsZXMgJiYgc3R5bGVzLmdldFByb3BlcnR5VmFsdWUoJ2FuaW1hdGlvbi1uYW1lJyk7XG4gICAgICAgICAgICAgICAgdmFyIHJlcXVpcmVzU2V0dXAgPSBhbmltYXRpb25OYW1lICYmICgtMSAhPT0gYW5pbWF0aW9uTmFtZS5pbmRleE9mKCdlbGVtZW50LXF1ZXJpZXMnKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVxdWlyZXNTZXR1cCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmVsZW1lbnRRdWVyaWVzU2Vuc29yID0gbmV3IFJlc2l6ZVNlbnNvcihlbGVtZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5lbGVtZW50UXVlcmllc1NldHVwSW5mb3JtYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmVsZW1lbnRRdWVyaWVzU2V0dXBJbmZvcm1hdGlvbi5jYWxsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZW5zb3JTdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LnJlc2l6ZVNlbnNvciwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IHNlbnNvclN0eWxlcy5nZXRQcm9wZXJ0eVZhbHVlKCdtaW4td2lkdGgnKTtcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBwYXJzZUludChpZC5yZXBsYWNlKCdweCcsICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIHNldHVwRWxlbWVudChlLnRhcmdldCwgaWRUb1NlbGVjdG9yTWFwcGluZ1tpZF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoIWRlZmF1bHRDc3NJbmplY3RlZCkge1xuICAgICAgICAgICAgICAgIGNzc1N0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgY3NzU3R5bGVFbGVtZW50LnR5cGUgPSAndGV4dC9jc3MnO1xuICAgICAgICAgICAgICAgIGNzc1N0eWxlRWxlbWVudC5pbm5lckhUTUwgPSAnW3Jlc3BvbnNpdmUtaW1hZ2VdID4gaW1nLCBbZGF0YS1yZXNwb25zaXZlLWltYWdlXSB7b3ZlcmZsb3c6IGhpZGRlbjsgcGFkZGluZzogMDsgfSBbcmVzcG9uc2l2ZS1pbWFnZV0gPiBpbWcsIFtkYXRhLXJlc3BvbnNpdmUtaW1hZ2VdID4gaW1nIHt3aWR0aDogMTAwJTt9JztcblxuICAgICAgICAgICAgICAgIC8vc2FmYXJpIHdhbnRzIGF0IGxlYXN0IG9uZSBydWxlIGluIGtleWZyYW1lcyB0byBzdGFydCB3b3JraW5nXG4gICAgICAgICAgICAgICAgY3NzU3R5bGVFbGVtZW50LmlubmVySFRNTCArPSAnXFxuQGtleWZyYW1lcyBlbGVtZW50LXF1ZXJpZXMgeyAwJSB7IHZpc2liaWxpdHk6IGluaGVyaXQ7IH0gfSc7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChjc3NTdHlsZUVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGRlZmF1bHRDc3NJbmplY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnN0eWxlU2hlZXRzW2ldLmhyZWYgJiYgMCA9PT0gZG9jdW1lbnQuc3R5bGVTaGVldHNbaV0uaHJlZi5pbmRleE9mKCdmaWxlOi8vJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkNzc0VsZW1lbnRRdWVyaWVzOiB1bmFibGUgdG8gcGFyc2UgbG9jYWwgY3NzIGZpbGVzLCBcIiArIGRvY3VtZW50LnN0eWxlU2hlZXRzW2ldLmhyZWYpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVhZFJ1bGVzKGRvY3VtZW50LnN0eWxlU2hlZXRzW2ldLmNzc1J1bGVzIHx8IGRvY3VtZW50LnN0eWxlU2hlZXRzW2ldLnJ1bGVzIHx8IGRvY3VtZW50LnN0eWxlU2hlZXRzW2ldLmNzc1RleHQpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZpbmRSZXNwb25zaXZlSW1hZ2VzKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdvIHRocm91Z2ggYWxsIGNvbGxlY3RlZCBydWxlcyAocmVhZFJ1bGVzKCkpIGFuZCBhdHRhY2ggdGhlIHJlc2l6ZS1saXN0ZW5lci5cbiAgICAgICAgICogTm90IG5lY2Vzc2FyeSB0byBjYWxsIGl0IG1hbnVhbGx5LCBzaW5jZSB3ZSBkZXRlY3QgYXV0b21hdGljYWxseSB3aGVuIG5ldyBlbGVtZW50c1xuICAgICAgICAgKiBhcmUgYXZhaWxhYmxlIGluIHRoZSBET00uIEhvd2V2ZXIsIHNvbWV0aW1lcyBoYW5keSBmb3IgZGlydHkgRE9NIG1vZGlmaWNhdGlvbnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciBvbmx5IGVsZW1lbnRzIG9mIHRoZSBjb250YWluZXIgYXJlIGNvbnNpZGVyZWQgKGRvY3VtZW50LmJvZHkgaWYgbm90IHNldClcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmluZEVsZW1lbnRRdWVyaWVzRWxlbWVudHMgPSBmdW5jdGlvbiAoY29udGFpbmVyKSB7XG4gICAgICAgICAgICBmaW5kRWxlbWVudFF1ZXJpZXNFbGVtZW50cyhjb250YWluZXIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIEVsZW1lbnRRdWVyaWVzLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgRWxlbWVudFF1ZXJpZXMuaW5zdGFuY2UudXBkYXRlKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIHNlbnNvciBhbmQgZWxlbWVudHF1ZXJ5IGluZm9ybWF0aW9uIGZyb20gdGhlIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gICAgICovXG4gICAgRWxlbWVudFF1ZXJpZXMuZGV0YWNoID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQuZWxlbWVudFF1ZXJpZXNTZXR1cEluZm9ybWF0aW9uKSB7XG4gICAgICAgICAgICAvL2VsZW1lbnQgcXVlcmllc1xuICAgICAgICAgICAgZWxlbWVudC5lbGVtZW50UXVlcmllc1NlbnNvci5kZXRhY2goKTtcbiAgICAgICAgICAgIGRlbGV0ZSBlbGVtZW50LmVsZW1lbnRRdWVyaWVzU2V0dXBJbmZvcm1hdGlvbjtcbiAgICAgICAgICAgIGRlbGV0ZSBlbGVtZW50LmVsZW1lbnRRdWVyaWVzU2Vuc29yO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5yZXNpemVTZW5zb3JJbnN0YW5jZSkge1xuICAgICAgICAgICAgLy9yZXNwb25zaXZlIGltYWdlXG5cbiAgICAgICAgICAgIGVsZW1lbnQucmVzaXplU2Vuc29ySW5zdGFuY2UuZGV0YWNoKCk7XG4gICAgICAgICAgICBkZWxldGUgZWxlbWVudC5yZXNpemVTZW5zb3JJbnN0YW5jZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBFbGVtZW50UXVlcmllcy5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIUVsZW1lbnRRdWVyaWVzLmluc3RhbmNlKSB7XG4gICAgICAgICAgICBFbGVtZW50UXVlcmllcy5pbnN0YW5jZSA9IG5ldyBFbGVtZW50UXVlcmllcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgRWxlbWVudFF1ZXJpZXMuaW5zdGFuY2UuaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgZG9tTG9hZGVkID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIC8qIE1vemlsbGEsIENocm9tZSwgT3BlcmEgKi9cbiAgICAgICAgaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBjYWxsYmFjaywgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIC8qIFNhZmFyaSwgaUNhYiwgS29ucXVlcm9yICovXG4gICAgICAgIGVsc2UgaWYgKC9LSFRNTHxXZWJLaXR8aUNhYi9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgICAgICAgIHZhciBET01Mb2FkVGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKC9sb2FkZWR8Y29tcGxldGUvaS50ZXN0KGRvY3VtZW50LnJlYWR5U3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoRE9NTG9hZFRpbWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxMCk7XG4gICAgICAgIH1cbiAgICAgICAgLyogT3RoZXIgd2ViIGJyb3dzZXJzICovXG4gICAgICAgIGVsc2Ugd2luZG93Lm9ubG9hZCA9IGNhbGxiYWNrO1xuICAgIH07XG5cbiAgICBFbGVtZW50UXVlcmllcy5maW5kRWxlbWVudFF1ZXJpZXNFbGVtZW50cyA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcbiAgICAgICAgRWxlbWVudFF1ZXJpZXMuaW5zdGFuY2UuZmluZEVsZW1lbnRRdWVyaWVzRWxlbWVudHMoY29udGFpbmVyKTtcbiAgICB9O1xuXG4gICAgRWxlbWVudFF1ZXJpZXMubGlzdGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBkb21Mb2FkZWQoRWxlbWVudFF1ZXJpZXMuaW5pdCk7XG4gICAgfTtcblxuICAgIHJldHVybiBFbGVtZW50UXVlcmllcztcblxufSkpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENvcHlyaWdodCBNYXJjIEouIFNjaG1pZHQuIFNlZSB0aGUgTElDRU5TRSBmaWxlIGF0IHRoZSB0b3AtbGV2ZWxcbiAqIGRpcmVjdG9yeSBvZiB0aGlzIGRpc3RyaWJ1dGlvbiBhbmQgYXRcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXJjai9jc3MtZWxlbWVudC1xdWVyaWVzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UuXG4gKi9cbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoZmFjdG9yeSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByb290LlJlc2l6ZVNlbnNvciA9IGZhY3RvcnkoKTtcbiAgICB9XG59KHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24gKCkge1xuXG4gICAgLy8gTWFrZSBzdXJlIGl0IGRvZXMgbm90IHRocm93IGluIGEgU1NSIChTZXJ2ZXIgU2lkZSBSZW5kZXJpbmcpIHNpdHVhdGlvblxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vU2VtYW50aWMtT3JnL1NlbWFudGljLVVJL2lzc3Vlcy8zODU1XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21hcmNqL2Nzcy1lbGVtZW50LXF1ZXJpZXMvaXNzdWVzLzI1N1xuICAgIHZhciBnbG9iYWxXaW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIHdpbmRvdy5NYXRoID09IE1hdGhcbiAgICAgICAgPyB3aW5kb3dcbiAgICAgICAgOiB0eXBlb2Ygc2VsZiAhPSAndW5kZWZpbmVkJyAmJiBzZWxmLk1hdGggPT0gTWF0aFxuICAgICAgICAgICAgPyBzZWxmXG4gICAgICAgICAgICA6IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG4gICAgLy8gT25seSB1c2VkIGZvciB0aGUgZGlydHkgY2hlY2tpbmcsIHNvIHRoZSBldmVudCBjYWxsYmFjayBjb3VudCBpcyBsaW1pdGVkIHRvIG1heCAxIGNhbGwgcGVyIGZwcyBwZXIgc2Vuc29yLlxuICAgIC8vIEluIGNvbWJpbmF0aW9uIHdpdGggdGhlIGV2ZW50IGJhc2VkIHJlc2l6ZSBzZW5zb3IgdGhpcyBzYXZlcyBjcHUgdGltZSwgYmVjYXVzZSB0aGUgc2Vuc29yIGlzIHRvbyBmYXN0IGFuZFxuICAgIC8vIHdvdWxkIGdlbmVyYXRlIHRvbyBtYW55IHVubmVjZXNzYXJ5IGV2ZW50cy5cbiAgICB2YXIgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZ2xvYmFsV2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICAgICAgICBnbG9iYWxXaW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgIGdsb2JhbFdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgICAgZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2xvYmFsV2luZG93LnNldFRpbWVvdXQoZm4sIDIwKTtcbiAgICAgICAgfTtcblxuICAgIHZhciBjYW5jZWxBbmltYXRpb25GcmFtZSA9IGdsb2JhbFdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSB8fFxuICAgICAgICBnbG9iYWxXaW5kb3cubW96Q2FuY2VsQW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgICAgZ2xvYmFsV2luZG93LndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgIGZ1bmN0aW9uICh0aW1lcikge1xuICAgICAgICAgICAgZ2xvYmFsV2luZG93LmNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlIG92ZXIgZWFjaCBvZiB0aGUgcHJvdmlkZWQgZWxlbWVudChzKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8SFRNTEVsZW1lbnRbXX0gZWxlbWVudHNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSAgICAgICAgICAgICAgICAgIGNhbGxiYWNrXG4gICAgICovXG4gICAgZnVuY3Rpb24gZm9yRWFjaEVsZW1lbnQoZWxlbWVudHMsIGNhbGxiYWNrKXtcbiAgICAgICAgdmFyIGVsZW1lbnRzVHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlbGVtZW50cyk7XG4gICAgICAgIHZhciBpc0NvbGxlY3Rpb25UeXBlZCA9ICgnW29iamVjdCBBcnJheV0nID09PSBlbGVtZW50c1R5cGVcbiAgICAgICAgICAgIHx8ICgnW29iamVjdCBOb2RlTGlzdF0nID09PSBlbGVtZW50c1R5cGUpXG4gICAgICAgICAgICB8fCAoJ1tvYmplY3QgSFRNTENvbGxlY3Rpb25dJyA9PT0gZWxlbWVudHNUeXBlKVxuICAgICAgICAgICAgfHwgKCdbb2JqZWN0IE9iamVjdF0nID09PSBlbGVtZW50c1R5cGUpXG4gICAgICAgICAgICB8fCAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBqUXVlcnkgJiYgZWxlbWVudHMgaW5zdGFuY2VvZiBqUXVlcnkpIC8vanF1ZXJ5XG4gICAgICAgICAgICB8fCAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBFbGVtZW50cyAmJiBlbGVtZW50cyBpbnN0YW5jZW9mIEVsZW1lbnRzKSAvL21vb3Rvb2xzXG4gICAgICAgICk7XG4gICAgICAgIHZhciBpID0gMCwgaiA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgaWYgKGlzQ29sbGVjdGlvblR5cGVkKSB7XG4gICAgICAgICAgICBmb3IgKDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVsZW1lbnRzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICogR2V0IGVsZW1lbnQgc2l6ZVxuICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICAgICogQHJldHVybnMge09iamVjdH0ge3dpZHRoLCBoZWlnaHR9XG4gICAgKi9cbiAgICBmdW5jdGlvbiBnZXRFbGVtZW50U2l6ZShlbGVtZW50KSB7XG4gICAgICAgIGlmICghZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGVsZW1lbnQub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBlbGVtZW50Lm9mZnNldEhlaWdodFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd2lkdGg6IE1hdGgucm91bmQocmVjdC53aWR0aCksXG4gICAgICAgICAgICBoZWlnaHQ6IE1hdGgucm91bmQocmVjdC5oZWlnaHQpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBcHBseSBDU1Mgc3R5bGVzIHRvIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gICAgICogQHBhcmFtIHtPYmplY3R9IHN0eWxlXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2V0U3R5bGUoZWxlbWVudCwgc3R5bGUpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoc3R5bGUpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlW2tleV0gPSBzdHlsZVtrZXldO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbGFzcyBmb3IgZGltZW5zaW9uIGNoYW5nZSBkZXRlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR8RWxlbWVudFtdfEVsZW1lbnRzfGpRdWVyeX0gZWxlbWVudFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICB2YXIgUmVzaXplU2Vuc29yID0gZnVuY3Rpb24oZWxlbWVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgLy9JcyB1c2VkIHdoZW4gY2hlY2tpbmcgaW4gcmVzZXQoKSBvbmx5IGZvciBpbnZpc2libGUgZWxlbWVudHNcbiAgICAgICAgdmFyIGxhc3RBbmltYXRpb25GcmFtZUZvckludmlzaWJsZUNoZWNrID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBFdmVudFF1ZXVlKCkge1xuICAgICAgICAgICAgdmFyIHEgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuYWRkID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgICAgICBxLnB1c2goZXYpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGksIGo7XG4gICAgICAgICAgICB0aGlzLmNhbGwgPSBmdW5jdGlvbihzaXplSW5mbykge1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGogPSBxLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBxW2ldLmNhbGwodGhpcywgc2l6ZUluZm8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3UXVldWUgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IoaSA9IDAsIGogPSBxLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZihxW2ldICE9PSBldikgbmV3UXVldWUucHVzaChxW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcSA9IG5ld1F1ZXVlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5sZW5ndGggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcS5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudFxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSAgICByZXNpemVkXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBhdHRhY2hSZXNpemVFdmVudChlbGVtZW50LCByZXNpemVkKSB7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHJldHVybjtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LnJlc2l6ZWRBdHRhY2hlZCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVzaXplZEF0dGFjaGVkLmFkZChyZXNpemVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsZW1lbnQucmVzaXplZEF0dGFjaGVkID0gbmV3IEV2ZW50UXVldWUoKTtcbiAgICAgICAgICAgIGVsZW1lbnQucmVzaXplZEF0dGFjaGVkLmFkZChyZXNpemVkKTtcblxuICAgICAgICAgICAgZWxlbWVudC5yZXNpemVTZW5zb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGVsZW1lbnQucmVzaXplU2Vuc29yLmRpciA9ICdsdHInO1xuICAgICAgICAgICAgZWxlbWVudC5yZXNpemVTZW5zb3IuY2xhc3NOYW1lID0gJ3Jlc2l6ZS1zZW5zb3InO1xuXG4gICAgICAgICAgICB2YXIgc3R5bGUgPSB7XG4gICAgICAgICAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICAgIGxlZnQ6ICcwcHgnLFxuICAgICAgICAgICAgICAgIHRvcDogJzBweCcsXG4gICAgICAgICAgICAgICAgcmlnaHQ6ICcwcHgnLFxuICAgICAgICAgICAgICAgIGJvdHRvbTogJzBweCcsXG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgICAgICAgICAgIHpJbmRleDogJy0xJyxcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiAnaGlkZGVuJyxcbiAgICAgICAgICAgICAgICBtYXhXaWR0aDogJzEwMCUnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHN0eWxlQ2hpbGQgPSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgICAgbGVmdDogJzBweCcsXG4gICAgICAgICAgICAgICAgdG9wOiAnMHB4JyxcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAnMHMnLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgc2V0U3R5bGUoZWxlbWVudC5yZXNpemVTZW5zb3IsIHN0eWxlKTtcblxuICAgICAgICAgICAgdmFyIGV4cGFuZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgZXhwYW5kLmNsYXNzTmFtZSA9ICdyZXNpemUtc2Vuc29yLWV4cGFuZCc7XG4gICAgICAgICAgICBzZXRTdHlsZShleHBhbmQsIHN0eWxlKTtcblxuICAgICAgICAgICAgdmFyIGV4cGFuZENoaWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBzZXRTdHlsZShleHBhbmRDaGlsZCwgc3R5bGVDaGlsZCk7XG4gICAgICAgICAgICBleHBhbmQuYXBwZW5kQ2hpbGQoZXhwYW5kQ2hpbGQpO1xuXG4gICAgICAgICAgICB2YXIgc2hyaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBzaHJpbmsuY2xhc3NOYW1lID0gJ3Jlc2l6ZS1zZW5zb3Itc2hyaW5rJztcbiAgICAgICAgICAgIHNldFN0eWxlKHNocmluaywgc3R5bGUpO1xuXG4gICAgICAgICAgICB2YXIgc2hyaW5rQ2hpbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHNldFN0eWxlKHNocmlua0NoaWxkLCBzdHlsZUNoaWxkKTtcbiAgICAgICAgICAgIHNldFN0eWxlKHNocmlua0NoaWxkLCB7IHdpZHRoOiAnMjAwJScsIGhlaWdodDogJzIwMCUnIH0pO1xuICAgICAgICAgICAgc2hyaW5rLmFwcGVuZENoaWxkKHNocmlua0NoaWxkKTtcblxuICAgICAgICAgICAgZWxlbWVudC5yZXNpemVTZW5zb3IuYXBwZW5kQ2hpbGQoZXhwYW5kKTtcbiAgICAgICAgICAgIGVsZW1lbnQucmVzaXplU2Vuc29yLmFwcGVuZENoaWxkKHNocmluayk7XG4gICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGVsZW1lbnQucmVzaXplU2Vuc29yKTtcblxuICAgICAgICAgICAgdmFyIGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IGNvbXB1dGVkU3R5bGUgPyBjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3Bvc2l0aW9uJykgOiBudWxsO1xuICAgICAgICAgICAgaWYgKCdhYnNvbHV0ZScgIT09IHBvc2l0aW9uICYmICdyZWxhdGl2ZScgIT09IHBvc2l0aW9uICYmICdmaXhlZCcgIT09IHBvc2l0aW9uICYmICdzdGlja3knICE9PSBwb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZGlydHkgPSBmYWxzZTtcblxuICAgICAgICAgICAgLy9sYXN0IHJlcXVlc3QgYW5pbWF0aW9uIGZyYW1lIGlkIHVzZWQgaW4gb25zY3JvbGwgZXZlbnRcbiAgICAgICAgICAgIHZhciByYWZJZCA9IDA7XG4gICAgICAgICAgICB2YXIgc2l6ZSA9IGdldEVsZW1lbnRTaXplKGVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIGxhc3RXaWR0aCA9IDA7XG4gICAgICAgICAgICB2YXIgbGFzdEhlaWdodCA9IDA7XG4gICAgICAgICAgICB2YXIgaW5pdGlhbEhpZGRlbkNoZWNrID0gdHJ1ZTtcbiAgICAgICAgICAgIGxhc3RBbmltYXRpb25GcmFtZUZvckludmlzaWJsZUNoZWNrID0gMDtcblxuICAgICAgICAgICAgdmFyIHJlc2V0RXhwYW5kU2hyaW5rID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgZXhwYW5kQ2hpbGQuc3R5bGUud2lkdGggPSAod2lkdGggKyAxMCkgKyAncHgnO1xuICAgICAgICAgICAgICAgIGV4cGFuZENoaWxkLnN0eWxlLmhlaWdodCA9IChoZWlnaHQgKyAxMCkgKyAncHgnO1xuXG4gICAgICAgICAgICAgICAgZXhwYW5kLnNjcm9sbExlZnQgPSB3aWR0aCArIDEwO1xuICAgICAgICAgICAgICAgIGV4cGFuZC5zY3JvbGxUb3AgPSBoZWlnaHQgKyAxMDtcblxuICAgICAgICAgICAgICAgIHNocmluay5zY3JvbGxMZWZ0ID0gd2lkdGggKyAxMDtcbiAgICAgICAgICAgICAgICBzaHJpbmsuc2Nyb2xsVG9wID0gaGVpZ2h0ICsgMTA7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgcmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBlbGVtZW50IGlzIGhpZGRlblxuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsSGlkZGVuQ2hlY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGludmlzaWJsZSA9IGVsZW1lbnQub2Zmc2V0V2lkdGggPT09IDAgJiYgZWxlbWVudC5vZmZzZXRIZWlnaHQgPT09IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGluIG5leHQgZnJhbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGFzdEFuaW1hdGlvbkZyYW1lRm9ySW52aXNpYmxlQ2hlY2spe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RBbmltYXRpb25GcmFtZUZvckludmlzaWJsZUNoZWNrID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RBbmltYXRpb25GcmFtZUZvckludmlzaWJsZUNoZWNrID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RvcCBjaGVja2luZ1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbEhpZGRlbkNoZWNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXNldEV4cGFuZFNocmluaygpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGVsZW1lbnQucmVzaXplU2Vuc29yLnJlc2V0U2Vuc29yID0gcmVzZXQ7XG5cbiAgICAgICAgICAgIHZhciBvblJlc2l6ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByYWZJZCA9IDA7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWRpcnR5KSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICBsYXN0V2lkdGggPSBzaXplLndpZHRoO1xuICAgICAgICAgICAgICAgIGxhc3RIZWlnaHQgPSBzaXplLmhlaWdodDtcblxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnJlc2l6ZWRBdHRhY2hlZCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlc2l6ZWRBdHRhY2hlZC5jYWxsKHNpemUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBvblNjcm9sbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNpemUgPSBnZXRFbGVtZW50U2l6ZShlbGVtZW50KTtcbiAgICAgICAgICAgICAgICBkaXJ0eSA9IHNpemUud2lkdGggIT09IGxhc3RXaWR0aCB8fCBzaXplLmhlaWdodCAhPT0gbGFzdEhlaWdodDtcblxuICAgICAgICAgICAgICAgIGlmIChkaXJ0eSAmJiAhcmFmSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmFmSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUob25SZXNpemVkKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXNldCgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGFkZEV2ZW50ID0gZnVuY3Rpb24oZWwsIG5hbWUsIGNiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsLmF0dGFjaEV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGVsLmF0dGFjaEV2ZW50KCdvbicgKyBuYW1lLCBjYik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBjYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYWRkRXZlbnQoZXhwYW5kLCAnc2Nyb2xsJywgb25TY3JvbGwpO1xuICAgICAgICAgICAgYWRkRXZlbnQoc2hyaW5rLCAnc2Nyb2xsJywgb25TY3JvbGwpO1xuXG4gICAgICAgICAgICAvLyBGaXggZm9yIGN1c3RvbSBFbGVtZW50cyBhbmQgaW52aXNpYmxlIGVsZW1lbnRzXG4gICAgICAgICAgICBsYXN0QW5pbWF0aW9uRnJhbWVGb3JJbnZpc2libGVDaGVjayA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGxhc3RBbmltYXRpb25GcmFtZUZvckludmlzaWJsZUNoZWNrID0gMDtcbiAgICAgICAgICAgICAgICByZXNldCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3JFYWNoRWxlbWVudChlbGVtZW50LCBmdW5jdGlvbihlbGVtKXtcbiAgICAgICAgICAgIGF0dGFjaFJlc2l6ZUV2ZW50KGVsZW0sIGNhbGxiYWNrKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5kZXRhY2ggPSBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgLy8gY2xlYW4gdXAgdGhlIHVuZmluaXNoZWQgYW5pbWF0aW9uIGZyYW1lIHRvIHByZXZlbnQgYSBwb3RlbnRpYWwgZW5kbGVzcyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgb2YgcmVzZXRcbiAgICAgICAgICAgIGlmICghbGFzdEFuaW1hdGlvbkZyYW1lRm9ySW52aXNpYmxlQ2hlY2spIHtcbiAgICAgICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShsYXN0QW5pbWF0aW9uRnJhbWVGb3JJbnZpc2libGVDaGVjayk7XG4gICAgICAgICAgICAgICAgbGFzdEFuaW1hdGlvbkZyYW1lRm9ySW52aXNpYmxlQ2hlY2sgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgUmVzaXplU2Vuc29yLmRldGFjaChlbGVtZW50LCBldik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZWxlbWVudC5yZXNpemVTZW5zb3IucmVzZXRTZW5zb3IoKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgUmVzaXplU2Vuc29yLnJlc2V0ID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICBmb3JFYWNoRWxlbWVudChlbGVtZW50LCBmdW5jdGlvbihlbGVtKXtcbiAgICAgICAgICAgIGVsZW0ucmVzaXplU2Vuc29yLnJlc2V0U2Vuc29yKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBSZXNpemVTZW5zb3IuZGV0YWNoID0gZnVuY3Rpb24oZWxlbWVudCwgZXYpIHtcbiAgICAgICAgZm9yRWFjaEVsZW1lbnQoZWxlbWVudCwgZnVuY3Rpb24oZWxlbSl7XG4gICAgICAgICAgICBpZiAoIWVsZW0pIHJldHVybjtcbiAgICAgICAgICAgIGlmKGVsZW0ucmVzaXplZEF0dGFjaGVkICYmIHR5cGVvZiBldiA9PT0gXCJmdW5jdGlvblwiKXtcbiAgICAgICAgICAgICAgICBlbGVtLnJlc2l6ZWRBdHRhY2hlZC5yZW1vdmUoZXYpO1xuICAgICAgICAgICAgICAgIGlmKGVsZW0ucmVzaXplZEF0dGFjaGVkLmxlbmd0aCgpKSByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWxlbS5yZXNpemVTZW5zb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbS5jb250YWlucyhlbGVtLnJlc2l6ZVNlbnNvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5yZW1vdmVDaGlsZChlbGVtLnJlc2l6ZVNlbnNvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBlbGVtLnJlc2l6ZVNlbnNvcjtcbiAgICAgICAgICAgICAgICBkZWxldGUgZWxlbS5yZXNpemVkQXR0YWNoZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBpZiAodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKG11dGF0aW9ucykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBtdXRhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAobXV0YXRpb25zLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IG11dGF0aW9uc1tpXS5hZGRlZE5vZGVzO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGl0ZW1zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbXNbal0ucmVzaXplU2Vuc29yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVzaXplU2Vuc29yLnJlc2V0KGl0ZW1zW2pdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbiAgICAgICAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgc3VidHJlZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gUmVzaXplU2Vuc29yO1xuXG59KSk7XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLyoqXG4gKiBEZWZhdWx0IHBhY2tlciB1c2VkIHRvIHBvc2l0aW9uIGVhY2ggYnJpY2sgYXMgY2xvc2UgdG8gdGhlIHRvcCBhcyBwb3NzaWJsZVxuICovXG52YXIgTWFzb25EZWZhdWx0UGFja2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1hc29uRGVmYXVsdFBhY2tlcigpIHtcbiAgICB9XG4gICAgTWFzb25EZWZhdWx0UGFja2VyLnByb3RvdHlwZS5maW5kQmVzdENvbHVtbiA9IGZ1bmN0aW9uIChyZXF1aXJlZENvbHVtbnMsIGVsZW1lbnQsIGVsZW1lbnRJbmRleCwgY29sdW1uQm90dG9tcywgdGhyZXNob2xkKSB7XG4gICAgICAgIC8vIHdlIG5lZWQgdG8gbG9vayBhdCBhbGwgdGhlIGNvbHVtbnMgYW5kIGZpbmQgdGhlIHdoaWNoIG9uZXNcbiAgICAgICAgLy8gdGhpcyB3b3VsZCBzaG91bGQgc3BhbiBiYXNlZCBvbiBwcmVzZW50aW5nIGl0IGFzIGNsb3NlIHRvIHRoZVxuICAgICAgICAvLyB0b3AgYXMgcG9zc2libGUuXG4gICAgICAgIHZhciBjb2x1bW5zID0gY29sdW1uQm90dG9tcy5sZW5ndGg7XG4gICAgICAgIHZhciByZXN1bHQgPSBjb2x1bW5Cb3R0b21zLnJlZHVjZShmdW5jdGlvbiAoYWNjdW11bGF0b3IsIGNvbHVtbiwgaWR4LCBhbGwpIHtcbiAgICAgICAgICAgIC8vIHN0YXJ0aW5nIGF0IGNvbHVtbiBYLCBpZiB3ZSBwdXQgaXQgaGVyZSwgd2hhdCB3b3VsZCBiZVxuICAgICAgICAgICAgLy8gaXRzIHN0YXJ0aW5nIHBvaW50XG4gICAgICAgICAgICBpZiAoaWR4ICsgcmVxdWlyZWRDb2x1bW5zID4gY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGFjY3VtdWxhdG9yLnB1c2goLTEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgaGVpZ2h0IGF0IHdoaWNoIGl0IHdvdWxkIGhhdmUgdG8gYmUgcG9zaXRpb25lZFxuICAgICAgICAgICAgICAgIC8vIGluIG9yZGVyIHRvIG5vdCBvdmVybGFwIHNvbWV0aGluZ1xuICAgICAgICAgICAgICAgIHZhciB5UG9zID0gLTE7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGlkeDsgaSA8IHJlcXVpcmVkQ29sdW1ucyArIGlkeDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHlQb3MgPSBNYXRoLm1heCh5UG9zLCBhbGxbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRvci5wdXNoKHlQb3MpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgW10pO1xuICAgICAgICAvLyBub3cgdGhlIHdlIGhhdmUgdGhlIHkgY29vcmQgdGhhdCBpdCB3b3VsZCBuZWVkIHRvIGJlIGF0IGZvciBlYWNoIHN0YXJ0aW5nIGNvbHVtblxuICAgICAgICAvLyB3ZSBqdXN0IG5lZWQgdG8gZmlndXJlIG91dCB3aGljaCBvbmUgaXMgbG93ZXN0ICh3aGlsZSB0YWtpbmcgaW50byBhY2NvdW50IHRoZSB0aHJlc2hvbGQpXG4gICAgICAgIC8vIGFuZCB3ZSdyZSBkb25lXG4gICAgICAgIHZhciBiZXN0Rml0ID0gcmVzdWx0LnJlZHVjZShmdW5jdGlvbiAoYmVzdCwgY3VyciwgaWR4KSB7XG4gICAgICAgICAgICBpZiAoIWJlc3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB4Q29sdW1uczogaWR4LCB5VW5pdHM6IGN1cnIgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyIDwgKGJlc3QueVVuaXRzIC0gdGhyZXNob2xkKSAmJiBjdXJyICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB4Q29sdW1uczogaWR4LCB5VW5pdHM6IGN1cnIgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiZXN0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgbnVsbCk7XG4gICAgICAgIGJlc3RGaXQuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHJldHVybiBiZXN0Rml0O1xuICAgIH07XG4gICAgcmV0dXJuIE1hc29uRGVmYXVsdFBhY2tlcjtcbn0oKSk7XG5leHBvcnQgeyBNYXNvbkRlZmF1bHRQYWNrZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hc29uLWRlZmF1bHQtcGFja2VyLmpzLm1hcCIsImltcG9ydCB7IE1hc29uRGVmYXVsdFBhY2tlciB9IGZyb20gXCIuL21hc29uLWRlZmF1bHQtcGFja2VyXCI7XG52YXIgTWFzb25PcHRpb25zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1hc29uT3B0aW9ucygpIHtcbiAgICAgICAgdGhpcy5jb2x1bW5zID0gMTI7XG4gICAgICAgIHRoaXMudGhyZXNob2xkID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIE1hc29uT3B0aW9ucztcbn0oKSk7XG5leHBvcnQgeyBNYXNvbk9wdGlvbnMgfTtcbnZhciBNYXNvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNYXNvbihyZW5kZXJlck9yT3B0aW9ucywgY29udGFpbmVyV2lkdGgsIGNvbHVtbnMsIHRocmVzaG9sZCkge1xuICAgICAgICBpZiAoY29sdW1ucyA9PT0gdm9pZCAwKSB7IGNvbHVtbnMgPSAxMjsgfVxuICAgICAgICBpZiAodGhyZXNob2xkID09PSB2b2lkIDApIHsgdGhyZXNob2xkID0gMDsgfVxuICAgICAgICB0aGlzLmNvbHVtbnMgPSAxMjtcbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgd2lnZ2xlIHJvb20gTWFzb24gaGFzIHdoZW4gY2hvb3NpbmcgYSBjb2x1bW4gZm9yIGEgYnJpY2tcbiAgICAgICAgLy8gV2hlbiBzdGFydGluZyBvbiB0aGUgbGVmdCwgTWFzb24gd2lsbCBvbmx5IGNvbnNpZGVyIGEgY29sdW1uIGNob29zZSBhcyBhIGJldHRlciBmaXRcbiAgICAgICAgLy8gaWYgaXQgaXMgYmV0dGVyIGJ5IHRoaXMgYW1vdW50IG9yIG1vcmUuIFRoaXMgcHJldmVudHMgYnJpY2tzIGZyb20gYmVpbmcgcGxhY2VkIHRvIHRoZVxuICAgICAgICB0aGlzLnRocmVzaG9sZCA9IDQwO1xuICAgICAgICB0aGlzLmNvbHVtbkJvdHRvbXMgPSBbXTtcbiAgICAgICAgaWYgKHJlbmRlcmVyT3JPcHRpb25zW1wicmVuZGVyZXJcIl0pIHtcbiAgICAgICAgICAgIHZhciBvcHRzID0gcmVuZGVyZXJPck9wdGlvbnM7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gb3B0cy5yZW5kZXJlcjtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyV2lkdGggPSBvcHRzLmNvbnRhaW5lcldpZHRoO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gb3B0cy5jb2x1bW5zO1xuICAgICAgICAgICAgdGhpcy50aHJlc2hvbGQgPSBvcHRzLnRocmVzaG9sZDtcbiAgICAgICAgICAgIHRoaXMucGFja2VyID0gb3B0cy5wYWNrZXIgfHwgbmV3IE1hc29uRGVmYXVsdFBhY2tlcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyT3JPcHRpb25zO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJXaWR0aCA9IGNvbnRhaW5lcldpZHRoO1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gY29sdW1ucztcbiAgICAgICAgICAgIHRoaXMudGhyZXNob2xkID0gdGhyZXNob2xkO1xuICAgICAgICAgICAgdGhpcy5wYWNrZXIgPSBuZXcgTWFzb25EZWZhdWx0UGFja2VyKCk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHRoaXMuY29sdW1uQm90dG9tcy5sZW5ndGggPCB0aGlzLmNvbHVtbnMpIHtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uQm90dG9tcy5wdXNoKDApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0Q29sdW1ucyhjb2x1bW5zKTtcbiAgICB9XG4gICAgTWFzb24ucHJvdG90eXBlLmZpbmRCZXN0Q29sdW1uID0gZnVuY3Rpb24gKHJlcXVpcmVkQ29sdW1ucywgZWxlbWVudCwgZWxlbWVudEluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhY2tlci5maW5kQmVzdENvbHVtbihyZXF1aXJlZENvbHVtbnMsIGVsZW1lbnQsIGVsZW1lbnRJbmRleCwgdGhpcy5jb2x1bW5Cb3R0b21zLCB0aGlzLnRocmVzaG9sZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIGxpc3Qgb2YgZWxlbWVudHMgYW5kIHJldHVybnMgdGhlIG5ldyBjb29yZHMgZm9yIGVhY2ggb25lLiBUaGlzIGRvZXMgbm90IHJlcG9zaXRpb24gYW55dGhpbmcuXG4gICAgICogWW91IG1pZ2h0IHVzZSB0aGlzIGlmIHlvdSB3YW50IHRvIGhhbmRsZSBob3cgYW5kIHdoZW4gdGhpbmdzIGdldCByZXBvc2l0aW9uZWQuXG4gICAgICpcbiAgICAgKiBTZWUgbGF5b3V0KCkgaWYgeW91IHdhbnQgZXZlcnl0aGluZyBwb3NpdGlvbiBhdXRvbWF0aWNhbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGVsZW1lbnRzXG4gICAgICogQHJldHVybnMge2Nvb3JkczogTWFzb25Db29yZFtdLCB0b3RhbEhlaWdodDogbnVtYmVyfVxuICAgICAqL1xuICAgIE1hc29uLnByb3RvdHlwZS5maXQgPSBmdW5jdGlvbiAoZWxlbWVudHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGNvb3Jkc0xpc3QgPSBbXTtcbiAgICAgICAgdmFyIHRvdGFsSGVpZ2h0ID0gMDtcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaWR4KSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudFdpZHRoID0gX3RoaXMucmVuZGVyZXIuZ2V0RWxlbWVudFdpZHRoKGVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRIZWlnaHQgPSBfdGhpcy5yZW5kZXJlci5nZXRFbGVtZW50SGVpZ2h0KGVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIGNvbHMgPSBNYXRoLnJvdW5kKGVsZW1lbnRXaWR0aCAvIF90aGlzLmNvbnRhaW5lcldpZHRoICogX3RoaXMuY29sdW1ucyk7XG4gICAgICAgICAgICAvLyBjYW4ndCBiZSBiaWdnZXIgdGhhbiAnYWxsJyBjb2x1bW5zXG4gICAgICAgICAgICBpZiAoY29scyA+IF90aGlzLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBjb2xzID0gX3RoaXMuY29sdW1ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBiZXN0Rml0ID0gX3RoaXMuZmluZEJlc3RDb2x1bW4oY29scywgZWxlbWVudCwgaWR4KTtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgY29sdW1uIGJvdHRvbXMgZm9yIGFsbCB0aGUgY29sdW1ucyB0aGlzIHRpbGUgY3Jvc3NlcyB3aGVuIHBvc2l0aW9uZWQgYXQgdGhlIGJlc3RcbiAgICAgICAgICAgIC8vIGxvY2F0aW9uXG4gICAgICAgICAgICB2YXIgc3RhcnRDb2wgPSBiZXN0Rml0LnhDb2x1bW5zO1xuICAgICAgICAgICAgdmFyIGVuZENvbCA9IHN0YXJ0Q29sICsgY29scztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydENvbDsgaSA8IGVuZENvbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY29sdW1uQm90dG9tc1tpXSA9IGJlc3RGaXQueVVuaXRzICsgZWxlbWVudEhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRoaXMgaXMgYSB0dXBsZSB3aGVyZSB4IGlzIHRoZSBjb2x1bW4gaW5kZXggYW5kIHlQb3MgaXMgdGhlIHBpeGVsIGNvb3JkIHRvIHBvc2l0aW9uIGF0LlxuICAgICAgICAgICAgY29vcmRzTGlzdC5wdXNoKGJlc3RGaXQpO1xuICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSB0b3RhbCBoZWlnaHRcbiAgICAgICAgICAgIHRvdGFsSGVpZ2h0ID0gTWF0aC5tYXgodG90YWxIZWlnaHQsIGVsZW1lbnRIZWlnaHQgKyBiZXN0Rml0LnlVbml0cyk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgY29vcmRpbmF0ZXMgZm9yIGVhY2ggdGlsZVxuICAgICAgICByZXR1cm4geyBjb29yZHM6IGNvb3Jkc0xpc3QsIHRvdGFsSGVpZ2h0OiB0b3RhbEhlaWdodCB9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhpcyB3aWxsIHRha2UgdGhlIGxpc3Qgb2YgZWxlbWVudHMsIGZpbmQgdGhlaXIgbmV3IGxvY2F0aW9ucyBhbmQgdGhlbiB1c2UgdGhlIE1hc29uUmVuZGVyZXJcbiAgICAgKiB0byByZXBvc2l0aW9uIGFsbCB0aGUgYnJpY2tzIGludG8gdGhlaXIgbmV3IGhvbWUuXG4gICAgICogQHBhcmFtIGVsZW1lbnRzXG4gICAgICogQHJldHVybnMgdGhlIGhlaWdodCB0aGF0IHRoZSBjb250YWluZXIgbXVzdCBub3cgYmUgdG8gaG9sZCB0aGUgaXRlbXMuXG4gICAgICovXG4gICAgTWFzb24ucHJvdG90eXBlLmxheW91dCA9IGZ1bmN0aW9uIChlbGVtZW50cykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgbGF5b3V0UmVzdWx0ID0gdGhpcy5maXQoZWxlbWVudHMpO1xuICAgICAgICBsYXlvdXRSZXN1bHQuY29vcmRzLmZvckVhY2goZnVuY3Rpb24gKGNvb3JkKSB7XG4gICAgICAgICAgICAvLyBhcHBseSB0aGUgY2FsY3VsYXRlZCBwb3NpdGlvbiBmb3IgZWFjaCBicmljayBob3dldmVyIHlvdSB3YW50LiBJbiB0aGlzIGNhc2VcbiAgICAgICAgICAgIC8vIHdlIGFyZSBqdXN0IHNldHRpbmcgdGhlIENTUyBwb3NpdGlvbi4gQW5pbWF0aW9uIHdpbGwgYmUgcHJvdmlkZWQgdmlhIENTU1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyZXIuc2V0UG9zaXRpb24oY29vcmQuZWxlbWVudCwgY29vcmQueENvbHVtbnMsIGNvb3JkLnlVbml0cyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGF5b3V0UmVzdWx0LnRvdGFsSGVpZ2h0O1xuICAgIH07XG4gICAgcmV0dXJuIE1hc29uO1xufSgpKTtcbmV4cG9ydCB7IE1hc29uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXNvbi5qcy5tYXAiLCIvKipcbiAqIENyZWF0ZWQgYnkgbWNrZW93ciBvbiAyLzMvMTcuXG4gKi9cbnZhciBNYXNvbkRvbVJlbmRlcmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1hc29uRG9tUmVuZGVyZXIoKSB7XG4gICAgfVxuICAgIE1hc29uRG9tUmVuZGVyZXIucHJvdG90eXBlLnNldENvbHVtbnMgPSBmdW5jdGlvbiAoY29sdW1ucykge1xuICAgICAgICB0aGlzLmNvbHVtbnMgPSBjb2x1bW5zO1xuICAgIH07XG4gICAgTWFzb25Eb21SZW5kZXJlci5wcm90b3R5cGUuZ2V0RWxlbWVudFdpZHRoID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgfTtcbiAgICBNYXNvbkRvbVJlbmRlcmVyLnByb3RvdHlwZS5nZXRFbGVtZW50SGVpZ2h0ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgIH07XG4gICAgTWFzb25Eb21SZW5kZXJlci5wcm90b3R5cGUuc2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoZWxlbWVudCwgbGVmdEluQ29scywgdG9wSW5Vbml0cykge1xuICAgICAgICBlbGVtZW50LnN0eWxlLmluc2V0SW5saW5lU3RhcnQgPSAoKGxlZnRJbkNvbHMgLyB0aGlzLmNvbHVtbnMpICogMTAwKSArICclJztcbiAgICAgICAgZWxlbWVudC5zdHlsZS50b3AgPSB0b3BJblVuaXRzICsgJ3B4JztcbiAgICB9O1xuICAgIHJldHVybiBNYXNvbkRvbVJlbmRlcmVyO1xufSgpKTtcbmV4cG9ydCB7IE1hc29uRG9tUmVuZGVyZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hc29uLWRvbS1yZW5kZXJlci5qcy5tYXAiLCIvKipcbiAqIFNpbXBsZSBwYWNrZXIgdGhhdCBwb3NpdGlvbnMgZWFjaCBicmljayBpbiB0aGUgbmV4dCBjb2x1bW4uIFRoaXMgd2lsbFxuICogZmFpbCBzcGVjdGFjdWxhcmx5IHdpdGggY29sdW1ucyBvZiBkaWZmZXJlbnQgd2lkdGhzLlxuICovXG52YXIgTWFzb25TaW1wbGVQYWNrZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWFzb25TaW1wbGVQYWNrZXIoKSB7XG4gICAgfVxuICAgIE1hc29uU2ltcGxlUGFja2VyLnByb3RvdHlwZS5maW5kQmVzdENvbHVtbiA9IGZ1bmN0aW9uIChyZXF1aXJlZENvbHVtbnMsIGVsZW1lbnQsIGVsZW1lbnRJbmRleCwgY29sdW1uQm90dG9tcywgdGhyZXNob2xkKSB7XG4gICAgICAgIC8vIFRoaXMgcGFja2VyIHNpbXBseSBmaWd1cmVzIG91dCB3aGljaCBjb2x1bW4gaXQgc2hvdWxkXG4gICAgICAgIC8vIGdvIGluIGJhc2VkIG9uIHRoZSBlbGVtZW50IGluZGV4IGFuZCBhc3N1bWVzIHRoYXQgYWxsXG4gICAgICAgIC8vIGVsZW1lbnRzIGFyZSByZXF1aXJlIHRoZSBzYW1lIG51bWJlciBvZiBjb2x1bW5zXG4gICAgICAgIHZhciBjb2x1bW5zID0gY29sdW1uQm90dG9tcy5sZW5ndGg7XG4gICAgICAgIHZhciBuZXh0Q29sdW1uID0gKHJlcXVpcmVkQ29sdW1ucyAqIGVsZW1lbnRJbmRleCkgJSBjb2x1bW5zO1xuICAgICAgICByZXR1cm4geyB4Q29sdW1uczogbmV4dENvbHVtbiwgeVVuaXRzOiBjb2x1bW5Cb3R0b21zW25leHRDb2x1bW5dLCBlbGVtZW50OiBlbGVtZW50IH07XG4gICAgfTtcbiAgICByZXR1cm4gTWFzb25TaW1wbGVQYWNrZXI7XG59KCkpO1xuZXhwb3J0IHsgTWFzb25TaW1wbGVQYWNrZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hc29uLXNpbXBsZS1wYWNrZXIuanMubWFwIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IG1ja2Vvd3Igb24gMi8yLzE3LlxuICovXG5pbXBvcnQge01hc29uLCBNYXNvbkRvbVJlbmRlcmVyLCBNYXNvblNpbXBsZVBhY2tlciwgTWFzb25EZWZhdWx0UGFja2VyfSBmcm9tICcuLi9saWInO1xuaW1wb3J0IHtSZXNpemVTZW5zb3J9IGZyb20gJ2Nzcy1lbGVtZW50LXF1ZXJpZXMnO1xuXG52YXIgdXNlU2ltcGxlUGFja2VyID0gZmFsc2U7XG5mdW5jdGlvbiBwYWNrKCkge1xuXG4gICAgICAgIC8vIGZpbmQgb3VyIGNvbnRhaW5lclxuICAgICAgICBjb25zdCBkYXNoYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFzb24tY29udGFpbmVyJyk7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lcldpZHRoID0gZGFzaGJvYXJkLm9mZnNldFdpZHRoO1xuICAgICAgICAvLyBmaW5kIGFsbCB0aGUgYnJpY2tzIGluIGl0XG4gICAgICAgIC8vIG5vdCBhbGwgYnJvd3NlcnMgYXJlIGFibGUgdG8gdHJlYXQgdGhlIHJlc3VsdHMgZnJvbSBxdWVyeVNlbGVjdG9yQWxsIHdpdGggYXJyYXkgbWV0aG9kcyBsaWtlIGZvckVhY2goKVxuICAgICAgICAvLyBzbyB0aGlzIHdpbGwgbWFrZSB0aGVuIGFuIGFycmF5XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gW10uc2xpY2UuY2FsbChkYXNoYm9hcmQucXVlcnlTZWxlY3RvckFsbCgnZGl2Lm1hc29uLWJyaWNrJykpO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBhIE1hc29uIGFuZCB1c2UgaXQgdG8gZml0IHRoZSBicmlja3MgaW50byBhIGNvbnRhaW5lclxuICAgICAgICAvLyB0aGUgc2l6ZSBvZiB0aGUgJ2Rhc2hib2FyZCdcbiAgICAgICAgLy8gc2luY2Ugd2UgYXJlIGRlYWxpbmcgd2l0aCBkb20gbm9kZXMsIHdlIG5lZWQgdGhlIE1hc29uRG9tUmVuZGVyZXJcbiAgICAgICAgY29uc3QgcmVuZGVyZXIgPSBuZXcgTWFzb25Eb21SZW5kZXJlcigpO1xuXG4gICAgICAgIGNvbnN0IG9wdHMgPSB7IC8vIE1hc29uT3B0aW9ucyBvYmplY3QgaGVyZVxuICAgICAgICAgICAgY29udGFpbmVyV2lkdGg6IGNvbnRhaW5lcldpZHRoLFxuICAgICAgICAgICAgcmVuZGVyZXI6IHJlbmRlcmVyLFxuICAgICAgICAgICAgLy8gdGhpcyB0aHJlc2hvbGQgc2lnbmlmaWVzIHRoYXQgZXZlbiBpZiBhIGNvbHVtbiB0byB0aGUgcmlnaHRcbiAgICAgICAgICAgIC8vIHdvdWxkIHBvc3Rpb24gdGhlIHRpbGUgY2xvc2VyIHRvIHRoZSB0b3AsIGl0IHdpbGwgcHJlZmVyXG4gICAgICAgICAgICAvLyBhIGNvbHVtbiB0byB0aGUgbGVmdCBpZiB0aGUgZGlmZmVyZW5jZSBpcyBsZXNzIHRoYW4gdGhpc1xuICAgICAgICAgICAgLy8gbWFueSBwaXhlbHMuIE1ha2UgdGhpcyAwIGFuZCBjaGVjayB0aGUgZGVtbyBhbmQgeW91IHdpbGxcbiAgICAgICAgICAgIC8vIHNlZSB0aGUgZGlmZmVyZW5jZSBpbiBwb3NpdGlvbiBvZiBicmlja3MgNSBhbmQgNiBhZnRlciB0aGVcbiAgICAgICAgICAgIC8vIHNob3cgbW9yZSBidXR0b24gaXMgY2xpY2tlZCBpbiBicmljayAxXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IDQwLFxuICAgICAgICAgICAgY29sdW1uczogMTIsXG4gICAgICAgICAgICAvLyBpbXBsZW1lbnQgeW91ciBvd24gcGFja2luZyBsb2dpY1xuICAgICAgICAgICAgLy8gZm9ybSBleGFtcGxlLCBpbXBvcnQgTWFzb25TaW1wbGVQYWNrZXIgYW5kIHRyeSB0aGF0XG4gICAgICAgICAgICBwYWNrZXI6IHVzZVNpbXBsZVBhY2tlciA/IG5ldyBNYXNvblNpbXBsZVBhY2tlcigpIDogbmV3IE1hc29uRGVmYXVsdFBhY2tlcigpXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgY29udGFpbmVySGVpZ2h0ID0gbmV3IE1hc29uKG9wdHMpLmxheW91dChpdGVtcyk7XG4gICAgICAgIGRhc2hib2FyZC5zdHlsZS5taW5IZWlnaHQgPSBjb250YWluZXJIZWlnaHQgKyAncHgnO1xuXG59XG5cbmZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgIC8vIGluaXRpYWxpemUgdGhlIGxheW91dFxuICAgIHBhY2soKTtcblxuICAgIC8vIGluIG91ciBjYXNlLCB3ZSB3YW50IHRvIHJlIGxheW91dCB0aGUgYnJpY2tzIHdoZW4gYW55IG9mIHRoZWlyIHNpemVzIGNoYW5nZS5cbiAgICAvLyBpZiB0aGUgYnJpY2tzIHNpemVzIGNhbiBvbmx5IGNoYW5nZSB3aGVuIHRoZSB3aW5kb3cgaXMgcmVzaXplZCwgeW91IGNvdWxkIHVzZSB0aGVcbiAgICAvLyB3aW5kb3cgcmVzaXplIGV2ZW50LiBIb3dldmVyLCBpZiB0aGUgYnJpY2tzIGNhbiByZXNpemUgdGhlbXNlbHZlcywgeW91IHdvdWxkIHdhbnQgdG8gZG8gc29tZXRoaW5nXG4gICAgLy8gbGlrZSB0aGlzXG4gICAgLy8gUmVzaXplU2Vuc29yIGlzIGZyb20gY3NzLWVsZW1lbnQtcXVlcmllcyAod2hpY2ggaXMgbGlzdGVkIGFzIGFuIG9wdGlvbmFsIGRlcGVuZGVuY3kpO1xuICAgIG5ldyBSZXNpemVTZW5zb3IoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1hc29uLWNvbnRhaW5lcicpLnF1ZXJ5U2VsZWN0b3JBbGwoJ2Rpdi5tYXNvbi1icmljaycpLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcGFjaygpO1xuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZGFibGVFeGFtcGxlJykucXVlcnlTZWxlY3RvcignYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICBzaG93TW9yZSgpO1xuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZVNpbXBsZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRvZ2dsZVBhY2tlcik7XG59XG5cbmZ1bmN0aW9uIHJlc2V0SGVpZ2h0KCkge1xuICAgIHZhciBmaXJzdFRpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kYWJsZUV4YW1wbGUnKTtcbiAgICBmaXJzdFRpbGUuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuICAgIGZpcnN0VGlsZS5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgcmVzZXRIZWlnaHQpO1xufVxuXG5mdW5jdGlvbiBzaG93TW9yZSgpIHtcbiAgY29uc3QgZmlyc3RUaWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZGFibGVFeGFtcGxlJyk7XG5cbiAgICBpZiAoZmlyc3RUaWxlLnN0eWxlLmhlaWdodCAhPT0gJzQwMHB4Jykge1xuICAgICAgY29uc3QgYXV0b0hlaWdodCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGZpcnN0VGlsZSwgbnVsbCkuaGVpZ2h0O1xuICAgICAgICBmaXJzdFRpbGUuc2V0QXR0cmlidXRlKCdkYXRhLWF1dG8taGVpZ2h0JywgYXV0b0hlaWdodCk7XG4gICAgICAgIGZpcnN0VGlsZS5zdHlsZS5oZWlnaHQgPSBhdXRvSGVpZ2h0O1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZmlyc3RUaWxlLnN0eWxlLmhlaWdodCA9ICc0MDBweCc7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0YXJnZXRIZWlnaHQgPSBmaXJzdFRpbGUuZ2V0QXR0cmlidXRlKCdkYXRhLWF1dG8taGVpZ2h0Jyk7XG4gICAgICAgIGZpcnN0VGlsZS5zdHlsZS5oZWlnaHQgPSB0YXJnZXRIZWlnaHQ7XG4gICAgICAgIGZpcnN0VGlsZS5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgcmVzZXRIZWlnaHQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdG9nZ2xlUGFja2VyKGV2dCkge1xuICAgIHVzZVNpbXBsZVBhY2tlciA9IGV2dC50YXJnZXQuY2hlY2tlZDtcbiAgICBwYWNrKCk7XG59XG5cbnN0YXJ0KCk7Il0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJSZXNpemVTZW5zb3IiLCJFbGVtZW50UXVlcmllcyIsIndpbmRvdyIsImNzc1N0eWxlRWxlbWVudCIsImFsbFF1ZXJpZXMiLCJpZFRvU2VsZWN0b3JNYXBwaW5nIiwiZ2V0RW1TaXplIiwiZWxlbWVudCIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiZm9udFNpemUiLCJnZXRDb21wdXRlZFN0eWxlIiwicGFyc2VGbG9hdCIsImNvbnZlcnRUb1B4IiwidmFsdWUiLCJudW1iZXJzIiwic3BsaXQiLCJ1bml0cyIsImxlbmd0aCIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwidnciLCJ2aCIsImNob29zZXIiLCJNYXRoIiwiU2V0dXBJbmZvcm1hdGlvbiIsImlkIiwia2V5Iiwib3B0aW9uIiwiZWxlbWVudFNpemUiLCJhY3R1YWxWYWx1ZSIsImF0dHJWYWx1ZXMiLCJhdHRyVmFsdWUiLCJhdHRyTmFtZSIsInRoaXMiLCJhdHRyaWJ1dGVzIiwiY2FsbCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIndpZHRoIiwib2Zmc2V0V2lkdGgiLCJoZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJyZWN0Iiwicm91bmQiLCJnZXRFbGVtZW50U2l6ZSIsImhhc093blByb3BlcnR5IiwicHJvcGVydHkiLCJtb2RlIiwiaW5kZXhPZiIsImsiLCJzZXRBdHRyaWJ1dGUiLCJzdWJzdHIiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXR1cEVsZW1lbnQiLCJlbGVtZW50UXVlcmllc1NldHVwSW5mb3JtYXRpb24iLCJlbGVtZW50UXVlcmllc1NlbnNvciIsInF1ZXVlUXVlcnkiLCJzZWxlY3RvciIsImlubmVySFRNTCIsInB1c2giLCJnZXRRdWVyeSIsImNvbnRhaW5lciIsInF1ZXJ5IiwicXVlcnlTZWxlY3RvckFsbCIsImJpbmQiLCIkJCIsImpRdWVyeSIsImF0dGFjaFJlc3BvbnNpdmVJbWFnZSIsImNoaWxkcmVuIiwicnVsZXMiLCJzb3VyY2VzIiwiZGVmYXVsdEltYWdlSWQiLCJsYXN0QWN0aXZlSW1hZ2UiLCJsb2FkZWRJbWFnZXMiLCJpIiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwibWluV2lkdGgiLCJnZXRBdHRyaWJ1dGUiLCJzcmMiLCJydWxlIiwic3R5bGUiLCJkaXNwbGF5IiwiY2hlY2siLCJpbWFnZVRvRGlzcGxheSIsImltYWdlIiwiSW1hZ2UiLCJvbmxvYWQiLCJyZXNpemVTZW5zb3JJbnN0YW5jZSIsInJlZ2V4IiwiYXR0clJlZ2V4IiwiZXh0cmFjdFF1ZXJ5IiwiY3NzIiwibWF0Y2giLCJzbWF0Y2giLCJhdHRycyIsImF0dHJNYXRjaCIsInJlcGxhY2UiLCJleGVjIiwicmVhZFJ1bGVzIiwiaiIsInR5cGUiLCJzZWxlY3RvclRleHQiLCJjc3NUZXh0IiwiY3NzUnVsZXMiLCJzdHlsZVNoZWV0IiwiZGVmYXVsdENzc0luamVjdGVkIiwiaW5pdCIsImFuaW1hdGlvblN0YXJ0IiwiYm9keSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0Iiwic3R5bGVzIiwiYW5pbWF0aW9uTmFtZSIsImdldFByb3BlcnR5VmFsdWUiLCJyZXNpemVTZW5zb3IiLCJwYXJzZUludCIsImNyZWF0ZUVsZW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImFwcGVuZENoaWxkIiwic3R5bGVTaGVldHMiLCJocmVmIiwiY29uc29sZSIsIndhcm4iLCJlbGVtZW50cyIsImZpbmRSZXNwb25zaXZlSW1hZ2VzIiwiZmluZEVsZW1lbnRRdWVyaWVzRWxlbWVudHMiLCJ1cGRhdGUiLCJpbnN0YW5jZSIsImRldGFjaCIsImxpc3RlbiIsImNhbGxiYWNrIiwidGVzdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIkRPTUxvYWRUaW1lciIsInNldEludGVydmFsIiwicmVhZHlTdGF0ZSIsImNsZWFySW50ZXJ2YWwiLCJkb21Mb2FkZWQiLCJnbG9iYWxXaW5kb3ciLCJzZWxmIiwiRnVuY3Rpb24iLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJmbiIsInNldFRpbWVvdXQiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsIm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lIiwid2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJ0aW1lciIsImNsZWFyVGltZW91dCIsImZvckVhY2hFbGVtZW50IiwiZWxlbWVudHNUeXBlIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJpc0NvbGxlY3Rpb25UeXBlZCIsIkVsZW1lbnRzIiwic2V0U3R5bGUiLCJrZXlzIiwiZm9yRWFjaCIsImxhc3RBbmltYXRpb25GcmFtZUZvckludmlzaWJsZUNoZWNrIiwiRXZlbnRRdWV1ZSIsInEiLCJhZGQiLCJldiIsInNpemVJbmZvIiwicmVtb3ZlIiwibmV3UXVldWUiLCJhdHRhY2hSZXNpemVFdmVudCIsInJlc2l6ZWQiLCJyZXNpemVkQXR0YWNoZWQiLCJkaXIiLCJjbGFzc05hbWUiLCJwb2ludGVyRXZlbnRzIiwicG9zaXRpb24iLCJsZWZ0IiwidG9wIiwicmlnaHQiLCJib3R0b20iLCJvdmVyZmxvdyIsInpJbmRleCIsInZpc2liaWxpdHkiLCJtYXhXaWR0aCIsInN0eWxlQ2hpbGQiLCJ0cmFuc2l0aW9uIiwiZXhwYW5kIiwiZXhwYW5kQ2hpbGQiLCJzaHJpbmsiLCJzaHJpbmtDaGlsZCIsImNvbXB1dGVkU3R5bGUiLCJkaXJ0eSIsInJhZklkIiwic2l6ZSIsImxhc3RXaWR0aCIsImxhc3RIZWlnaHQiLCJpbml0aWFsSGlkZGVuQ2hlY2siLCJyZXNldCIsInNjcm9sbExlZnQiLCJzY3JvbGxUb3AiLCJyZXNldFNlbnNvciIsIm9uUmVzaXplZCIsIm9uU2Nyb2xsIiwiYWRkRXZlbnQiLCJlbCIsIm5hbWUiLCJjYiIsImF0dGFjaEV2ZW50IiwiZWxlbSIsImNvbnRhaW5zIiwicmVtb3ZlQ2hpbGQiLCJNdXRhdGlvbk9ic2VydmVyIiwib2JzZXJ2ZXIiLCJtdXRhdGlvbnMiLCJpdGVtcyIsImFkZGVkTm9kZXMiLCJldmVudCIsIm9ic2VydmUiLCJjaGlsZExpc3QiLCJzdWJ0cmVlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIk1hc29uRGVmYXVsdFBhY2tlciIsImZpbmRCZXN0Q29sdW1uIiwicmVxdWlyZWRDb2x1bW5zIiwiZWxlbWVudEluZGV4IiwiY29sdW1uQm90dG9tcyIsInRocmVzaG9sZCIsImNvbHVtbnMiLCJiZXN0Rml0IiwicmVkdWNlIiwiYWNjdW11bGF0b3IiLCJjb2x1bW4iLCJpZHgiLCJhbGwiLCJ5UG9zIiwibWF4IiwiYmVzdCIsImN1cnIiLCJ5VW5pdHMiLCJ4Q29sdW1ucyIsIk1hc29uIiwicmVuZGVyZXJPck9wdGlvbnMiLCJjb250YWluZXJXaWR0aCIsIm9wdHMiLCJyZW5kZXJlciIsInBhY2tlciIsInNldENvbHVtbnMiLCJmaXQiLCJfdGhpcyIsImNvb3Jkc0xpc3QiLCJ0b3RhbEhlaWdodCIsImVsZW1lbnRXaWR0aCIsImdldEVsZW1lbnRXaWR0aCIsImVsZW1lbnRIZWlnaHQiLCJnZXRFbGVtZW50SGVpZ2h0IiwiY29scyIsInN0YXJ0Q29sIiwiZW5kQ29sIiwiY29vcmRzIiwibGF5b3V0IiwibGF5b3V0UmVzdWx0IiwiY29vcmQiLCJzZXRQb3NpdGlvbiIsIk1hc29uRG9tUmVuZGVyZXIiLCJsZWZ0SW5Db2xzIiwidG9wSW5Vbml0cyIsImluc2V0SW5saW5lU3RhcnQiLCJNYXNvblNpbXBsZVBhY2tlciIsIm5leHRDb2x1bW4iLCJ1c2VTaW1wbGVQYWNrZXIiLCJwYWNrIiwiZGFzaGJvYXJkIiwicXVlcnlTZWxlY3RvciIsInNsaWNlIiwiY29udGFpbmVySGVpZ2h0IiwibWluSGVpZ2h0IiwicmVzZXRIZWlnaHQiLCJmaXJzdFRpbGUiLCJnZXRFbGVtZW50QnlJZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhdXRvSGVpZ2h0IiwidGFyZ2V0SGVpZ2h0Iiwic2hvd01vcmUiLCJldnQiLCJjaGVja2VkIl0sInNvdXJjZVJvb3QiOiIifQ==